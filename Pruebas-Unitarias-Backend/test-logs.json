[
  {
    "timestamp": "2026-02-12T02:31:02.503Z",
    "date": "11/2/2026, 21:31:02",
    "passed": 3,
    "failed": 2,
    "total": 5,
    "failedTests": [],
    "output": "\n> pruebas-unitarias-backend@1.0.0 test\n> jest --verbose\n\n  console.log\n    [dotenv@17.2.3] injecting env (3) from .env -- tip: ðŸ”‘ add access controls to secrets: https://dotenvx.com/ops\n\n      at _log (../node_modules/dotenv/lib/main.js:142:11)\n\n  console.log\n    [dotenv@17.2.3] injecting env (3) from .env -- tip: âš™ï¸  suppress all logs with { quiet: true }\n\n      at _log (../node_modules/dotenv/lib/main.js:142:11)\n\n  console.log\n    [dotenv@17.2.3] injecting env (3) from .env -- tip: âš™ï¸  specify custom .env file path with { path: '/custom/path/.env' }\n\n      at _log (../node_modules/dotenv/lib/main.js:142:11)\n\n  console.log\n    [dotenv@17.2.3] injecting env (3) from .env -- tip: âš™ï¸  override existing env vars with { override: true }\n\n      at _log (../node_modules/dotenv/lib/main.js:142:11)\n\n  console.log\n    [dotenv@17.2.3] injecting env (3) from .env -- tip: ðŸ—‚ï¸ backup and recover secrets: https://dotenvx.com/ops\n\n      at _log (../node_modules/dotenv/lib/main.js:142:11)\n\n  console.log\n    âœ… MongoDB conectado\n\n      at log (src/app.js:34:29)\n\n  console.log\n    âœ… MongoDB conectado\n\n      at log (src/app.js:34:29)\n\n  console.log\n    âœ… MongoDB conectado\n\n      at log (src/app.js:34:29)\n\n  console.log\n    âœ… MongoDB conectado\n\n      at log (src/app.js:34:29)\n\n  console.log\n    âœ… MongoDB conectado\n\n      at log (src/app.js:34:29)\n\nFAIL test/pacientes.test.js\n  Pacientes API - Pruebas Unitarias con PatrÃ³n AAA\n    GET /api/pacientes\n      âˆš Debe retornar una lista vacÃ­a inicialmente (93 ms)\n      Ã— Debe retornar todos los pacientes existentes (59 ms)\n    POST /api/pacientes\n      âˆš Debe crear un nuevo paciente con datos vÃ¡lidos (46 ms)\n      âˆš Debe rechazar paciente con datos incompletos (11 ms)\n    PUT /api/pacientes/:id\n      âˆš Debe actualizar un paciente existente (36 ms)\n      âˆš Debe actualizar mÃºltiples campos simultÃ¡neamente (27 ms)\n      âˆš Debe retornar 404 si el paciente no existe (13 ms)\n    DELETE /api/pacientes/:id\n      âˆš Debe eliminar un paciente existente (38 ms)\n      âˆš Debe retornar 404 al eliminar paciente inexistente (13 ms)\n\n  â— Pacientes API - Pruebas Unitarias con PatrÃ³n AAA â€º GET /api/pacientes â€º Debe retornar todos los pacientes existentes\n\n    expect(received).toHaveLength(expected)\n\n    Expected length: 2\n    Received length: 0\n    Received array:  []\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m             \u001b[90m// ASSERT: Verificar que retorna 2 pacientes (sin importar orden)\u001b[39m\n     \u001b[90m 42 |\u001b[39m             expect(res\u001b[33m.\u001b[39mstatusCode)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m             expect(res\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoHaveLength(\u001b[35m2\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m             \u001b[36mconst\u001b[39m names \u001b[33m=\u001b[39m res\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mmap(p \u001b[33m=>\u001b[39m p\u001b[33m.\u001b[39mname)\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m             expect(names)\u001b[33m.\u001b[39mtoContain(\u001b[32m'Juan'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m             expect(names)\u001b[33m.\u001b[39mtoContain(\u001b[32m'MarÃ­a'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toHaveLength (test/pacientes.test.js:43:30)\n\nPASS test/especialidades.test.js\n  Especialidades API - Pruebas Unitarias con PatrÃ³n AAA\n    GET /api/especialidades\n      âˆš Debe retornar un array vacÃ­o inicialmente (109 ms)\n      âˆš Debe retornar todas las especialidades registradas (46 ms)\n    POST /api/especialidades\n      âˆš Debe crear una nueva especialidad con datos vÃ¡lidos (43 ms)\n      âˆš Debe rechazar especialidad sin nombre (11 ms)\n      âˆš Debe rechazar especialidad duplicada (case-insensitive) (28 ms)\n    PUT /api/especialidades/:id\n      âˆš Debe actualizar el nombre de una especialidad existente (37 ms)\n      âˆš Debe retornar 404 al actualizar especialidad inexistente (13 ms)\n    DELETE /api/especialidades/:id\n      âˆš Debe eliminar una especialidad existente (38 ms)\n      âˆš Debe retornar 404 al eliminar especialidad inexistente (9 ms)\n\nPASS test/medicamentos.test.js\n  Medicamentos API - Pruebas Unitarias con PatrÃ³n AAA\n    GET /api/medicamentos\n      âˆš Debe retornar un array vacÃ­o inicialmente (173 ms)\n      âˆš Debe retornar todos los medicamentos registrados (47 ms)\n    POST /api/medicamentos\n      âˆš Debe crear un nuevo medicamento con datos vÃ¡lidos (39 ms)\n      âˆš Debe rechazar medicamento con datos incompletos (12 ms)\n    PUT /api/medicamentos/:id\n      âˆš Debe actualizar el precio de un medicamento existente (35 ms)\n      âˆš Debe actualizar mÃºltiples campos simultÃ¡neamente (27 ms)\n      âˆš Debe retornar 404 al actualizar medicamento inexistente (14 ms)\n    DELETE /api/medicamentos/:id\n      âˆš Debe eliminar un medicamento existente (33 ms)\n      âˆš Debe retornar 404 al eliminar medicamento inexistente (9 ms)\n\nFAIL test/doctores.test.js\n  Doctores API - Pruebas Unitarias con PatrÃ³n AAA\n    GET /api/doctores\n      âˆš Debe retornar un array vacÃ­o inicialmente (85 ms)\n      âˆš Debe retornar todos los doctores registrados (40 ms)\n    POST /api/doctores\n      âˆš Debe crear un nuevo doctor con datos vÃ¡lidos (43 ms)\n      âˆš Debe rechazar doctor con campos faltantes (11 ms)\n      âˆš Debe rechazar doctor con nÃºmero de licencia duplicado (31 ms)\n      âˆš Debe rechazar doctor sin nombre (10 ms)\n      âˆš Debe rechazar doctor sin specialty (9 ms)\n      âˆš Debe rechazar doctor sin licenseNumber (12 ms)\n    DELETE /api/doctores/:id\n      âˆš Debe eliminar un doctor existente (26 ms)\n      âˆš Debe retornar 404 al eliminar doctor inexistente (11 ms)\n    GET /api/doctores/:id\n      Ã— Debe obtener un doctor por ID (20 ms)\n      Ã— Debe retornar 404 al buscar doctor inexistente (9 ms)\n\n  â— Doctores API - Pruebas Unitarias con PatrÃ³n AAA â€º GET /api/doctores/:id â€º Debe obtener un doctor por ID\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 404\n\n    \u001b[0m \u001b[90m 209 |\u001b[39m             \u001b[36mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\u001b[33m.\u001b[39m\u001b[36mget\u001b[39m(\u001b[32m`/api/doctores/${id}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 210 |\u001b[39m             \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 211 |\u001b[39m             expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 212 |\u001b[39m             expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mname)\u001b[33m.\u001b[39mtoBe(\u001b[32m'David'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 213 |\u001b[39m             expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39m_id)\u001b[33m.\u001b[39mtoBe(id)\u001b[33m;\u001b[39m\n     \u001b[90m 214 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBe (test/doctores.test.js:211:37)\n\n  â— Doctores API - Pruebas Unitarias con PatrÃ³n AAA â€º GET /api/doctores/:id â€º Debe retornar 404 al buscar doctor inexistente\n\n    expect(received).toHaveProperty(path, value)\n\n    Expected path: \"message\"\n\n    Expected value: \"Doctor not found\"\n    Received value: \"Route not found\"\n\n    \u001b[0m \u001b[90m 218 |\u001b[39m             \u001b[36mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\u001b[33m.\u001b[39m\u001b[36mget\u001b[39m(\u001b[32m`/api/doctores/${fakeId}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 219 |\u001b[39m             expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m404\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 220 |\u001b[39m             expect(response\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'message'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'Doctor not found'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 221 |\u001b[39m         })\u001b[33m;\u001b[39m\n     \u001b[90m 222 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 223 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toHaveProperty (test/doctores.test.js:220:35)\n\nPASS test/app.test.js (24.437 s)\n  Backend App API - Main Endpoints\n    âˆš OPTIONS request - should allow CORS with method OPTIONS (56 ms)\n    âˆš GET request - should include CORS headers (62 ms)\n    âˆš GET /nonexistent - should return 404 (38 ms)\n    âˆš GET /api/health - should return server status (19 ms)\n    âˆš GET /api/test-logs - should return test logs (26 ms)\n    âˆš POST /api/run-tests - should execute tests (21285 ms)\n\nTest Suites: 2 failed, 3 passed, 5 total\nTests:       3 failed, 42 passed, 45 total\nSnapshots:   0 total\nTime:        24.902 s, estimated 34 s\nRan all test suites.\n"
  },
  {
    "timestamp": "2026-02-12T02:31:02.330Z",
    "date": "11/2/2026, 21:31:02",
    "passed": 2,
    "failed": 3,
    "total": 5,
    "failedTests": [],
    "output": "\n> pruebas-unitarias-backend@1.0.0 test\n> jest --verbose\n\n  console.log\n    [dotenv@17.2.3] injecting env (3) from .env -- tip: âš™ï¸  write to custom object with { processEnv: myObject }\n\n      at _log (../node_modules/dotenv/lib/main.js:142:11)\n\n  console.log\n    [dotenv@17.2.3] injecting env (3) from .env -- tip: ðŸ” prevent committing .env to code: https://dotenvx.com/precommit\n\n      at _log (../node_modules/dotenv/lib/main.js:142:11)\n\n  console.log\n    [dotenv@17.2.3] injecting env (3) from .env -- tip: ðŸ” encrypt with Dotenvx: https://dotenvx.com\n\n      at _log (../node_modules/dotenv/lib/main.js:142:11)\n\n  console.log\n    [dotenv@17.2.3] injecting env (3) from .env -- tip: ðŸ› ï¸  run anywhere with `dotenvx run -- yourcommand`\n\n      at _log (../node_modules/dotenv/lib/main.js:142:11)\n\n  console.log\n    [dotenv@17.2.3] injecting env (3) from .env -- tip: âš™ï¸  write to custom object with { processEnv: myObject }\n\n      at _log (../node_modules/dotenv/lib/main.js:142:11)\n\n  console.log\n    âœ… MongoDB conectado\n\n      at log (src/app.js:34:29)\n\n  console.log\n    âœ… MongoDB conectado\n\n      at log (src/app.js:34:29)\n\n  console.log\n    âœ… MongoDB conectado\n\n      at log (src/app.js:34:29)\n\n  console.log\n    âœ… MongoDB conectado\n\n      at log (src/app.js:34:29)\n\n  console.log\n    âœ… MongoDB conectado\n\n      at log (src/app.js:34:29)\n\nFAIL test/pacientes.test.js\n  Pacientes API - Pruebas Unitarias con PatrÃ³n AAA\n    GET /api/pacientes\n      âˆš Debe retornar una lista vacÃ­a inicialmente (68 ms)\n      âˆš Debe retornar todos los pacientes existentes (43 ms)\n    POST /api/pacientes\n      âˆš Debe crear un nuevo paciente con datos vÃ¡lidos (39 ms)\n      âˆš Debe rechazar paciente con datos incompletos (13 ms)\n    PUT /api/pacientes/:id\n      Ã— Debe actualizar un paciente existente (29 ms)\n      Ã— Debe actualizar mÃºltiples campos simultÃ¡neamente (33 ms)\n      âˆš Debe retornar 404 si el paciente no existe (14 ms)\n    DELETE /api/pacientes/:id\n      âˆš Debe eliminar un paciente existente (35 ms)\n      âˆš Debe retornar 404 al eliminar paciente inexistente (13 ms)\n\n  â— Pacientes API - Pruebas Unitarias con PatrÃ³n AAA â€º PUT /api/pacientes/:id â€º Debe actualizar un paciente existente\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 404\n\n    \u001b[0m \u001b[90m 102 |\u001b[39m\n     \u001b[90m 103 |\u001b[39m             \u001b[90m// ASSERT: Verificar actualizaciÃ³n\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 104 |\u001b[39m             expect(updated\u001b[33m.\u001b[39mstatusCode)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 105 |\u001b[39m             expect(updated\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39millness)\u001b[33m.\u001b[39mtoBe(\u001b[32m'MigraÃ±a'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 106 |\u001b[39m             expect(updated\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mname)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Ana'\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// Otros campos no cambian\u001b[39m\n     \u001b[90m 107 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBe (test/pacientes.test.js:104:40)\n\n  â— Pacientes API - Pruebas Unitarias con PatrÃ³n AAA â€º PUT /api/pacientes/:id â€º Debe actualizar mÃºltiples campos simultÃ¡neamente\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 500\n\n    \u001b[0m \u001b[90m 129 |\u001b[39m\n     \u001b[90m 130 |\u001b[39m             \u001b[90m// ASSERT: Verificar todas las actualizaciones\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 131 |\u001b[39m             expect(updated\u001b[33m.\u001b[39mstatusCode)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 132 |\u001b[39m             expect(updated\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mname)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Pedro Luis'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m             expect(updated\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mlastName)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Garcia Perez'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 134 |\u001b[39m             expect(updated\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39memail)\u001b[33m.\u001b[39mtoBe(\u001b[32m'pedroluis@example.com'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBe (test/pacientes.test.js:131:40)\n\nFAIL test/doctores.test.js\n  Doctores API - Pruebas Unitarias con PatrÃ³n AAA\n    GET /api/doctores\n      âˆš Debe retornar un array vacÃ­o inicialmente (74 ms)\n      âˆš Debe retornar todos los doctores registrados (39 ms)\n    POST /api/doctores\n      âˆš Debe crear un nuevo doctor con datos vÃ¡lidos (43 ms)\n      âˆš Debe rechazar doctor con campos faltantes (12 ms)\n      Ã— Debe rechazar doctor con nÃºmero de licencia duplicado (32 ms)\n      âˆš Debe rechazar doctor sin nombre (10 ms)\n      âˆš Debe rechazar doctor sin specialty (10 ms)\n      âˆš Debe rechazar doctor sin licenseNumber (10 ms)\n    DELETE /api/doctores/:id\n      âˆš Debe eliminar un doctor existente (27 ms)\n      âˆš Debe retornar 404 al eliminar doctor inexistente (15 ms)\n    GET /api/doctores/:id\n      Ã— Debe obtener un doctor por ID (25 ms)\n      Ã— Debe retornar 404 al buscar doctor inexistente (12 ms)\n\n  â— Doctores API - Pruebas Unitarias con PatrÃ³n AAA â€º POST /api/doctores â€º Debe rechazar doctor con nÃºmero de licencia duplicado\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 409\n    Received: 201\n\n    \u001b[0m \u001b[90m 130 |\u001b[39m\n     \u001b[90m 131 |\u001b[39m             \u001b[90m// ASSERT: Verificar error 409 (conflicto)\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 132 |\u001b[39m             expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m409\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 133 |\u001b[39m         })\u001b[33m;\u001b[39m\n     \u001b[90m 134 |\u001b[39m\n     \u001b[90m 135 |\u001b[39m         test(\u001b[32m'Debe rechazar doctor sin nombre'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toBe (test/doctores.test.js:132:37)\n\n  â— Doctores API - Pruebas Unitarias con PatrÃ³n AAA â€º GET /api/doctores/:id â€º Debe obtener un doctor por ID\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 404\n\n    \u001b[0m \u001b[90m 209 |\u001b[39m             \u001b[36mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\u001b[33m.\u001b[39m\u001b[36mget\u001b[39m(\u001b[32m`/api/doctores/${id}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 210 |\u001b[39m             \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 211 |\u001b[39m             expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 212 |\u001b[39m             expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mname)\u001b[33m.\u001b[39mtoBe(\u001b[32m'David'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 213 |\u001b[39m             expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39m_id)\u001b[33m.\u001b[39mtoBe(id)\u001b[33m;\u001b[39m\n     \u001b[90m 214 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBe (test/doctores.test.js:211:37)\n\n  â— Doctores API - Pruebas Unitarias con PatrÃ³n AAA â€º GET /api/doctores/:id â€º Debe retornar 404 al buscar doctor inexistente\n\n    expect(received).toHaveProperty(path, value)\n\n    Expected path: \"message\"\n\n    Expected value: \"Doctor not found\"\n    Received value: \"Route not found\"\n\n    \u001b[0m \u001b[90m 218 |\u001b[39m             \u001b[36mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\u001b[33m.\u001b[39m\u001b[36mget\u001b[39m(\u001b[32m`/api/doctores/${fakeId}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 219 |\u001b[39m             expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m404\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 220 |\u001b[39m             expect(response\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'message'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'Doctor not found'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 221 |\u001b[39m         })\u001b[33m;\u001b[39m\n     \u001b[90m 222 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 223 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toHaveProperty (test/doctores.test.js:220:35)\n\nPASS test/medicamentos.test.js\n  Medicamentos API - Pruebas Unitarias con PatrÃ³n AAA\n    GET /api/medicamentos\n      âˆš Debe retornar un array vacÃ­o inicialmente (72 ms)\n      âˆš Debe retornar todos los medicamentos registrados (40 ms)\n    POST /api/medicamentos\n      âˆš Debe crear un nuevo medicamento con datos vÃ¡lidos (42 ms)\n      âˆš Debe rechazar medicamento con datos incompletos (12 ms)\n    PUT /api/medicamentos/:id\n      âˆš Debe actualizar el precio de un medicamento existente (34 ms)\n      âˆš Debe actualizar mÃºltiples campos simultÃ¡neamente (27 ms)\n      âˆš Debe retornar 404 al actualizar medicamento inexistente (12 ms)\n    DELETE /api/medicamentos/:id\n      âˆš Debe eliminar un medicamento existente (38 ms)\n      âˆš Debe retornar 404 al eliminar medicamento inexistente (10 ms)\n\nFAIL test/especialidades.test.js\n  Especialidades API - Pruebas Unitarias con PatrÃ³n AAA\n    GET /api/especialidades\n      âˆš Debe retornar un array vacÃ­o inicialmente (75 ms)\n      Ã— Debe retornar todas las especialidades registradas (37 ms)\n    POST /api/especialidades\n      âˆš Debe crear una nueva especialidad con datos vÃ¡lidos (57 ms)\n      âˆš Debe rechazar especialidad sin nombre (12 ms)\n      âˆš Debe rechazar especialidad duplicada (case-insensitive) (29 ms)\n    PUT /api/especialidades/:id\n      âˆš Debe actualizar el nombre de una especialidad existente (33 ms)\n      âˆš Debe retornar 404 al actualizar especialidad inexistente (12 ms)\n    DELETE /api/especialidades/:id\n      âˆš Debe eliminar una especialidad existente (38 ms)\n      âˆš Debe retornar 404 al eliminar especialidad inexistente (10 ms)\n\n  â— Especialidades API - Pruebas Unitarias con PatrÃ³n AAA â€º GET /api/especialidades â€º Debe retornar todas las especialidades registradas\n\n    expect(received).toHaveLength(expected)\n\n    Expected length: 3\n    Received length: 0\n    Received array:  []\n\n    \u001b[0m \u001b[90m 42 |\u001b[39m             \u001b[90m// ASSERT: Verificar que retorna 3 especialidades (sin importar orden)\u001b[39m\n     \u001b[90m 43 |\u001b[39m             expect(res\u001b[33m.\u001b[39mstatusCode)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 44 |\u001b[39m             expect(res\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoHaveLength(\u001b[35m3\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 45 |\u001b[39m             \u001b[36mconst\u001b[39m names \u001b[33m=\u001b[39m res\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mmap(e \u001b[33m=>\u001b[39m e\u001b[33m.\u001b[39mname)\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m             expect(names)\u001b[33m.\u001b[39mtoContain(\u001b[32m'CardiologÃ­a'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 47 |\u001b[39m             expect(names)\u001b[33m.\u001b[39mtoContain(\u001b[32m'PediatrÃ­a'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toHaveLength (test/especialidades.test.js:44:30)\n\nPASS test/app.test.js (19.385 s)\n  Backend App API - Main Endpoints\n    âˆš OPTIONS request - should allow CORS with method OPTIONS (54 ms)\n    âˆš GET request - should include CORS headers (31 ms)\n    âˆš GET /nonexistent - should return 404 (21 ms)\n    âˆš GET /api/health - should return server status (16 ms)\n    âˆš GET /api/test-logs - should return test logs (25 ms)\n    âˆš POST /api/run-tests - should execute tests (16235 ms)\n\nTest Suites: 3 failed, 2 passed, 5 total\nTests:       6 failed, 39 passed, 45 total\nSnapshots:   0 total\nTime:        19.939 s, estimated 34 s\nRan all test suites.\n"
  },
  {
    "timestamp": "2026-02-12T02:31:02.157Z",
    "date": "11/2/2026, 21:31:02",
    "passed": 4,
    "failed": 1,
    "total": 5,
    "failedTests": [],
    "output": "\n> pruebas-unitarias-backend@1.0.0 test\n> jest --verbose\n\n  console.log\n    [dotenv@17.2.3] injecting env (3) from .env -- tip: âš™ï¸  suppress all logs with { quiet: true }\n\n      at _log (../node_modules/dotenv/lib/main.js:142:11)\n\n  console.log\n    [dotenv@17.2.3] injecting env (3) from .env -- tip: âš™ï¸  load multiple .env files with { path: ['.env.local', '.env'] }\n\n      at _log (../node_modules/dotenv/lib/main.js:142:11)\n\n  console.log\n    [dotenv@17.2.3] injecting env (3) from .env -- tip: âš™ï¸  enable debug logging with { debug: true }\n\n      at _log (../node_modules/dotenv/lib/main.js:142:11)\n\n  console.log\n    [dotenv@17.2.3] injecting env (3) from .env -- tip: ðŸ› ï¸  run anywhere with `dotenvx run -- yourcommand`\n\n      at _log (../node_modules/dotenv/lib/main.js:142:11)\n\n  console.log\n    [dotenv@17.2.3] injecting env (3) from .env -- tip: âš™ï¸  enable debug logging with { debug: true }\n\n      at _log (../node_modules/dotenv/lib/main.js:142:11)\n\n  console.log\n    âœ… MongoDB conectado\n\n      at log (src/app.js:34:29)\n\n  console.log\n    âœ… MongoDB conectado\n\n      at log (src/app.js:34:29)\n\n  console.log\n    âœ… MongoDB conectado\n\n      at log (src/app.js:34:29)\n\n  console.log\n    âœ… MongoDB conectado\n\n      at log (src/app.js:34:29)\n\n  console.log\n    âœ… MongoDB conectado\n\n      at log (src/app.js:34:29)\n\nPASS test/pacientes.test.js\n  Pacientes API - Pruebas Unitarias con PatrÃ³n AAA\n    GET /api/pacientes\n      âˆš Debe retornar una lista vacÃ­a inicialmente (80 ms)\n      âˆš Debe retornar todos los pacientes existentes (46 ms)\n    POST /api/pacientes\n      âˆš Debe crear un nuevo paciente con datos vÃ¡lidos (47 ms)\n      âˆš Debe rechazar paciente con datos incompletos (16 ms)\n    PUT /api/pacientes/:id\n      âˆš Debe actualizar un paciente existente (35 ms)\n      âˆš Debe actualizar mÃºltiples campos simultÃ¡neamente (32 ms)\n      âˆš Debe retornar 404 si el paciente no existe (15 ms)\n    DELETE /api/pacientes/:id\n      âˆš Debe eliminar un paciente existente (47 ms)\n      âˆš Debe retornar 404 al eliminar paciente inexistente (15 ms)\n\nPASS test/medicamentos.test.js\n  Medicamentos API - Pruebas Unitarias con PatrÃ³n AAA\n    GET /api/medicamentos\n      âˆš Debe retornar un array vacÃ­o inicialmente (77 ms)\n      âˆš Debe retornar todos los medicamentos registrados (39 ms)\n    POST /api/medicamentos\n      âˆš Debe crear un nuevo medicamento con datos vÃ¡lidos (46 ms)\n      âˆš Debe rechazar medicamento con datos incompletos (13 ms)\n    PUT /api/medicamentos/:id\n      âˆš Debe actualizar el precio de un medicamento existente (39 ms)\n      âˆš Debe actualizar mÃºltiples campos simultÃ¡neamente (32 ms)\n      âˆš Debe retornar 404 al actualizar medicamento inexistente (18 ms)\n    DELETE /api/medicamentos/:id\n      âˆš Debe eliminar un medicamento existente (43 ms)\n      âˆš Debe retornar 404 al eliminar medicamento inexistente (14 ms)\n\nFAIL test/doctores.test.js\n  Doctores API - Pruebas Unitarias con PatrÃ³n AAA\n    GET /api/doctores\n      âˆš Debe retornar un array vacÃ­o inicialmente (92 ms)\n      âˆš Debe retornar todos los doctores registrados (49 ms)\n    POST /api/doctores\n      âˆš Debe crear un nuevo doctor con datos vÃ¡lidos (48 ms)\n      âˆš Debe rechazar doctor con campos faltantes (14 ms)\n      âˆš Debe rechazar doctor con nÃºmero de licencia duplicado (34 ms)\n      âˆš Debe rechazar doctor sin nombre (17 ms)\n      âˆš Debe rechazar doctor sin specialty (14 ms)\n      âˆš Debe rechazar doctor sin licenseNumber (19 ms)\n    DELETE /api/doctores/:id\n      âˆš Debe eliminar un doctor existente (33 ms)\n      âˆš Debe retornar 404 al eliminar doctor inexistente (13 ms)\n    GET /api/doctores/:id\n      Ã— Debe obtener un doctor por ID (24 ms)\n      Ã— Debe retornar 404 al buscar doctor inexistente (14 ms)\n\n  â— Doctores API - Pruebas Unitarias con PatrÃ³n AAA â€º GET /api/doctores/:id â€º Debe obtener un doctor por ID\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 404\n\n    \u001b[0m \u001b[90m 209 |\u001b[39m             \u001b[36mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\u001b[33m.\u001b[39m\u001b[36mget\u001b[39m(\u001b[32m`/api/doctores/${id}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 210 |\u001b[39m             \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 211 |\u001b[39m             expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 212 |\u001b[39m             expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mname)\u001b[33m.\u001b[39mtoBe(\u001b[32m'David'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 213 |\u001b[39m             expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39m_id)\u001b[33m.\u001b[39mtoBe(id)\u001b[33m;\u001b[39m\n     \u001b[90m 214 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBe (test/doctores.test.js:211:37)\n\n  â— Doctores API - Pruebas Unitarias con PatrÃ³n AAA â€º GET /api/doctores/:id â€º Debe retornar 404 al buscar doctor inexistente\n\n    expect(received).toHaveProperty(path, value)\n\n    Expected path: \"message\"\n\n    Expected value: \"Doctor not found\"\n    Received value: \"Route not found\"\n\n    \u001b[0m \u001b[90m 218 |\u001b[39m             \u001b[36mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\u001b[33m.\u001b[39m\u001b[36mget\u001b[39m(\u001b[32m`/api/doctores/${fakeId}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 219 |\u001b[39m             expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m404\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 220 |\u001b[39m             expect(response\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'message'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'Doctor not found'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 221 |\u001b[39m         })\u001b[33m;\u001b[39m\n     \u001b[90m 222 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 223 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toHaveProperty (test/doctores.test.js:220:35)\n\nPASS test/especialidades.test.js\n  Especialidades API - Pruebas Unitarias con PatrÃ³n AAA\n    GET /api/especialidades\n      âˆš Debe retornar un array vacÃ­o inicialmente (118 ms)\n      âˆš Debe retornar todas las especialidades registradas (54 ms)\n    POST /api/especialidades\n      âˆš Debe crear una nueva especialidad con datos vÃ¡lidos (56 ms)\n      âˆš Debe rechazar especialidad sin nombre (14 ms)\n      âˆš Debe rechazar especialidad duplicada (case-insensitive) (37 ms)\n    PUT /api/especialidades/:id\n      âˆš Debe actualizar el nombre de una especialidad existente (39 ms)\n      âˆš Debe retornar 404 al actualizar especialidad inexistente (13 ms)\n    DELETE /api/especialidades/:id\n      âˆš Debe eliminar una especialidad existente (41 ms)\n      âˆš Debe retornar 404 al eliminar especialidad inexistente (12 ms)\n\nPASS test/app.test.js (14.373 s)\n  Backend App API - Main Endpoints\n    âˆš OPTIONS request - should allow CORS with method OPTIONS (56 ms)\n    âˆš GET request - should include CORS headers (33 ms)\n    âˆš GET /nonexistent - should return 404 (21 ms)\n    âˆš GET /api/health - should return server status (19 ms)\n    âˆš GET /api/test-logs - should return test logs (25 ms)\n    âˆš POST /api/run-tests - should execute tests (10989 ms)\n\nTest Suites: 1 failed, 4 passed, 5 total\nTests:       2 failed, 43 passed, 45 total\nSnapshots:   0 total\nTime:        14.847 s, estimated 34 s\nRan all test suites.\n"
  },
  {
    "timestamp": "2026-02-12T02:31:01.972Z",
    "date": "11/2/2026, 21:31:01",
    "passed": 3,
    "failed": 2,
    "total": 5,
    "failedTests": [],
    "output": "\n> pruebas-unitarias-backend@1.0.0 test\n> jest --verbose\n\n  console.log\n    [dotenv@17.2.3] injecting env (3) from .env -- tip: âš™ï¸  enable debug logging with { debug: true }\n\n      at _log (../node_modules/dotenv/lib/main.js:142:11)\n\n  console.log\n    [dotenv@17.2.3] injecting env (3) from .env -- tip: âš™ï¸  override existing env vars with { override: true }\n\n      at _log (../node_modules/dotenv/lib/main.js:142:11)\n\n  console.log\n    [dotenv@17.2.3] injecting env (3) from .env -- tip: ðŸ” prevent committing .env to code: https://dotenvx.com/precommit\n\n      at _log (../node_modules/dotenv/lib/main.js:142:11)\n\n  console.log\n    [dotenv@17.2.3] injecting env (3) from .env -- tip: ðŸ”„ add secrets lifecycle management: https://dotenvx.com/ops\n\n      at _log (../node_modules/dotenv/lib/main.js:142:11)\n\n  console.log\n    [dotenv@17.2.3] injecting env (3) from .env -- tip: ðŸ” encrypt with Dotenvx: https://dotenvx.com\n\n      at _log (../node_modules/dotenv/lib/main.js:142:11)\n\n  console.log\n    âœ… MongoDB conectado\n\n      at log (src/app.js:34:29)\n\n  console.log\n    âœ… MongoDB conectado\n\n      at log (src/app.js:34:29)\n\n  console.log\n    âœ… MongoDB conectado\n\n      at log (src/app.js:34:29)\n\n  console.log\n    âœ… MongoDB conectado\n\n      at log (src/app.js:34:29)\n\n  console.log\n    âœ… MongoDB conectado\n\n      at log (src/app.js:34:29)\n\nFAIL test/especialidades.test.js\n  Especialidades API - Pruebas Unitarias con PatrÃ³n AAA\n    GET /api/especialidades\n      âˆš Debe retornar un array vacÃ­o inicialmente (75 ms)\n      Ã— Debe retornar todas las especialidades registradas (43 ms)\n    POST /api/especialidades\n      âˆš Debe crear una nueva especialidad con datos vÃ¡lidos (52 ms)\n      âˆš Debe rechazar especialidad sin nombre (14 ms)\n      âˆš Debe rechazar especialidad duplicada (case-insensitive) (35 ms)\n    PUT /api/especialidades/:id\n      âˆš Debe actualizar el nombre de una especialidad existente (39 ms)\n      âˆš Debe retornar 404 al actualizar especialidad inexistente (15 ms)\n    DELETE /api/especialidades/:id\n      âˆš Debe eliminar una especialidad existente (42 ms)\n      âˆš Debe retornar 404 al eliminar especialidad inexistente (12 ms)\n\n  â— Especialidades API - Pruebas Unitarias con PatrÃ³n AAA â€º GET /api/especialidades â€º Debe retornar todas las especialidades registradas\n\n    expect(received).toHaveLength(expected)\n\n    Expected length: 3\n    Received length: 0\n    Received array:  []\n\n    \u001b[0m \u001b[90m 42 |\u001b[39m             \u001b[90m// ASSERT: Verificar que retorna 3 especialidades (sin importar orden)\u001b[39m\n     \u001b[90m 43 |\u001b[39m             expect(res\u001b[33m.\u001b[39mstatusCode)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 44 |\u001b[39m             expect(res\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoHaveLength(\u001b[35m3\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 45 |\u001b[39m             \u001b[36mconst\u001b[39m names \u001b[33m=\u001b[39m res\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mmap(e \u001b[33m=>\u001b[39m e\u001b[33m.\u001b[39mname)\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m             expect(names)\u001b[33m.\u001b[39mtoContain(\u001b[32m'CardiologÃ­a'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 47 |\u001b[39m             expect(names)\u001b[33m.\u001b[39mtoContain(\u001b[32m'PediatrÃ­a'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toHaveLength (test/especialidades.test.js:44:30)\n\nFAIL test/doctores.test.js\n  Doctores API - Pruebas Unitarias con PatrÃ³n AAA\n    GET /api/doctores\n      âˆš Debe retornar un array vacÃ­o inicialmente (74 ms)\n      âˆš Debe retornar todos los doctores registrados (44 ms)\n    POST /api/doctores\n      âˆš Debe crear un nuevo doctor con datos vÃ¡lidos (57 ms)\n      âˆš Debe rechazar doctor con campos faltantes (15 ms)\n      âˆš Debe rechazar doctor con nÃºmero de licencia duplicado (38 ms)\n      âˆš Debe rechazar doctor sin nombre (11 ms)\n      âˆš Debe rechazar doctor sin specialty (14 ms)\n      âˆš Debe rechazar doctor sin licenseNumber (12 ms)\n    DELETE /api/doctores/:id\n      âˆš Debe eliminar un doctor existente (33 ms)\n      âˆš Debe retornar 404 al eliminar doctor inexistente (14 ms)\n    GET /api/doctores/:id\n      Ã— Debe obtener un doctor por ID (25 ms)\n      Ã— Debe retornar 404 al buscar doctor inexistente (16 ms)\n\n  â— Doctores API - Pruebas Unitarias con PatrÃ³n AAA â€º GET /api/doctores/:id â€º Debe obtener un doctor por ID\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 404\n\n    \u001b[0m \u001b[90m 209 |\u001b[39m             \u001b[36mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\u001b[33m.\u001b[39m\u001b[36mget\u001b[39m(\u001b[32m`/api/doctores/${id}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 210 |\u001b[39m             \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 211 |\u001b[39m             expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 212 |\u001b[39m             expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mname)\u001b[33m.\u001b[39mtoBe(\u001b[32m'David'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 213 |\u001b[39m             expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39m_id)\u001b[33m.\u001b[39mtoBe(id)\u001b[33m;\u001b[39m\n     \u001b[90m 214 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBe (test/doctores.test.js:211:37)\n\n  â— Doctores API - Pruebas Unitarias con PatrÃ³n AAA â€º GET /api/doctores/:id â€º Debe retornar 404 al buscar doctor inexistente\n\n    expect(received).toHaveProperty(path, value)\n\n    Expected path: \"message\"\n\n    Expected value: \"Doctor not found\"\n    Received value: \"Route not found\"\n\n    \u001b[0m \u001b[90m 218 |\u001b[39m             \u001b[36mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\u001b[33m.\u001b[39m\u001b[36mget\u001b[39m(\u001b[32m`/api/doctores/${fakeId}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 219 |\u001b[39m             expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m404\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 220 |\u001b[39m             expect(response\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'message'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'Doctor not found'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 221 |\u001b[39m         })\u001b[33m;\u001b[39m\n     \u001b[90m 222 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 223 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toHaveProperty (test/doctores.test.js:220:35)\n\nPASS test/pacientes.test.js\n  Pacientes API - Pruebas Unitarias con PatrÃ³n AAA\n    GET /api/pacientes\n      âˆš Debe retornar una lista vacÃ­a inicialmente (76 ms)\n      âˆš Debe retornar todos los pacientes existentes (48 ms)\n    POST /api/pacientes\n      âˆš Debe crear un nuevo paciente con datos vÃ¡lidos (70 ms)\n      âˆš Debe rechazar paciente con datos incompletos (27 ms)\n    PUT /api/pacientes/:id\n      âˆš Debe actualizar un paciente existente (44 ms)\n      âˆš Debe actualizar mÃºltiples campos simultÃ¡neamente (30 ms)\n      âˆš Debe retornar 404 si el paciente no existe (13 ms)\n    DELETE /api/pacientes/:id\n      âˆš Debe eliminar un paciente existente (36 ms)\n      âˆš Debe retornar 404 al eliminar paciente inexistente (13 ms)\n\nPASS test/medicamentos.test.js\n  Medicamentos API - Pruebas Unitarias con PatrÃ³n AAA\n    GET /api/medicamentos\n      âˆš Debe retornar un array vacÃ­o inicialmente (100 ms)\n      âˆš Debe retornar todos los medicamentos registrados (51 ms)\n    POST /api/medicamentos\n      âˆš Debe crear un nuevo medicamento con datos vÃ¡lidos (72 ms)\n      âˆš Debe rechazar medicamento con datos incompletos (31 ms)\n    PUT /api/medicamentos/:id\n      âˆš Debe actualizar el precio de un medicamento existente (39 ms)\n      âˆš Debe actualizar mÃºltiples campos simultÃ¡neamente (31 ms)\n      âˆš Debe retornar 404 al actualizar medicamento inexistente (15 ms)\n    DELETE /api/medicamentos/:id\n      âˆš Debe eliminar un medicamento existente (38 ms)\n      âˆš Debe retornar 404 al eliminar medicamento inexistente (12 ms)\n\nPASS test/app.test.js (8.904 s)\n  Backend App API - Main Endpoints\n    âˆš OPTIONS request - should allow CORS with method OPTIONS (57 ms)\n    âˆš GET request - should include CORS headers (29 ms)\n    âˆš GET /nonexistent - should return 404 (20 ms)\n    âˆš GET /api/health - should return server status (18 ms)\n    âˆš GET /api/test-logs - should return test logs (24 ms)\n    âˆš POST /api/run-tests - should execute tests (5732 ms)\n\nTest Suites: 2 failed, 3 passed, 5 total\nTests:       3 failed, 42 passed, 45 total\nSnapshots:   0 total\nTime:        9.357 s, estimated 34 s\nRan all test suites.\n"
  },
  {
    "timestamp": "2026-02-12T02:31:01.790Z",
    "date": "11/2/2026, 21:31:01",
    "passed": 3,
    "failed": 2,
    "total": 5,
    "failedTests": [],
    "output": "\n> pruebas-unitarias-backend@1.0.0 test\n> jest --verbose\n\n  console.log\n    [dotenv@17.2.3] injecting env (3) from .env -- tip: ðŸ”„ add secrets lifecycle management: https://dotenvx.com/ops\n\n      at _log (../node_modules/dotenv/lib/main.js:142:11)\n\n  console.log\n    [dotenv@17.2.3] injecting env (3) from .env -- tip: âš™ï¸  write to custom object with { processEnv: myObject }\n\n      at _log (../node_modules/dotenv/lib/main.js:142:11)\n\n  console.log\n    [dotenv@17.2.3] injecting env (3) from .env -- tip: ðŸ”‘ add access controls to secrets: https://dotenvx.com/ops\n\n      at _log (../node_modules/dotenv/lib/main.js:142:11)\n\n  console.log\n    [dotenv@17.2.3] injecting env (3) from .env -- tip: âš™ï¸  write to custom object with { processEnv: myObject }\n\n      at _log (../node_modules/dotenv/lib/main.js:142:11)\n\n  console.log\n    [dotenv@17.2.3] injecting env (3) from .env -- tip: ðŸ—‚ï¸ backup and recover secrets: https://dotenvx.com/ops\n\n      at _log (../node_modules/dotenv/lib/main.js:142:11)\n\n  console.log\n    âœ… MongoDB conectado\n\n      at log (src/app.js:34:29)\n\n  console.log\n    âœ… MongoDB conectado\n\n      at log (src/app.js:34:29)\n\n  console.log\n    âœ… MongoDB conectado\n\n      at log (src/app.js:34:29)\n\n  console.log\n    âœ… MongoDB conectado\n\n      at log (src/app.js:34:29)\n\n  console.log\n    âœ… MongoDB conectado\n\n      at log (src/app.js:34:29)\n\nPASS test/especialidades.test.js\n  Especialidades API - Pruebas Unitarias con PatrÃ³n AAA\n    GET /api/especialidades\n      âˆš Debe retornar un array vacÃ­o inicialmente (69 ms)\n      âˆš Debe retornar todas las especialidades registradas (47 ms)\n    POST /api/especialidades\n      âˆš Debe crear una nueva especialidad con datos vÃ¡lidos (44 ms)\n      âˆš Debe rechazar especialidad sin nombre (11 ms)\n      âˆš Debe rechazar especialidad duplicada (case-insensitive) (29 ms)\n    PUT /api/especialidades/:id\n      âˆš Debe actualizar el nombre de una especialidad existente (31 ms)\n      âˆš Debe retornar 404 al actualizar especialidad inexistente (16 ms)\n    DELETE /api/especialidades/:id\n      âˆš Debe eliminar una especialidad existente (46 ms)\n      âˆš Debe retornar 404 al eliminar especialidad inexistente (15 ms)\n\nFAIL test/pacientes.test.js\n  Pacientes API - Pruebas Unitarias con PatrÃ³n AAA\n    GET /api/pacientes\n      âˆš Debe retornar una lista vacÃ­a inicialmente (73 ms)\n      âˆš Debe retornar todos los pacientes existentes (41 ms)\n    POST /api/pacientes\n      âˆš Debe crear un nuevo paciente con datos vÃ¡lidos (39 ms)\n      âˆš Debe rechazar paciente con datos incompletos (11 ms)\n    PUT /api/pacientes/:id\n      Ã— Debe actualizar un paciente existente (28 ms)\n      âˆš Debe actualizar mÃºltiples campos simultÃ¡neamente (37 ms)\n      âˆš Debe retornar 404 si el paciente no existe (32 ms)\n    DELETE /api/pacientes/:id\n      âˆš Debe eliminar un paciente existente (39 ms)\n      âˆš Debe retornar 404 al eliminar paciente inexistente (11 ms)\n\n  â— Pacientes API - Pruebas Unitarias con PatrÃ³n AAA â€º PUT /api/pacientes/:id â€º Debe actualizar un paciente existente\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 404\n\n    \u001b[0m \u001b[90m 102 |\u001b[39m\n     \u001b[90m 103 |\u001b[39m             \u001b[90m// ASSERT: Verificar actualizaciÃ³n\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 104 |\u001b[39m             expect(updated\u001b[33m.\u001b[39mstatusCode)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 105 |\u001b[39m             expect(updated\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39millness)\u001b[33m.\u001b[39mtoBe(\u001b[32m'MigraÃ±a'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 106 |\u001b[39m             expect(updated\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mname)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Ana'\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// Otros campos no cambian\u001b[39m\n     \u001b[90m 107 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBe (test/pacientes.test.js:104:40)\n\nFAIL test/doctores.test.js\n  Doctores API - Pruebas Unitarias con PatrÃ³n AAA\n    GET /api/doctores\n      âˆš Debe retornar un array vacÃ­o inicialmente (75 ms)\n      âˆš Debe retornar todos los doctores registrados (40 ms)\n    POST /api/doctores\n      âˆš Debe crear un nuevo doctor con datos vÃ¡lidos (44 ms)\n      âˆš Debe rechazar doctor con campos faltantes (10 ms)\n      âˆš Debe rechazar doctor con nÃºmero de licencia duplicado (29 ms)\n      âˆš Debe rechazar doctor sin nombre (10 ms)\n      âˆš Debe rechazar doctor sin specialty (10 ms)\n      âˆš Debe rechazar doctor sin licenseNumber (16 ms)\n    DELETE /api/doctores/:id\n      âˆš Debe eliminar un doctor existente (39 ms)\n      âˆš Debe retornar 404 al eliminar doctor inexistente (11 ms)\n    GET /api/doctores/:id\n      Ã— Debe obtener un doctor por ID (27 ms)\n      Ã— Debe retornar 404 al buscar doctor inexistente (12 ms)\n\n  â— Doctores API - Pruebas Unitarias con PatrÃ³n AAA â€º GET /api/doctores/:id â€º Debe obtener un doctor por ID\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 404\n\n    \u001b[0m \u001b[90m 209 |\u001b[39m             \u001b[36mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\u001b[33m.\u001b[39m\u001b[36mget\u001b[39m(\u001b[32m`/api/doctores/${id}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 210 |\u001b[39m             \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 211 |\u001b[39m             expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 212 |\u001b[39m             expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mname)\u001b[33m.\u001b[39mtoBe(\u001b[32m'David'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 213 |\u001b[39m             expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39m_id)\u001b[33m.\u001b[39mtoBe(id)\u001b[33m;\u001b[39m\n     \u001b[90m 214 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBe (test/doctores.test.js:211:37)\n\n  â— Doctores API - Pruebas Unitarias con PatrÃ³n AAA â€º GET /api/doctores/:id â€º Debe retornar 404 al buscar doctor inexistente\n\n    expect(received).toHaveProperty(path, value)\n\n    Expected path: \"message\"\n\n    Expected value: \"Doctor not found\"\n    Received value: \"Route not found\"\n\n    \u001b[0m \u001b[90m 218 |\u001b[39m             \u001b[36mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\u001b[33m.\u001b[39m\u001b[36mget\u001b[39m(\u001b[32m`/api/doctores/${fakeId}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 219 |\u001b[39m             expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m404\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 220 |\u001b[39m             expect(response\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'message'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'Doctor not found'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 221 |\u001b[39m         })\u001b[33m;\u001b[39m\n     \u001b[90m 222 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 223 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toHaveProperty (test/doctores.test.js:220:35)\n\nPASS test/medicamentos.test.js\n  Medicamentos API - Pruebas Unitarias con PatrÃ³n AAA\n    GET /api/medicamentos\n      âˆš Debe retornar un array vacÃ­o inicialmente (77 ms)\n      âˆš Debe retornar todos los medicamentos registrados (41 ms)\n    POST /api/medicamentos\n      âˆš Debe crear un nuevo medicamento con datos vÃ¡lidos (40 ms)\n      âˆš Debe rechazar medicamento con datos incompletos (12 ms)\n    PUT /api/medicamentos/:id\n      âˆš Debe actualizar el precio de un medicamento existente (40 ms)\n      âˆš Debe actualizar mÃºltiples campos simultÃ¡neamente (32 ms)\n      âˆš Debe retornar 404 al actualizar medicamento inexistente (15 ms)\n    DELETE /api/medicamentos/:id\n      âˆš Debe eliminar un medicamento existente (34 ms)\n      âˆš Debe retornar 404 al eliminar medicamento inexistente (14 ms)\n\nPASS test/app.test.js\n  Backend App API - Main Endpoints\n    âˆš OPTIONS request - should allow CORS with method OPTIONS (54 ms)\n    âˆš GET request - should include CORS headers (33 ms)\n    âˆš GET /nonexistent - should return 404 (18 ms)\n    âˆš GET /api/health - should return server status (18 ms)\n    âˆš GET /api/test-logs - should return test logs (23 ms)\n    âˆš POST /api/run-tests - should execute tests (587 ms)\n\nTest Suites: 2 failed, 3 passed, 5 total\nTests:       3 failed, 42 passed, 45 total\nSnapshots:   0 total\nTime:        4.347 s, estimated 34 s\nRan all test suites.\n"
  },
  {
    "timestamp": "2026-02-12T02:31:01.609Z",
    "date": "11/2/2026, 21:31:01",
    "passed": 0,
    "failed": 0,
    "total": 0,
    "failedTests": [],
    "output": "\n> pruebas-unitarias-backend@1.0.0 test\n> jest --verbose\n\n\"jest\" no se reconoce como un comando interno o externo,\r\nprograma o archivo por lotes ejecutable.\r\n"
  },
  {
    "timestamp": "2026-02-12T02:30:28.335Z",
    "date": "11/2/2026, 21:30:28",
    "passed": 1,
    "failed": 4,
    "total": 5,
    "failedTests": [],
    "output": "\n> pruebas-unitarias-backend@1.0.0 test\n> jest --verbose\n\n  console.log\n    [dotenv@17.2.3] injecting env (3) from .env -- tip: ðŸ”‘ add access controls to secrets: https://dotenvx.com/ops\n\n      at _log (../node_modules/dotenv/lib/main.js:142:11)\n\n  console.log\n    [dotenv@17.2.3] injecting env (3) from .env -- tip: âš™ï¸  suppress all logs with { quiet: true }\n\n      at _log (../node_modules/dotenv/lib/main.js:142:11)\n\n  console.log\n    [dotenv@17.2.3] injecting env (3) from .env -- tip: âš™ï¸  write to custom object with { processEnv: myObject }\n\n      at _log (../node_modules/dotenv/lib/main.js:142:11)\n\n  console.log\n    [dotenv@17.2.3] injecting env (3) from .env -- tip: ðŸ”„ add secrets lifecycle management: https://dotenvx.com/ops\n\n      at _log (../node_modules/dotenv/lib/main.js:142:11)\n\n  console.log\n    âœ… MongoDB conectado\n\n      at log (src/app.js:34:29)\n\n  console.log\n    âœ… MongoDB conectado\n\n      at log (src/app.js:34:29)\n\n  console.log\n    âœ… MongoDB conectado\n\n      at log (src/app.js:34:29)\n\n  console.log\n    âœ… MongoDB conectado\n\n      at log (src/app.js:34:29)\n\n  console.log\n    [dotenv@17.2.3] injecting env (3) from .env -- tip: âš™ï¸  load multiple .env files with { path: ['.env.local', '.env'] }\n\n      at _log (../node_modules/dotenv/lib/main.js:142:11)\n\n  console.log\n    âœ… MongoDB conectado\n\n      at log (src/app.js:34:29)\n\nPASS test/especialidades.test.js\n  Especialidades API - Pruebas Unitarias con PatrÃ³n AAA\n    GET /api/especialidades\n      âˆš Debe retornar un array vacÃ­o inicialmente (67 ms)\n      âˆš Debe retornar todas las especialidades registradas (41 ms)\n    POST /api/especialidades\n      âˆš Debe crear una nueva especialidad con datos vÃ¡lidos (44 ms)\n      âˆš Debe rechazar especialidad sin nombre (11 ms)\n      âˆš Debe rechazar especialidad duplicada (case-insensitive) (29 ms)\n    PUT /api/especialidades/:id\n      âˆš Debe actualizar el nombre de una especialidad existente (32 ms)\n      âˆš Debe retornar 404 al actualizar especialidad inexistente (13 ms)\n    DELETE /api/especialidades/:id\n      âˆš Debe eliminar una especialidad existente (39 ms)\n      âˆš Debe retornar 404 al eliminar especialidad inexistente (12 ms)\n\nFAIL test/pacientes.test.js\n  Pacientes API - Pruebas Unitarias con PatrÃ³n AAA\n    GET /api/pacientes\n      âˆš Debe retornar una lista vacÃ­a inicialmente (64 ms)\n      âˆš Debe retornar todos los pacientes existentes (38 ms)\n    POST /api/pacientes\n      âˆš Debe crear un nuevo paciente con datos vÃ¡lidos (37 ms)\n      âˆš Debe rechazar paciente con datos incompletos (10 ms)\n    PUT /api/pacientes/:id\n      Ã— Debe actualizar un paciente existente (29 ms)\n      âˆš Debe actualizar mÃºltiples campos simultÃ¡neamente (30 ms)\n      âˆš Debe retornar 404 si el paciente no existe (14 ms)\n    DELETE /api/pacientes/:id\n      âˆš Debe eliminar un paciente existente (35 ms)\n      âˆš Debe retornar 404 al eliminar paciente inexistente (11 ms)\n\n  â— Pacientes API - Pruebas Unitarias con PatrÃ³n AAA â€º PUT /api/pacientes/:id â€º Debe actualizar un paciente existente\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 404\n\n    \u001b[0m \u001b[90m 102 |\u001b[39m\n     \u001b[90m 103 |\u001b[39m             \u001b[90m// ASSERT: Verificar actualizaciÃ³n\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 104 |\u001b[39m             expect(updated\u001b[33m.\u001b[39mstatusCode)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 105 |\u001b[39m             expect(updated\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39millness)\u001b[33m.\u001b[39mtoBe(\u001b[32m'MigraÃ±a'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 106 |\u001b[39m             expect(updated\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mname)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Ana'\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// Otros campos no cambian\u001b[39m\n     \u001b[90m 107 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBe (test/pacientes.test.js:104:40)\n\nFAIL test/medicamentos.test.js\n  Medicamentos API - Pruebas Unitarias con PatrÃ³n AAA\n    GET /api/medicamentos\n      âˆš Debe retornar un array vacÃ­o inicialmente (62 ms)\n      Ã— Debe retornar todos los medicamentos registrados (37 ms)\n    POST /api/medicamentos\n      âˆš Debe crear un nuevo medicamento con datos vÃ¡lidos (36 ms)\n      âˆš Debe rechazar medicamento con datos incompletos (11 ms)\n    PUT /api/medicamentos/:id\n      âˆš Debe actualizar el precio de un medicamento existente (34 ms)\n      âˆš Debe actualizar mÃºltiples campos simultÃ¡neamente (27 ms)\n      âˆš Debe retornar 404 al actualizar medicamento inexistente (13 ms)\n    DELETE /api/medicamentos/:id\n      âˆš Debe eliminar un medicamento existente (38 ms)\n      âˆš Debe retornar 404 al eliminar medicamento inexistente (9 ms)\n\n  â— Medicamentos API - Pruebas Unitarias con PatrÃ³n AAA â€º GET /api/medicamentos â€º Debe retornar todos los medicamentos registrados\n\n    expect(received).toHaveLength(expected)\n\n    Expected length: 2\n    Received length: 0\n    Received array:  []\n\n    \u001b[0m \u001b[90m 55 |\u001b[39m             \u001b[90m// ASSERT: Verificar que retorna 2 medicamentos (sin importar orden)\u001b[39m\n     \u001b[90m 56 |\u001b[39m             expect(res\u001b[33m.\u001b[39mstatusCode)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 57 |\u001b[39m             expect(res\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoHaveLength(\u001b[35m2\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 58 |\u001b[39m             \u001b[36mconst\u001b[39m names \u001b[33m=\u001b[39m res\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mmap(m \u001b[33m=>\u001b[39m m\u001b[33m.\u001b[39mname)\u001b[33m;\u001b[39m\n     \u001b[90m 59 |\u001b[39m             expect(names)\u001b[33m.\u001b[39mtoContain(\u001b[32m'Paracetamol'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 60 |\u001b[39m             expect(names)\u001b[33m.\u001b[39mtoContain(\u001b[32m'Ibuprofeno'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toHaveLength (test/medicamentos.test.js:57:30)\n\nFAIL test/doctores.test.js\n  Doctores API - Pruebas Unitarias con PatrÃ³n AAA\n    GET /api/doctores\n      âˆš Debe retornar un array vacÃ­o inicialmente (47 ms)\n      âˆš Debe retornar todos los doctores registrados (25 ms)\n    POST /api/doctores\n      âˆš Debe crear un nuevo doctor con datos vÃ¡lidos (31 ms)\n      âˆš Debe rechazar doctor con campos faltantes (8 ms)\n      âˆš Debe rechazar doctor con nÃºmero de licencia duplicado (21 ms)\n      âˆš Debe rechazar doctor sin nombre (7 ms)\n      âˆš Debe rechazar doctor sin specialty (6 ms)\n      âˆš Debe rechazar doctor sin licenseNumber (9 ms)\n    DELETE /api/doctores/:id\n      âˆš Debe eliminar un doctor existente (20 ms)\n      âˆš Debe retornar 404 al eliminar doctor inexistente (8 ms)\n    GET /api/doctores/:id\n      Ã— Debe obtener un doctor por ID (15 ms)\n      Ã— Debe retornar 404 al buscar doctor inexistente (10 ms)\n\n  â— Doctores API - Pruebas Unitarias con PatrÃ³n AAA â€º GET /api/doctores/:id â€º Debe obtener un doctor por ID\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 404\n\n    \u001b[0m \u001b[90m 209 |\u001b[39m             \u001b[36mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\u001b[33m.\u001b[39m\u001b[36mget\u001b[39m(\u001b[32m`/api/doctores/${id}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 210 |\u001b[39m             \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 211 |\u001b[39m             expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 212 |\u001b[39m             expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mname)\u001b[33m.\u001b[39mtoBe(\u001b[32m'David'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 213 |\u001b[39m             expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39m_id)\u001b[33m.\u001b[39mtoBe(id)\u001b[33m;\u001b[39m\n     \u001b[90m 214 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBe (test/doctores.test.js:211:37)\n\n  â— Doctores API - Pruebas Unitarias con PatrÃ³n AAA â€º GET /api/doctores/:id â€º Debe retornar 404 al buscar doctor inexistente\n\n    expect(received).toHaveProperty(path, value)\n\n    Expected path: \"message\"\n\n    Expected value: \"Doctor not found\"\n    Received value: \"Route not found\"\n\n    \u001b[0m \u001b[90m 218 |\u001b[39m             \u001b[36mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\u001b[33m.\u001b[39m\u001b[36mget\u001b[39m(\u001b[32m`/api/doctores/${fakeId}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 219 |\u001b[39m             expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m404\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 220 |\u001b[39m             expect(response\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'message'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'Doctor not found'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 221 |\u001b[39m         })\u001b[33m;\u001b[39m\n     \u001b[90m 222 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 223 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toHaveProperty (test/doctores.test.js:220:35)\n\nFAIL test/app.test.js (33.234 s)\n  Backend App API - Main Endpoints\n    âˆš OPTIONS request - should allow CORS with method OPTIONS (51 ms)\n    âˆš GET request - should include CORS headers (27 ms)\n    âˆš GET /nonexistent - should return 404 (19 ms)\n    âˆš GET /api/health - should return server status (17 ms)\n    âˆš GET /api/test-logs - should return test logs (21 ms)\n    Ã— POST /api/run-tests - should execute tests (30038 ms)\n\n  â— Backend App API - Main Endpoints â€º POST /api/run-tests - should execute tests\n\n    thrown: \"Exceeded timeout of 30000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\n    \u001b[0m \u001b[90m 69 |\u001b[39m\n     \u001b[90m 70 |\u001b[39m     \u001b[90m// Test run-tests endpoint\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 71 |\u001b[39m     test(\u001b[32m'POST /api/run-tests - should execute tests'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m    |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 72 |\u001b[39m         \u001b[36mconst\u001b[39m res \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\n     \u001b[90m 73 |\u001b[39m             \u001b[33m.\u001b[39mpost(\u001b[32m'/api/run-tests'\u001b[39m)\n     \u001b[90m 74 |\u001b[39m             \u001b[33m.\u001b[39msend({ failTests\u001b[33m:\u001b[39m \u001b[36mfalse\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at test (test/app.test.js:71:5)\n      at Object.describe (test/app.test.js:9:1)\n\nA worker process has failed to exit gracefully and has been force exited. This is likely caused by tests leaking due to improper teardown. Try running with --detectOpenHandles to find leaks. Active timers can also cause this, ensure that .unref() was called on them.\nTest Suites: 4 failed, 1 passed, 5 total\nTests:       5 failed, 40 passed, 45 total\nSnapshots:   0 total\nTime:        34.127 s\nRan all test suites.\n"
  },
  {
    "timestamp": "2026-02-12T02:28:03.993Z",
    "date": "11/2/2026, 21:28:03",
    "passed": 2,
    "failed": 3,
    "total": 5,
    "failedTests": [],
    "output": "\n> pruebas-unitarias-backend@1.0.0 test\n> jest --verbose\n\n  console.log\n    [dotenv@17.2.3] injecting env (3) from .env -- tip: ðŸ”„ add secrets lifecycle management: https://dotenvx.com/ops\n\n      at _log (../node_modules/dotenv/lib/main.js:142:11)\n\n  console.log\n    [dotenv@17.2.3] injecting env (3) from .env -- tip: âš™ï¸  load multiple .env files with { path: ['.env.local', '.env'] }\n\n      at _log (../node_modules/dotenv/lib/main.js:142:11)\n\n  console.log\n    [dotenv@17.2.3] injecting env (3) from .env -- tip: ðŸ“¡ add observability to secrets: https://dotenvx.com/ops\n\n      at _log (../node_modules/dotenv/lib/main.js:142:11)\n\n  console.log\n    [dotenv@17.2.3] injecting env (3) from .env -- tip: ðŸ› ï¸  run anywhere with `dotenvx run -- yourcommand`\n\n      at _log (../node_modules/dotenv/lib/main.js:142:11)\n\n  console.log\n    âœ… MongoDB conectado\n\n      at log (src/app.js:34:29)\n\n  console.log\n    âœ… MongoDB conectado\n\n      at log (src/app.js:34:29)\n\n  console.log\n    âœ… MongoDB conectado\n\n      at log (src/app.js:34:29)\n\n  console.log\n    âœ… MongoDB conectado\n\n      at log (src/app.js:34:29)\n\nFAIL test/doctores.test.js\n  â— Test suite failed to run\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     â€¢ If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     â€¢ If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     â€¢ To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     â€¢ If you need a custom transformation specify a \"transform\" option in your config.\n     â€¢ If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    SyntaxError: C:\\Users\\estef\\OneDrive\\Desktop\\git\\27854_P3_Proyecto\\Pruebas-Unitarias-Backend\\test\\doctores.test.js: Missing semicolon. (206:37)\n\n    \u001b[0m \u001b[90m 204 |\u001b[39m \u001b[32m            // ACT: Actualizar telÃ©fono y especialidad\u001b[39m\n     \u001b[90m 205 |\u001b[39m \u001b[32m            const updated = await request(app)\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 206 |\u001b[39m \u001b[32m                .put(`\u001b[39m\u001b[33m/\u001b[39mapi\u001b[33m/\u001b[39mdoctores\u001b[33m/\u001b[39m${id}\u001b[32m`)\u001b[39m\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 207 |\u001b[39m \u001b[32m                .send({ \u001b[39m\n     \u001b[90m 208 |\u001b[39m \u001b[32m                    phone: '0999999999',\u001b[39m\n     \u001b[90m 209 |\u001b[39m \u001b[32m                    specialty: 'NeurologÃ­a PediÃ¡trica',\u001b[39m\u001b[0m\n\n      at constructor (../node_modules/@babel/parser/src/parse-error.ts:95:45)\n      at Parser.toParseError [as raise] (../node_modules/@babel/parser/src/tokenizer/index.ts:1507:19)\n      at Parser.raise [as semicolon] (../node_modules/@babel/parser/src/parser/util.ts:149:10)\n      at Parser.semicolon [as parseExpressionStatement] (../node_modules/@babel/parser/src/parser/statement.ts:1363:10)\n      at Parser.parseExpressionStatement [as parseStatementContent] (../node_modules/@babel/parser/src/parser/statement.ts:702:19)\n      at Parser.parseStatementContent [as parseStatementLike] (../node_modules/@babel/parser/src/parser/statement.ts:482:17)\n      at Parser.parseStatementLike [as parseModuleItem] (../node_modules/@babel/parser/src/parser/statement.ts:419:17)\n      at Parser.parseModuleItem [as parseBlockOrModuleBlockBody] (../node_modules/@babel/parser/src/parser/statement.ts:1443:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (../node_modules/@babel/parser/src/parser/statement.ts:1417:10)\n      at Parser.parseBlockBody [as parseProgram] (../node_modules/@babel/parser/src/parser/statement.ts:229:10)\n      at Parser.parseProgram [as parseTopLevel] (../node_modules/@babel/parser/src/parser/statement.ts:203:25)\n      at Parser.parseTopLevel [as parse] (../node_modules/@babel/parser/src/parser/index.ts:88:25)\n      at parse (../node_modules/@babel/parser/src/index.ts:86:38)\n      at parser (../node_modules/@babel/core/src/parser/index.ts:29:19)\n          at parser.next (<anonymous>)\n      at normalizeFile (../node_modules/@babel/core/src/transformation/normalize-file.ts:50:24)\n          at normalizeFile.next (<anonymous>)\n      at run (../node_modules/@babel/core/src/transformation/index.ts:41:36)\n          at run.next (<anonymous>)\n      at transform (../node_modules/@babel/core/src/transform.ts:29:20)\n          at transform.next (<anonymous>)\n      at evaluateSync (../node_modules/gensync/index.js:251:28)\n      at sync (../node_modules/gensync/index.js:89:14)\n      at fn (../node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)\n      at transformSync (../node_modules/@babel/core/src/transform.ts:66:52)\n      at ScriptTransformer.transformSource (../node_modules/@jest/transform/build/ScriptTransformer.js:545:31)\n      at ScriptTransformer._transformAndBuildScript (../node_modules/@jest/transform/build/ScriptTransformer.js:674:40)\n      at ScriptTransformer.transform (../node_modules/@jest/transform/build/ScriptTransformer.js:726:19)\n\nPASS test/pacientes.test.js\n  Pacientes API - Pruebas Unitarias con PatrÃ³n AAA\n    GET /api/pacientes\n      âˆš Debe retornar una lista vacÃ­a inicialmente (70 ms)\n      âˆš Debe retornar todos los pacientes existentes (37 ms)\n    POST /api/pacientes\n      âˆš Debe crear un nuevo paciente con datos vÃ¡lidos (40 ms)\n      âˆš Debe rechazar paciente con datos incompletos (11 ms)\n    PUT /api/pacientes/:id\n      âˆš Debe actualizar un paciente existente (33 ms)\n      âˆš Debe actualizar mÃºltiples campos simultÃ¡neamente (28 ms)\n      âˆš Debe retornar 404 si el paciente no existe (14 ms)\n    DELETE /api/pacientes/:id\n      âˆš Debe eliminar un paciente existente (35 ms)\n      âˆš Debe retornar 404 al eliminar paciente inexistente (12 ms)\n\nFAIL test/medicamentos.test.js\n  Medicamentos API - Pruebas Unitarias con PatrÃ³n AAA\n    GET /api/medicamentos\n      âˆš Debe retornar un array vacÃ­o inicialmente (71 ms)\n      Ã— Debe retornar todos los medicamentos registrados (37 ms)\n    POST /api/medicamentos\n      âˆš Debe crear un nuevo medicamento con datos vÃ¡lidos (39 ms)\n      âˆš Debe rechazar medicamento con datos incompletos (9 ms)\n    PUT /api/medicamentos/:id\n      âˆš Debe actualizar el precio de un medicamento existente (34 ms)\n      âˆš Debe actualizar mÃºltiples campos simultÃ¡neamente (29 ms)\n      âˆš Debe retornar 404 al actualizar medicamento inexistente (14 ms)\n    DELETE /api/medicamentos/:id\n      âˆš Debe eliminar un medicamento existente (38 ms)\n      âˆš Debe retornar 404 al eliminar medicamento inexistente (12 ms)\n\n  â— Medicamentos API - Pruebas Unitarias con PatrÃ³n AAA â€º GET /api/medicamentos â€º Debe retornar todos los medicamentos registrados\n\n    expect(received).toHaveLength(expected)\n\n    Expected length: 2\n    Received length: 0\n    Received array:  []\n\n    \u001b[0m \u001b[90m 55 |\u001b[39m             \u001b[90m// ASSERT: Verificar que retorna 2 medicamentos (sin importar orden)\u001b[39m\n     \u001b[90m 56 |\u001b[39m             expect(res\u001b[33m.\u001b[39mstatusCode)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 57 |\u001b[39m             expect(res\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoHaveLength(\u001b[35m2\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 58 |\u001b[39m             \u001b[36mconst\u001b[39m names \u001b[33m=\u001b[39m res\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mmap(m \u001b[33m=>\u001b[39m m\u001b[33m.\u001b[39mname)\u001b[33m;\u001b[39m\n     \u001b[90m 59 |\u001b[39m             expect(names)\u001b[33m.\u001b[39mtoContain(\u001b[32m'Paracetamol'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 60 |\u001b[39m             expect(names)\u001b[33m.\u001b[39mtoContain(\u001b[32m'Ibuprofeno'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toHaveLength (test/medicamentos.test.js:57:30)\n\nFAIL test/especialidades.test.js\n  Especialidades API - Pruebas Unitarias con PatrÃ³n AAA\n    GET /api/especialidades\n      âˆš Debe retornar un array vacÃ­o inicialmente (70 ms)\n      Ã— Debe retornar todas las especialidades registradas (41 ms)\n    POST /api/especialidades\n      âˆš Debe crear una nueva especialidad con datos vÃ¡lidos (42 ms)\n      âˆš Debe rechazar especialidad sin nombre (11 ms)\n      âˆš Debe rechazar especialidad duplicada (case-insensitive) (30 ms)\n    PUT /api/especialidades/:id\n      âˆš Debe actualizar el nombre de una especialidad existente (34 ms)\n      âˆš Debe retornar 404 al actualizar especialidad inexistente (14 ms)\n    DELETE /api/especialidades/:id\n      âˆš Debe eliminar una especialidad existente (38 ms)\n      âˆš Debe retornar 404 al eliminar especialidad inexistente (8 ms)\n\n  â— Especialidades API - Pruebas Unitarias con PatrÃ³n AAA â€º GET /api/especialidades â€º Debe retornar todas las especialidades registradas\n\n    expect(received).toHaveLength(expected)\n\n    Expected length: 3\n    Received length: 0\n    Received array:  []\n\n    \u001b[0m \u001b[90m 42 |\u001b[39m             \u001b[90m// ASSERT: Verificar que retorna 3 especialidades (sin importar orden)\u001b[39m\n     \u001b[90m 43 |\u001b[39m             expect(res\u001b[33m.\u001b[39mstatusCode)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 44 |\u001b[39m             expect(res\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoHaveLength(\u001b[35m3\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 45 |\u001b[39m             \u001b[36mconst\u001b[39m names \u001b[33m=\u001b[39m res\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mmap(e \u001b[33m=>\u001b[39m e\u001b[33m.\u001b[39mname)\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m             expect(names)\u001b[33m.\u001b[39mtoContain(\u001b[32m'CardiologÃ­a'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 47 |\u001b[39m             expect(names)\u001b[33m.\u001b[39mtoContain(\u001b[32m'PediatrÃ­a'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toHaveLength (test/especialidades.test.js:44:30)\n\nPASS test/app.test.js (23.808 s)\n  Backend App API - Main Endpoints\n    âˆš OPTIONS request - should allow CORS with method OPTIONS (65 ms)\n    âˆš GET request - should include CORS headers (28 ms)\n    âˆš GET /nonexistent - should return 404 (19 ms)\n    âˆš GET /api/health - should return server status (18 ms)\n    âˆš GET /api/test-logs - should return test logs (21 ms)\n    âˆš POST /api/run-tests - should execute tests (20303 ms)\n\nTest Suites: 3 failed, 2 passed, 5 total\nTests:       2 failed, 31 passed, 33 total\nSnapshots:   0 total\nTime:        24.253 s, estimated 34 s\nRan all test suites.\n"
  },
  {
    "timestamp": "2026-02-12T02:28:03.816Z",
    "date": "11/2/2026, 21:28:03",
    "passed": 2,
    "failed": 3,
    "total": 5,
    "failedTests": [],
    "output": "\n> pruebas-unitarias-backend@1.0.0 test\n> jest --verbose\n\n  console.log\n    [dotenv@17.2.3] injecting env (3) from .env -- tip: ðŸ” prevent committing .env to code: https://dotenvx.com/precommit\n\n      at _log (../node_modules/dotenv/lib/main.js:142:11)\n\n  console.log\n    [dotenv@17.2.3] injecting env (3) from .env -- tip: ðŸ” prevent building .env in docker: https://dotenvx.com/prebuild\n\n      at _log (../node_modules/dotenv/lib/main.js:142:11)\n\n  console.log\n    [dotenv@17.2.3] injecting env (3) from .env -- tip: ðŸ› ï¸  run anywhere with `dotenvx run -- yourcommand`\n\n      at _log (../node_modules/dotenv/lib/main.js:142:11)\n\n  console.log\n    [dotenv@17.2.3] injecting env (3) from .env -- tip: âš™ï¸  specify custom .env file path with { path: '/custom/path/.env' }\n\n      at _log (../node_modules/dotenv/lib/main.js:142:11)\n\n  console.log\n    âœ… MongoDB conectado\n\n      at log (src/app.js:34:29)\n\n  console.log\n    âœ… MongoDB conectado\n\n      at log (src/app.js:34:29)\n\n  console.log\n    âœ… MongoDB conectado\n\n      at log (src/app.js:34:29)\n\n  console.log\n    âœ… MongoDB conectado\n\n      at log (src/app.js:34:29)\n\nFAIL test/doctores.test.js\n  â— Test suite failed to run\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     â€¢ If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     â€¢ If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     â€¢ To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     â€¢ If you need a custom transformation specify a \"transform\" option in your config.\n     â€¢ If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    SyntaxError: C:\\Users\\estef\\OneDrive\\Desktop\\git\\27854_P3_Proyecto\\Pruebas-Unitarias-Backend\\test\\doctores.test.js: Missing semicolon. (206:37)\n\n    \u001b[0m \u001b[90m 204 |\u001b[39m \u001b[32m            // ACT: Actualizar telÃ©fono y especialidad\u001b[39m\n     \u001b[90m 205 |\u001b[39m \u001b[32m            const updated = await request(app)\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 206 |\u001b[39m \u001b[32m                .put(`\u001b[39m\u001b[33m/\u001b[39mapi\u001b[33m/\u001b[39mdoctores\u001b[33m/\u001b[39m${id}\u001b[32m`)\u001b[39m\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 207 |\u001b[39m \u001b[32m                .send({ \u001b[39m\n     \u001b[90m 208 |\u001b[39m \u001b[32m                    phone: '0999999999',\u001b[39m\n     \u001b[90m 209 |\u001b[39m \u001b[32m                    specialty: 'NeurologÃ­a PediÃ¡trica',\u001b[39m\u001b[0m\n\n      at constructor (../node_modules/@babel/parser/src/parse-error.ts:95:45)\n      at Parser.toParseError [as raise] (../node_modules/@babel/parser/src/tokenizer/index.ts:1507:19)\n      at Parser.raise [as semicolon] (../node_modules/@babel/parser/src/parser/util.ts:149:10)\n      at Parser.semicolon [as parseExpressionStatement] (../node_modules/@babel/parser/src/parser/statement.ts:1363:10)\n      at Parser.parseExpressionStatement [as parseStatementContent] (../node_modules/@babel/parser/src/parser/statement.ts:702:19)\n      at Parser.parseStatementContent [as parseStatementLike] (../node_modules/@babel/parser/src/parser/statement.ts:482:17)\n      at Parser.parseStatementLike [as parseModuleItem] (../node_modules/@babel/parser/src/parser/statement.ts:419:17)\n      at Parser.parseModuleItem [as parseBlockOrModuleBlockBody] (../node_modules/@babel/parser/src/parser/statement.ts:1443:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (../node_modules/@babel/parser/src/parser/statement.ts:1417:10)\n      at Parser.parseBlockBody [as parseProgram] (../node_modules/@babel/parser/src/parser/statement.ts:229:10)\n      at Parser.parseProgram [as parseTopLevel] (../node_modules/@babel/parser/src/parser/statement.ts:203:25)\n      at Parser.parseTopLevel [as parse] (../node_modules/@babel/parser/src/parser/index.ts:88:25)\n      at parse (../node_modules/@babel/parser/src/index.ts:86:38)\n      at parser (../node_modules/@babel/core/src/parser/index.ts:29:19)\n          at parser.next (<anonymous>)\n      at normalizeFile (../node_modules/@babel/core/src/transformation/normalize-file.ts:50:24)\n          at normalizeFile.next (<anonymous>)\n      at run (../node_modules/@babel/core/src/transformation/index.ts:41:36)\n          at run.next (<anonymous>)\n      at transform (../node_modules/@babel/core/src/transform.ts:29:20)\n          at transform.next (<anonymous>)\n      at evaluateSync (../node_modules/gensync/index.js:251:28)\n      at sync (../node_modules/gensync/index.js:89:14)\n      at fn (../node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)\n      at transformSync (../node_modules/@babel/core/src/transform.ts:66:52)\n      at ScriptTransformer.transformSource (../node_modules/@jest/transform/build/ScriptTransformer.js:545:31)\n      at ScriptTransformer._transformAndBuildScript (../node_modules/@jest/transform/build/ScriptTransformer.js:674:40)\n      at ScriptTransformer.transform (../node_modules/@jest/transform/build/ScriptTransformer.js:726:19)\n\nFAIL test/pacientes.test.js\n  Pacientes API - Pruebas Unitarias con PatrÃ³n AAA\n    GET /api/pacientes\n      âˆš Debe retornar una lista vacÃ­a inicialmente (72 ms)\n      âˆš Debe retornar todos los pacientes existentes (40 ms)\n    POST /api/pacientes\n      âˆš Debe crear un nuevo paciente con datos vÃ¡lidos (41 ms)\n      âˆš Debe rechazar paciente con datos incompletos (13 ms)\n    PUT /api/pacientes/:id\n      Ã— Debe actualizar un paciente existente (44 ms)\n      âˆš Debe actualizar mÃºltiples campos simultÃ¡neamente (32 ms)\n      âˆš Debe retornar 404 si el paciente no existe (16 ms)\n    DELETE /api/pacientes/:id\n      âˆš Debe eliminar un paciente existente (42 ms)\n      âˆš Debe retornar 404 al eliminar paciente inexistente (25 ms)\n\n  â— Pacientes API - Pruebas Unitarias con PatrÃ³n AAA â€º PUT /api/pacientes/:id â€º Debe actualizar un paciente existente\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 500\n\n    \u001b[0m \u001b[90m 102 |\u001b[39m\n     \u001b[90m 103 |\u001b[39m             \u001b[90m// ASSERT: Verificar actualizaciÃ³n\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 104 |\u001b[39m             expect(updated\u001b[33m.\u001b[39mstatusCode)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 105 |\u001b[39m             expect(updated\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39millness)\u001b[33m.\u001b[39mtoBe(\u001b[32m'MigraÃ±a'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 106 |\u001b[39m             expect(updated\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mname)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Ana'\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// Otros campos no cambian\u001b[39m\n     \u001b[90m 107 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBe (test/pacientes.test.js:104:40)\n\nFAIL test/especialidades.test.js\n  Especialidades API - Pruebas Unitarias con PatrÃ³n AAA\n    GET /api/especialidades\n      âˆš Debe retornar un array vacÃ­o inicialmente (78 ms)\n      Ã— Debe retornar todas las especialidades registradas (39 ms)\n    POST /api/especialidades\n      âˆš Debe crear una nueva especialidad con datos vÃ¡lidos (66 ms)\n      âˆš Debe rechazar especialidad sin nombre (14 ms)\n      âˆš Debe rechazar especialidad duplicada (case-insensitive) (39 ms)\n    PUT /api/especialidades/:id\n      âˆš Debe actualizar el nombre de una especialidad existente (41 ms)\n      âˆš Debe retornar 404 al actualizar especialidad inexistente (16 ms)\n    DELETE /api/especialidades/:id\n      âˆš Debe eliminar una especialidad existente (46 ms)\n      âˆš Debe retornar 404 al eliminar especialidad inexistente (13 ms)\n\n  â— Especialidades API - Pruebas Unitarias con PatrÃ³n AAA â€º GET /api/especialidades â€º Debe retornar todas las especialidades registradas\n\n    expect(received).toHaveLength(expected)\n\n    Expected length: 3\n    Received length: 0\n    Received array:  []\n\n    \u001b[0m \u001b[90m 42 |\u001b[39m             \u001b[90m// ASSERT: Verificar que retorna 3 especialidades (sin importar orden)\u001b[39m\n     \u001b[90m 43 |\u001b[39m             expect(res\u001b[33m.\u001b[39mstatusCode)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 44 |\u001b[39m             expect(res\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoHaveLength(\u001b[35m3\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 45 |\u001b[39m             \u001b[36mconst\u001b[39m names \u001b[33m=\u001b[39m res\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mmap(e \u001b[33m=>\u001b[39m e\u001b[33m.\u001b[39mname)\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m             expect(names)\u001b[33m.\u001b[39mtoContain(\u001b[32m'CardiologÃ­a'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 47 |\u001b[39m             expect(names)\u001b[33m.\u001b[39mtoContain(\u001b[32m'PediatrÃ­a'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toHaveLength (test/especialidades.test.js:44:30)\n\nPASS test/medicamentos.test.js\n  Medicamentos API - Pruebas Unitarias con PatrÃ³n AAA\n    GET /api/medicamentos\n      âˆš Debe retornar un array vacÃ­o inicialmente (93 ms)\n      âˆš Debe retornar todos los medicamentos registrados (57 ms)\n    POST /api/medicamentos\n      âˆš Debe crear un nuevo medicamento con datos vÃ¡lidos (46 ms)\n      âˆš Debe rechazar medicamento con datos incompletos (13 ms)\n    PUT /api/medicamentos/:id\n      âˆš Debe actualizar el precio de un medicamento existente (56 ms)\n      âˆš Debe actualizar mÃºltiples campos simultÃ¡neamente (34 ms)\n      âˆš Debe retornar 404 al actualizar medicamento inexistente (19 ms)\n    DELETE /api/medicamentos/:id\n      âˆš Debe eliminar un medicamento existente (40 ms)\n      âˆš Debe retornar 404 al eliminar medicamento inexistente (13 ms)\n\nPASS test/app.test.js (18.368 s)\n  Backend App API - Main Endpoints\n    âˆš OPTIONS request - should allow CORS with method OPTIONS (58 ms)\n    âˆš GET request - should include CORS headers (30 ms)\n    âˆš GET /nonexistent - should return 404 (22 ms)\n    âˆš GET /api/health - should return server status (40 ms)\n    âˆš GET /api/test-logs - should return test logs (24 ms)\n    âˆš POST /api/run-tests - should execute tests (15100 ms)\n\nTest Suites: 3 failed, 2 passed, 5 total\nTests:       2 failed, 31 passed, 33 total\nSnapshots:   0 total\nTime:        18.96 s, estimated 34 s\nRan all test suites.\n"
  },
  {
    "timestamp": "2026-02-12T02:28:03.648Z",
    "date": "11/2/2026, 21:28:03",
    "passed": 4,
    "failed": 1,
    "total": 5,
    "failedTests": [],
    "output": "\n> pruebas-unitarias-backend@1.0.0 test\n> jest --verbose\n\n  console.log\n    [dotenv@17.2.3] injecting env (3) from .env -- tip: âš™ï¸  suppress all logs with { quiet: true }\n\n      at _log (../node_modules/dotenv/lib/main.js:142:11)\n\n  console.log\n    [dotenv@17.2.3] injecting env (3) from .env -- tip: âš™ï¸  load multiple .env files with { path: ['.env.local', '.env'] }\n\n      at _log (../node_modules/dotenv/lib/main.js:142:11)\n\n  console.log\n    [dotenv@17.2.3] injecting env (3) from .env -- tip: âœ… audit secrets and track compliance: https://dotenvx.com/ops\n\n      at _log (../node_modules/dotenv/lib/main.js:142:11)\n\n  console.log\n    [dotenv@17.2.3] injecting env (3) from .env -- tip: ðŸ› ï¸  run anywhere with `dotenvx run -- yourcommand`\n\n      at _log (../node_modules/dotenv/lib/main.js:142:11)\n\n  console.log\n    âœ… MongoDB conectado\n\n      at log (src/app.js:34:29)\n\n  console.log\n    âœ… MongoDB conectado\n\n      at log (src/app.js:34:29)\n\n  console.log\n    âœ… MongoDB conectado\n\n      at log (src/app.js:34:29)\n\n  console.log\n    âœ… MongoDB conectado\n\n      at log (src/app.js:34:29)\n\nFAIL test/doctores.test.js\n  â— Test suite failed to run\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     â€¢ If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     â€¢ If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     â€¢ To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     â€¢ If you need a custom transformation specify a \"transform\" option in your config.\n     â€¢ If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    SyntaxError: C:\\Users\\estef\\OneDrive\\Desktop\\git\\27854_P3_Proyecto\\Pruebas-Unitarias-Backend\\test\\doctores.test.js: Missing semicolon. (206:37)\n\n    \u001b[0m \u001b[90m 204 |\u001b[39m \u001b[32m            // ACT: Actualizar telÃ©fono y especialidad\u001b[39m\n     \u001b[90m 205 |\u001b[39m \u001b[32m            const updated = await request(app)\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 206 |\u001b[39m \u001b[32m                .put(`\u001b[39m\u001b[33m/\u001b[39mapi\u001b[33m/\u001b[39mdoctores\u001b[33m/\u001b[39m${id}\u001b[32m`)\u001b[39m\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 207 |\u001b[39m \u001b[32m                .send({ \u001b[39m\n     \u001b[90m 208 |\u001b[39m \u001b[32m                    phone: '0999999999',\u001b[39m\n     \u001b[90m 209 |\u001b[39m \u001b[32m                    specialty: 'NeurologÃ­a PediÃ¡trica',\u001b[39m\u001b[0m\n\n      at constructor (../node_modules/@babel/parser/src/parse-error.ts:95:45)\n      at Parser.toParseError [as raise] (../node_modules/@babel/parser/src/tokenizer/index.ts:1507:19)\n      at Parser.raise [as semicolon] (../node_modules/@babel/parser/src/parser/util.ts:149:10)\n      at Parser.semicolon [as parseExpressionStatement] (../node_modules/@babel/parser/src/parser/statement.ts:1363:10)\n      at Parser.parseExpressionStatement [as parseStatementContent] (../node_modules/@babel/parser/src/parser/statement.ts:702:19)\n      at Parser.parseStatementContent [as parseStatementLike] (../node_modules/@babel/parser/src/parser/statement.ts:482:17)\n      at Parser.parseStatementLike [as parseModuleItem] (../node_modules/@babel/parser/src/parser/statement.ts:419:17)\n      at Parser.parseModuleItem [as parseBlockOrModuleBlockBody] (../node_modules/@babel/parser/src/parser/statement.ts:1443:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (../node_modules/@babel/parser/src/parser/statement.ts:1417:10)\n      at Parser.parseBlockBody [as parseProgram] (../node_modules/@babel/parser/src/parser/statement.ts:229:10)\n      at Parser.parseProgram [as parseTopLevel] (../node_modules/@babel/parser/src/parser/statement.ts:203:25)\n      at Parser.parseTopLevel [as parse] (../node_modules/@babel/parser/src/parser/index.ts:88:25)\n      at parse (../node_modules/@babel/parser/src/index.ts:86:38)\n      at parser (../node_modules/@babel/core/src/parser/index.ts:29:19)\n          at parser.next (<anonymous>)\n      at normalizeFile (../node_modules/@babel/core/src/transformation/normalize-file.ts:50:24)\n          at normalizeFile.next (<anonymous>)\n      at run (../node_modules/@babel/core/src/transformation/index.ts:41:36)\n          at run.next (<anonymous>)\n      at transform (../node_modules/@babel/core/src/transform.ts:29:20)\n          at transform.next (<anonymous>)\n      at evaluateSync (../node_modules/gensync/index.js:251:28)\n      at sync (../node_modules/gensync/index.js:89:14)\n      at fn (../node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)\n      at transformSync (../node_modules/@babel/core/src/transform.ts:66:52)\n      at ScriptTransformer.transformSource (../node_modules/@jest/transform/build/ScriptTransformer.js:545:31)\n      at ScriptTransformer._transformAndBuildScript (../node_modules/@jest/transform/build/ScriptTransformer.js:674:40)\n      at ScriptTransformer.transform (../node_modules/@jest/transform/build/ScriptTransformer.js:726:19)\n\nPASS test/medicamentos.test.js\n  Medicamentos API - Pruebas Unitarias con PatrÃ³n AAA\n    GET /api/medicamentos\n      âˆš Debe retornar un array vacÃ­o inicialmente (71 ms)\n      âˆš Debe retornar todos los medicamentos registrados (41 ms)\n    POST /api/medicamentos\n      âˆš Debe crear un nuevo medicamento con datos vÃ¡lidos (38 ms)\n      âˆš Debe rechazar medicamento con datos incompletos (12 ms)\n    PUT /api/medicamentos/:id\n      âˆš Debe actualizar el precio de un medicamento existente (36 ms)\n      âˆš Debe actualizar mÃºltiples campos simultÃ¡neamente (29 ms)\n      âˆš Debe retornar 404 al actualizar medicamento inexistente (13 ms)\n    DELETE /api/medicamentos/:id\n      âˆš Debe eliminar un medicamento existente (37 ms)\n      âˆš Debe retornar 404 al eliminar medicamento inexistente (11 ms)\n\nPASS test/especialidades.test.js\n  Especialidades API - Pruebas Unitarias con PatrÃ³n AAA\n    GET /api/especialidades\n      âˆš Debe retornar un array vacÃ­o inicialmente (74 ms)\n      âˆš Debe retornar todas las especialidades registradas (41 ms)\n    POST /api/especialidades\n      âˆš Debe crear una nueva especialidad con datos vÃ¡lidos (43 ms)\n      âˆš Debe rechazar especialidad sin nombre (14 ms)\n      âˆš Debe rechazar especialidad duplicada (case-insensitive) (31 ms)\n    PUT /api/especialidades/:id\n      âˆš Debe actualizar el nombre de una especialidad existente (35 ms)\n      âˆš Debe retornar 404 al actualizar especialidad inexistente (13 ms)\n    DELETE /api/especialidades/:id\n      âˆš Debe eliminar una especialidad existente (38 ms)\n      âˆš Debe retornar 404 al eliminar especialidad inexistente (12 ms)\n\nPASS test/pacientes.test.js\n  Pacientes API - Pruebas Unitarias con PatrÃ³n AAA\n    GET /api/pacientes\n      âˆš Debe retornar una lista vacÃ­a inicialmente (74 ms)\n      âˆš Debe retornar todos los pacientes existentes (44 ms)\n    POST /api/pacientes\n      âˆš Debe crear un nuevo paciente con datos vÃ¡lidos (55 ms)\n      âˆš Debe rechazar paciente con datos incompletos (12 ms)\n    PUT /api/pacientes/:id\n      âˆš Debe actualizar un paciente existente (33 ms)\n      âˆš Debe actualizar mÃºltiples campos simultÃ¡neamente (26 ms)\n      âˆš Debe retornar 404 si el paciente no existe (13 ms)\n    DELETE /api/pacientes/:id\n      âˆš Debe eliminar un paciente existente (38 ms)\n      âˆš Debe retornar 404 al eliminar paciente inexistente (13 ms)\n\nPASS test/app.test.js (13.184 s)\n  Backend App API - Main Endpoints\n    âˆš OPTIONS request - should allow CORS with method OPTIONS (49 ms)\n    âˆš GET request - should include CORS headers (25 ms)\n    âˆš GET /nonexistent - should return 404 (20 ms)\n    âˆš GET /api/health - should return server status (17 ms)\n    âˆš GET /api/test-logs - should return test logs (23 ms)\n    âˆš POST /api/run-tests - should execute tests (9872 ms)\n\nTest Suites: 1 failed, 4 passed, 5 total\nTests:       33 passed, 33 total\nSnapshots:   0 total\nTime:        13.652 s, estimated 34 s\nRan all test suites.\n"
  },
  {
    "timestamp": "2026-02-12T02:28:03.464Z",
    "date": "11/2/2026, 21:28:03",
    "passed": 4,
    "failed": 1,
    "total": 5,
    "failedTests": [],
    "output": "\n> pruebas-unitarias-backend@1.0.0 test\n> jest --verbose\n\n  console.log\n    [dotenv@17.2.3] injecting env (3) from .env -- tip: ðŸ› ï¸  run anywhere with `dotenvx run -- yourcommand`\n\n      at _log (../node_modules/dotenv/lib/main.js:142:11)\n\n  console.log\n    [dotenv@17.2.3] injecting env (3) from .env -- tip: âš™ï¸  override existing env vars with { override: true }\n\n      at _log (../node_modules/dotenv/lib/main.js:142:11)\n\n  console.log\n    [dotenv@17.2.3] injecting env (3) from .env -- tip: ðŸ—‚ï¸ backup and recover secrets: https://dotenvx.com/ops\n\n      at _log (../node_modules/dotenv/lib/main.js:142:11)\n\n  console.log\n    [dotenv@17.2.3] injecting env (3) from .env -- tip: ðŸ”‘ add access controls to secrets: https://dotenvx.com/ops\n\n      at _log (../node_modules/dotenv/lib/main.js:142:11)\n\n  console.log\n    âœ… MongoDB conectado\n\n      at log (src/app.js:34:29)\n\n  console.log\n    âœ… MongoDB conectado\n\n      at log (src/app.js:34:29)\n\n  console.log\n    âœ… MongoDB conectado\n\n      at log (src/app.js:34:29)\n\n  console.log\n    âœ… MongoDB conectado\n\n      at log (src/app.js:34:29)\n\nFAIL test/doctores.test.js\n  â— Test suite failed to run\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     â€¢ If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     â€¢ If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     â€¢ To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     â€¢ If you need a custom transformation specify a \"transform\" option in your config.\n     â€¢ If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    SyntaxError: C:\\Users\\estef\\OneDrive\\Desktop\\git\\27854_P3_Proyecto\\Pruebas-Unitarias-Backend\\test\\doctores.test.js: Missing semicolon. (206:37)\n\n    \u001b[0m \u001b[90m 204 |\u001b[39m \u001b[32m            // ACT: Actualizar telÃ©fono y especialidad\u001b[39m\n     \u001b[90m 205 |\u001b[39m \u001b[32m            const updated = await request(app)\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 206 |\u001b[39m \u001b[32m                .put(`\u001b[39m\u001b[33m/\u001b[39mapi\u001b[33m/\u001b[39mdoctores\u001b[33m/\u001b[39m${id}\u001b[32m`)\u001b[39m\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 207 |\u001b[39m \u001b[32m                .send({ \u001b[39m\n     \u001b[90m 208 |\u001b[39m \u001b[32m                    phone: '0999999999',\u001b[39m\n     \u001b[90m 209 |\u001b[39m \u001b[32m                    specialty: 'NeurologÃ­a PediÃ¡trica',\u001b[39m\u001b[0m\n\n      at constructor (../node_modules/@babel/parser/src/parse-error.ts:95:45)\n      at Parser.toParseError [as raise] (../node_modules/@babel/parser/src/tokenizer/index.ts:1507:19)\n      at Parser.raise [as semicolon] (../node_modules/@babel/parser/src/parser/util.ts:149:10)\n      at Parser.semicolon [as parseExpressionStatement] (../node_modules/@babel/parser/src/parser/statement.ts:1363:10)\n      at Parser.parseExpressionStatement [as parseStatementContent] (../node_modules/@babel/parser/src/parser/statement.ts:702:19)\n      at Parser.parseStatementContent [as parseStatementLike] (../node_modules/@babel/parser/src/parser/statement.ts:482:17)\n      at Parser.parseStatementLike [as parseModuleItem] (../node_modules/@babel/parser/src/parser/statement.ts:419:17)\n      at Parser.parseModuleItem [as parseBlockOrModuleBlockBody] (../node_modules/@babel/parser/src/parser/statement.ts:1443:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (../node_modules/@babel/parser/src/parser/statement.ts:1417:10)\n      at Parser.parseBlockBody [as parseProgram] (../node_modules/@babel/parser/src/parser/statement.ts:229:10)\n      at Parser.parseProgram [as parseTopLevel] (../node_modules/@babel/parser/src/parser/statement.ts:203:25)\n      at Parser.parseTopLevel [as parse] (../node_modules/@babel/parser/src/parser/index.ts:88:25)\n      at parse (../node_modules/@babel/parser/src/index.ts:86:38)\n      at parser (../node_modules/@babel/core/src/parser/index.ts:29:19)\n          at parser.next (<anonymous>)\n      at normalizeFile (../node_modules/@babel/core/src/transformation/normalize-file.ts:50:24)\n          at normalizeFile.next (<anonymous>)\n      at run (../node_modules/@babel/core/src/transformation/index.ts:41:36)\n          at run.next (<anonymous>)\n      at transform (../node_modules/@babel/core/src/transform.ts:29:20)\n          at transform.next (<anonymous>)\n      at evaluateSync (../node_modules/gensync/index.js:251:28)\n      at sync (../node_modules/gensync/index.js:89:14)\n      at fn (../node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)\n      at transformSync (../node_modules/@babel/core/src/transform.ts:66:52)\n      at ScriptTransformer.transformSource (../node_modules/@jest/transform/build/ScriptTransformer.js:545:31)\n      at ScriptTransformer._transformAndBuildScript (../node_modules/@jest/transform/build/ScriptTransformer.js:674:40)\n      at ScriptTransformer.transform (../node_modules/@jest/transform/build/ScriptTransformer.js:726:19)\n\nPASS test/medicamentos.test.js\n  Medicamentos API - Pruebas Unitarias con PatrÃ³n AAA\n    GET /api/medicamentos\n      âˆš Debe retornar un array vacÃ­o inicialmente (66 ms)\n      âˆš Debe retornar todos los medicamentos registrados (32 ms)\n    POST /api/medicamentos\n      âˆš Debe crear un nuevo medicamento con datos vÃ¡lidos (32 ms)\n      âˆš Debe rechazar medicamento con datos incompletos (10 ms)\n    PUT /api/medicamentos/:id\n      âˆš Debe actualizar el precio de un medicamento existente (29 ms)\n      âˆš Debe actualizar mÃºltiples campos simultÃ¡neamente (24 ms)\n      âˆš Debe retornar 404 al actualizar medicamento inexistente (13 ms)\n    DELETE /api/medicamentos/:id\n      âˆš Debe eliminar un medicamento existente (35 ms)\n      âˆš Debe retornar 404 al eliminar medicamento inexistente (10 ms)\n\nPASS test/pacientes.test.js\n  Pacientes API - Pruebas Unitarias con PatrÃ³n AAA\n    GET /api/pacientes\n      âˆš Debe retornar una lista vacÃ­a inicialmente (63 ms)\n      âˆš Debe retornar todos los pacientes existentes (33 ms)\n    POST /api/pacientes\n      âˆš Debe crear un nuevo paciente con datos vÃ¡lidos (36 ms)\n      âˆš Debe rechazar paciente con datos incompletos (10 ms)\n    PUT /api/pacientes/:id\n      âˆš Debe actualizar un paciente existente (32 ms)\n      âˆš Debe actualizar mÃºltiples campos simultÃ¡neamente (28 ms)\n      âˆš Debe retornar 404 si el paciente no existe (13 ms)\n    DELETE /api/pacientes/:id\n      âˆš Debe eliminar un paciente existente (36 ms)\n      âˆš Debe retornar 404 al eliminar paciente inexistente (11 ms)\n\nPASS test/especialidades.test.js\n  Especialidades API - Pruebas Unitarias con PatrÃ³n AAA\n    GET /api/especialidades\n      âˆš Debe retornar un array vacÃ­o inicialmente (61 ms)\n      âˆš Debe retornar todas las especialidades registradas (32 ms)\n    POST /api/especialidades\n      âˆš Debe crear una nueva especialidad con datos vÃ¡lidos (41 ms)\n      âˆš Debe rechazar especialidad sin nombre (12 ms)\n      âˆš Debe rechazar especialidad duplicada (case-insensitive) (26 ms)\n    PUT /api/especialidades/:id\n      âˆš Debe actualizar el nombre de una especialidad existente (35 ms)\n      âˆš Debe retornar 404 al actualizar especialidad inexistente (12 ms)\n    DELETE /api/especialidades/:id\n      âˆš Debe eliminar una especialidad existente (31 ms)\n      âˆš Debe retornar 404 al eliminar especialidad inexistente (9 ms)\n\nPASS test/app.test.js (8.044 s)\n  Backend App API - Main Endpoints\n    âˆš OPTIONS request - should allow CORS with method OPTIONS (52 ms)\n    âˆš GET request - should include CORS headers (24 ms)\n    âˆš GET /nonexistent - should return 404 (16 ms)\n    âˆš GET /api/health - should return server status (13 ms)\n    âˆš GET /api/test-logs - should return test logs (19 ms)\n    âˆš POST /api/run-tests - should execute tests (5128 ms)\n\nTest Suites: 1 failed, 4 passed, 5 total\nTests:       33 passed, 33 total\nSnapshots:   0 total\nTime:        8.458 s, estimated 34 s\nRan all test suites.\n"
  },
  {
    "timestamp": "2026-02-12T02:28:03.291Z",
    "date": "11/2/2026, 21:28:03",
    "passed": 4,
    "failed": 1,
    "total": 5,
    "failedTests": [],
    "output": "\n> pruebas-unitarias-backend@1.0.0 test\n> jest --verbose\n\n  console.log\n    [dotenv@17.2.3] injecting env (3) from .env -- tip: ðŸ”‘ add access controls to secrets: https://dotenvx.com/ops\n\n      at _log (../node_modules/dotenv/lib/main.js:142:11)\n\n  console.log\n    [dotenv@17.2.3] injecting env (3) from .env -- tip: âš™ï¸  suppress all logs with { quiet: true }\n\n      at _log (../node_modules/dotenv/lib/main.js:142:11)\n\n  console.log\n    [dotenv@17.2.3] injecting env (3) from .env -- tip: ðŸ” prevent committing .env to code: https://dotenvx.com/precommit\n\n      at _log (../node_modules/dotenv/lib/main.js:142:11)\n\n  console.log\n    [dotenv@17.2.3] injecting env (3) from .env -- tip: âš™ï¸  specify custom .env file path with { path: '/custom/path/.env' }\n\n      at _log (../node_modules/dotenv/lib/main.js:142:11)\n\n  console.log\n    âœ… MongoDB conectado\n\n      at log (src/app.js:34:29)\n\n  console.log\n    âœ… MongoDB conectado\n\n      at log (src/app.js:34:29)\n\n  console.log\n    âœ… MongoDB conectado\n\n      at log (src/app.js:34:29)\n\n  console.log\n    âœ… MongoDB conectado\n\n      at log (src/app.js:34:29)\n\nFAIL test/doctores.test.js\n  â— Test suite failed to run\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     â€¢ If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     â€¢ If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     â€¢ To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     â€¢ If you need a custom transformation specify a \"transform\" option in your config.\n     â€¢ If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    SyntaxError: C:\\Users\\estef\\OneDrive\\Desktop\\git\\27854_P3_Proyecto\\Pruebas-Unitarias-Backend\\test\\doctores.test.js: Missing semicolon. (206:37)\n\n    \u001b[0m \u001b[90m 204 |\u001b[39m \u001b[32m            // ACT: Actualizar telÃ©fono y especialidad\u001b[39m\n     \u001b[90m 205 |\u001b[39m \u001b[32m            const updated = await request(app)\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 206 |\u001b[39m \u001b[32m                .put(`\u001b[39m\u001b[33m/\u001b[39mapi\u001b[33m/\u001b[39mdoctores\u001b[33m/\u001b[39m${id}\u001b[32m`)\u001b[39m\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 207 |\u001b[39m \u001b[32m                .send({ \u001b[39m\n     \u001b[90m 208 |\u001b[39m \u001b[32m                    phone: '0999999999',\u001b[39m\n     \u001b[90m 209 |\u001b[39m \u001b[32m                    specialty: 'NeurologÃ­a PediÃ¡trica',\u001b[39m\u001b[0m\n\n      at constructor (../node_modules/@babel/parser/src/parse-error.ts:95:45)\n      at Parser.toParseError [as raise] (../node_modules/@babel/parser/src/tokenizer/index.ts:1507:19)\n      at Parser.raise [as semicolon] (../node_modules/@babel/parser/src/parser/util.ts:149:10)\n      at Parser.semicolon [as parseExpressionStatement] (../node_modules/@babel/parser/src/parser/statement.ts:1363:10)\n      at Parser.parseExpressionStatement [as parseStatementContent] (../node_modules/@babel/parser/src/parser/statement.ts:702:19)\n      at Parser.parseStatementContent [as parseStatementLike] (../node_modules/@babel/parser/src/parser/statement.ts:482:17)\n      at Parser.parseStatementLike [as parseModuleItem] (../node_modules/@babel/parser/src/parser/statement.ts:419:17)\n      at Parser.parseModuleItem [as parseBlockOrModuleBlockBody] (../node_modules/@babel/parser/src/parser/statement.ts:1443:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (../node_modules/@babel/parser/src/parser/statement.ts:1417:10)\n      at Parser.parseBlockBody [as parseProgram] (../node_modules/@babel/parser/src/parser/statement.ts:229:10)\n      at Parser.parseProgram [as parseTopLevel] (../node_modules/@babel/parser/src/parser/statement.ts:203:25)\n      at Parser.parseTopLevel [as parse] (../node_modules/@babel/parser/src/parser/index.ts:88:25)\n      at parse (../node_modules/@babel/parser/src/index.ts:86:38)\n      at parser (../node_modules/@babel/core/src/parser/index.ts:29:19)\n          at parser.next (<anonymous>)\n      at normalizeFile (../node_modules/@babel/core/src/transformation/normalize-file.ts:50:24)\n          at normalizeFile.next (<anonymous>)\n      at run (../node_modules/@babel/core/src/transformation/index.ts:41:36)\n          at run.next (<anonymous>)\n      at transform (../node_modules/@babel/core/src/transform.ts:29:20)\n          at transform.next (<anonymous>)\n      at evaluateSync (../node_modules/gensync/index.js:251:28)\n      at sync (../node_modules/gensync/index.js:89:14)\n      at fn (../node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)\n      at transformSync (../node_modules/@babel/core/src/transform.ts:66:52)\n      at ScriptTransformer.transformSource (../node_modules/@jest/transform/build/ScriptTransformer.js:545:31)\n      at ScriptTransformer._transformAndBuildScript (../node_modules/@jest/transform/build/ScriptTransformer.js:674:40)\n      at ScriptTransformer.transform (../node_modules/@jest/transform/build/ScriptTransformer.js:726:19)\n\nPASS test/pacientes.test.js\n  Pacientes API - Pruebas Unitarias con PatrÃ³n AAA\n    GET /api/pacientes\n      âˆš Debe retornar una lista vacÃ­a inicialmente (56 ms)\n      âˆš Debe retornar todos los pacientes existentes (33 ms)\n    POST /api/pacientes\n      âˆš Debe crear un nuevo paciente con datos vÃ¡lidos (39 ms)\n      âˆš Debe rechazar paciente con datos incompletos (11 ms)\n    PUT /api/pacientes/:id\n      âˆš Debe actualizar un paciente existente (31 ms)\n      âˆš Debe actualizar mÃºltiples campos simultÃ¡neamente (24 ms)\n      âˆš Debe retornar 404 si el paciente no existe (13 ms)\n    DELETE /api/pacientes/:id\n      âˆš Debe eliminar un paciente existente (34 ms)\n      âˆš Debe retornar 404 al eliminar paciente inexistente (10 ms)\n\nPASS test/especialidades.test.js\n  Especialidades API - Pruebas Unitarias con PatrÃ³n AAA\n    GET /api/especialidades\n      âˆš Debe retornar un array vacÃ­o inicialmente (62 ms)\n      âˆš Debe retornar todas las especialidades registradas (33 ms)\n    POST /api/especialidades\n      âˆš Debe crear una nueva especialidad con datos vÃ¡lidos (42 ms)\n      âˆš Debe rechazar especialidad sin nombre (10 ms)\n      âˆš Debe rechazar especialidad duplicada (case-insensitive) (25 ms)\n    PUT /api/especialidades/:id\n      âˆš Debe actualizar el nombre de una especialidad existente (29 ms)\n      âˆš Debe retornar 404 al actualizar especialidad inexistente (12 ms)\n    DELETE /api/especialidades/:id\n      âˆš Debe eliminar una especialidad existente (36 ms)\n      âˆš Debe retornar 404 al eliminar especialidad inexistente (11 ms)\n\nPASS test/medicamentos.test.js\n  Medicamentos API - Pruebas Unitarias con PatrÃ³n AAA\n    GET /api/medicamentos\n      âˆš Debe retornar un array vacÃ­o inicialmente (56 ms)\n      âˆš Debe retornar todos los medicamentos registrados (39 ms)\n    POST /api/medicamentos\n      âˆš Debe crear un nuevo medicamento con datos vÃ¡lidos (38 ms)\n      âˆš Debe rechazar medicamento con datos incompletos (9 ms)\n    PUT /api/medicamentos/:id\n      âˆš Debe actualizar el precio de un medicamento existente (30 ms)\n      âˆš Debe actualizar mÃºltiples campos simultÃ¡neamente (27 ms)\n      âˆš Debe retornar 404 al actualizar medicamento inexistente (13 ms)\n    DELETE /api/medicamentos/:id\n      âˆš Debe eliminar un medicamento existente (34 ms)\n      âˆš Debe retornar 404 al eliminar medicamento inexistente (9 ms)\n\nPASS test/app.test.js\n  Backend App API - Main Endpoints\n    âˆš OPTIONS request - should allow CORS with method OPTIONS (48 ms)\n    âˆš GET request - should include CORS headers (23 ms)\n    âˆš GET /nonexistent - should return 404 (17 ms)\n    âˆš GET /api/health - should return server status (17 ms)\n    âˆš GET /api/test-logs - should return test logs (20 ms)\n    âˆš POST /api/run-tests - should execute tests (508 ms)\n\nTest Suites: 1 failed, 4 passed, 5 total\nTests:       33 passed, 33 total\nSnapshots:   0 total\nTime:        3.851 s, estimated 34 s\nRan all test suites.\n"
  },
  {
    "timestamp": "2026-02-12T02:28:03.125Z",
    "date": "11/2/2026, 21:28:03",
    "passed": 0,
    "failed": 0,
    "total": 0,
    "failedTests": [],
    "output": "\n> pruebas-unitarias-backend@1.0.0 test\n> jest --verbose\n\n\"jest\" no se reconoce como un comando interno o externo,\r\nprograma o archivo por lotes ejecutable.\r\n"
  },
  {
    "timestamp": "2026-02-12T02:27:31.581Z",
    "date": "11/2/2026, 21:27:31",
    "passed": 2,
    "failed": 3,
    "total": 5,
    "failedTests": [],
    "output": "\n> pruebas-unitarias-backend@1.0.0 test\n> jest --verbose\n\n  console.log\n    [dotenv@17.2.3] injecting env (3) from .env -- tip: âš™ï¸  load multiple .env files with { path: ['.env.local', '.env'] }\n\n      at _log (../node_modules/dotenv/lib/main.js:142:11)\n\n  console.log\n    [dotenv@17.2.3] injecting env (3) from .env -- tip: âš™ï¸  enable debug logging with { debug: true }\n\n      at _log (../node_modules/dotenv/lib/main.js:142:11)\n\n  console.log\n    [dotenv@17.2.3] injecting env (3) from .env -- tip: ðŸ” encrypt with Dotenvx: https://dotenvx.com\n\n      at _log (../node_modules/dotenv/lib/main.js:142:11)\n\n  console.log\n    [dotenv@17.2.3] injecting env (3) from .env -- tip: ðŸ—‚ï¸ backup and recover secrets: https://dotenvx.com/ops\n\n      at _log (../node_modules/dotenv/lib/main.js:142:11)\n\n  console.log\n    âœ… MongoDB conectado\n\n      at log (src/app.js:34:29)\n\n  console.log\n    âœ… MongoDB conectado\n\n      at log (src/app.js:34:29)\n\n  console.log\n    âœ… MongoDB conectado\n\n      at log (src/app.js:34:29)\n\n  console.log\n    âœ… MongoDB conectado\n\n      at log (src/app.js:34:29)\n\nFAIL test/doctores.test.js\n  â— Test suite failed to run\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     â€¢ If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     â€¢ If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     â€¢ To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     â€¢ If you need a custom transformation specify a \"transform\" option in your config.\n     â€¢ If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    SyntaxError: C:\\Users\\estef\\OneDrive\\Desktop\\git\\27854_P3_Proyecto\\Pruebas-Unitarias-Backend\\test\\doctores.test.js: Missing semicolon. (206:37)\n\n    \u001b[0m \u001b[90m 204 |\u001b[39m \u001b[32m            // ACT: Actualizar telÃ©fono y especialidad\u001b[39m\n     \u001b[90m 205 |\u001b[39m \u001b[32m            const updated = await request(app)\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 206 |\u001b[39m \u001b[32m                .put(`\u001b[39m\u001b[33m/\u001b[39mapi\u001b[33m/\u001b[39mdoctores\u001b[33m/\u001b[39m${id}\u001b[32m`)\u001b[39m\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 207 |\u001b[39m \u001b[32m                .send({ \u001b[39m\n     \u001b[90m 208 |\u001b[39m \u001b[32m                    phone: '0999999999',\u001b[39m\n     \u001b[90m 209 |\u001b[39m \u001b[32m                    specialty: 'NeurologÃ­a PediÃ¡trica',\u001b[39m\u001b[0m\n\n      at constructor (../node_modules/@babel/parser/src/parse-error.ts:95:45)\n      at Parser.toParseError [as raise] (../node_modules/@babel/parser/src/tokenizer/index.ts:1507:19)\n      at Parser.raise [as semicolon] (../node_modules/@babel/parser/src/parser/util.ts:149:10)\n      at Parser.semicolon [as parseExpressionStatement] (../node_modules/@babel/parser/src/parser/statement.ts:1363:10)\n      at Parser.parseExpressionStatement [as parseStatementContent] (../node_modules/@babel/parser/src/parser/statement.ts:702:19)\n      at Parser.parseStatementContent [as parseStatementLike] (../node_modules/@babel/parser/src/parser/statement.ts:482:17)\n      at Parser.parseStatementLike [as parseModuleItem] (../node_modules/@babel/parser/src/parser/statement.ts:419:17)\n      at Parser.parseModuleItem [as parseBlockOrModuleBlockBody] (../node_modules/@babel/parser/src/parser/statement.ts:1443:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (../node_modules/@babel/parser/src/parser/statement.ts:1417:10)\n      at Parser.parseBlockBody [as parseProgram] (../node_modules/@babel/parser/src/parser/statement.ts:229:10)\n      at Parser.parseProgram [as parseTopLevel] (../node_modules/@babel/parser/src/parser/statement.ts:203:25)\n      at Parser.parseTopLevel [as parse] (../node_modules/@babel/parser/src/parser/index.ts:88:25)\n      at parse (../node_modules/@babel/parser/src/index.ts:86:38)\n      at parser (../node_modules/@babel/core/src/parser/index.ts:29:19)\n          at parser.next (<anonymous>)\n      at normalizeFile (../node_modules/@babel/core/src/transformation/normalize-file.ts:50:24)\n          at normalizeFile.next (<anonymous>)\n      at run (../node_modules/@babel/core/src/transformation/index.ts:41:36)\n          at run.next (<anonymous>)\n      at transform (../node_modules/@babel/core/src/transform.ts:29:20)\n          at transform.next (<anonymous>)\n      at evaluateSync (../node_modules/gensync/index.js:251:28)\n      at sync (../node_modules/gensync/index.js:89:14)\n      at fn (../node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)\n      at transformSync (../node_modules/@babel/core/src/transform.ts:66:52)\n      at ScriptTransformer.transformSource (../node_modules/@jest/transform/build/ScriptTransformer.js:545:31)\n      at ScriptTransformer._transformAndBuildScript (../node_modules/@jest/transform/build/ScriptTransformer.js:674:40)\n      at ScriptTransformer.transform (../node_modules/@jest/transform/build/ScriptTransformer.js:726:19)\n\nFAIL test/pacientes.test.js\n  Pacientes API - Pruebas Unitarias con PatrÃ³n AAA\n    GET /api/pacientes\n      âˆš Debe retornar una lista vacÃ­a inicialmente (67 ms)\n      Ã— Debe retornar todos los pacientes existentes (30 ms)\n    POST /api/pacientes\n      âˆš Debe crear un nuevo paciente con datos vÃ¡lidos (37 ms)\n      âˆš Debe rechazar paciente con datos incompletos (10 ms)\n    PUT /api/pacientes/:id\n      Ã— Debe actualizar un paciente existente (23 ms)\n      âˆš Debe actualizar mÃºltiples campos simultÃ¡neamente (26 ms)\n      âˆš Debe retornar 404 si el paciente no existe (12 ms)\n    DELETE /api/pacientes/:id\n      âˆš Debe eliminar un paciente existente (32 ms)\n      âˆš Debe retornar 404 al eliminar paciente inexistente (11 ms)\n\n  â— Pacientes API - Pruebas Unitarias con PatrÃ³n AAA â€º GET /api/pacientes â€º Debe retornar todos los pacientes existentes\n\n    expect(received).toHaveLength(expected)\n\n    Expected length: 2\n    Received length: 0\n    Received array:  []\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m             \u001b[90m// ASSERT: Verificar que retorna 2 pacientes (sin importar orden)\u001b[39m\n     \u001b[90m 42 |\u001b[39m             expect(res\u001b[33m.\u001b[39mstatusCode)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m             expect(res\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoHaveLength(\u001b[35m2\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m             \u001b[36mconst\u001b[39m names \u001b[33m=\u001b[39m res\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mmap(p \u001b[33m=>\u001b[39m p\u001b[33m.\u001b[39mname)\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m             expect(names)\u001b[33m.\u001b[39mtoContain(\u001b[32m'Juan'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m             expect(names)\u001b[33m.\u001b[39mtoContain(\u001b[32m'MarÃ­a'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toHaveLength (test/pacientes.test.js:43:30)\n\n  â— Pacientes API - Pruebas Unitarias con PatrÃ³n AAA â€º PUT /api/pacientes/:id â€º Debe actualizar un paciente existente\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 404\n\n    \u001b[0m \u001b[90m 102 |\u001b[39m\n     \u001b[90m 103 |\u001b[39m             \u001b[90m// ASSERT: Verificar actualizaciÃ³n\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 104 |\u001b[39m             expect(updated\u001b[33m.\u001b[39mstatusCode)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 105 |\u001b[39m             expect(updated\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39millness)\u001b[33m.\u001b[39mtoBe(\u001b[32m'MigraÃ±a'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 106 |\u001b[39m             expect(updated\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mname)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Ana'\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// Otros campos no cambian\u001b[39m\n     \u001b[90m 107 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBe (test/pacientes.test.js:104:40)\n\nPASS test/especialidades.test.js\n  Especialidades API - Pruebas Unitarias con PatrÃ³n AAA\n    GET /api/especialidades\n      âˆš Debe retornar un array vacÃ­o inicialmente (53 ms)\n      âˆš Debe retornar todas las especialidades registradas (39 ms)\n    POST /api/especialidades\n      âˆš Debe crear una nueva especialidad con datos vÃ¡lidos (41 ms)\n      âˆš Debe rechazar especialidad sin nombre (10 ms)\n      âˆš Debe rechazar especialidad duplicada (case-insensitive) (27 ms)\n    PUT /api/especialidades/:id\n      âˆš Debe actualizar el nombre de una especialidad existente (33 ms)\n      âˆš Debe retornar 404 al actualizar especialidad inexistente (13 ms)\n    DELETE /api/especialidades/:id\n      âˆš Debe eliminar una especialidad existente (38 ms)\n      âˆš Debe retornar 404 al eliminar especialidad inexistente (11 ms)\n\nPASS test/medicamentos.test.js\n  Medicamentos API - Pruebas Unitarias con PatrÃ³n AAA\n    GET /api/medicamentos\n      âˆš Debe retornar un array vacÃ­o inicialmente (69 ms)\n      âˆš Debe retornar todos los medicamentos registrados (39 ms)\n    POST /api/medicamentos\n      âˆš Debe crear un nuevo medicamento con datos vÃ¡lidos (34 ms)\n      âˆš Debe rechazar medicamento con datos incompletos (12 ms)\n    PUT /api/medicamentos/:id\n      âˆš Debe actualizar el precio de un medicamento existente (33 ms)\n      âˆš Debe actualizar mÃºltiples campos simultÃ¡neamente (26 ms)\n      âˆš Debe retornar 404 al actualizar medicamento inexistente (13 ms)\n    DELETE /api/medicamentos/:id\n      âˆš Debe eliminar un medicamento existente (25 ms)\n      âˆš Debe retornar 404 al eliminar medicamento inexistente (7 ms)\n\nFAIL test/app.test.js (33.324 s)\n  Backend App API - Main Endpoints\n    âˆš OPTIONS request - should allow CORS with method OPTIONS (44 ms)\n    âˆš GET request - should include CORS headers (24 ms)\n    âˆš GET /nonexistent - should return 404 (21 ms)\n    âˆš GET /api/health - should return server status (17 ms)\n    âˆš GET /api/test-logs - should return test logs (20 ms)\n    Ã— POST /api/run-tests - should execute tests (30015 ms)\n\n  â— Backend App API - Main Endpoints â€º POST /api/run-tests - should execute tests\n\n    thrown: \"Exceeded timeout of 30000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\n    \u001b[0m \u001b[90m 69 |\u001b[39m\n     \u001b[90m 70 |\u001b[39m     \u001b[90m// Test run-tests endpoint\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 71 |\u001b[39m     test(\u001b[32m'POST /api/run-tests - should execute tests'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m    |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 72 |\u001b[39m         \u001b[36mconst\u001b[39m res \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\n     \u001b[90m 73 |\u001b[39m             \u001b[33m.\u001b[39mpost(\u001b[32m'/api/run-tests'\u001b[39m)\n     \u001b[90m 74 |\u001b[39m             \u001b[33m.\u001b[39msend({ failTests\u001b[33m:\u001b[39m \u001b[36mfalse\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at test (test/app.test.js:71:5)\n      at Object.describe (test/app.test.js:9:1)\n\nA worker process has failed to exit gracefully and has been force exited. This is likely caused by tests leaking due to improper teardown. Try running with --detectOpenHandles to find leaks. Active timers can also cause this, ensure that .unref() was called on them.\nTest Suites: 3 failed, 2 passed, 5 total\nTests:       3 failed, 30 passed, 33 total\nSnapshots:   0 total\nTime:        34.297 s\nRan all test suites.\n"
  },
  {
    "timestamp": "2026-02-12T02:26:13.718Z",
    "date": "11/2/2026, 21:26:13",
    "passed": 2,
    "failed": 3,
    "total": 5,
    "failedTests": [],
    "output": "\n> pruebas-unitarias-backend@1.0.0 test\n> jest --verbose\n\n  console.log\n    [dotenv@17.2.3] injecting env (3) from .env -- tip: âš™ï¸  override existing env vars with { override: true }\n\n      at _log (../node_modules/dotenv/lib/main.js:142:11)\n\n  console.log\n    [dotenv@17.2.3] injecting env (3) from .env -- tip: ðŸ“¡ add observability to secrets: https://dotenvx.com/ops\n\n      at _log (../node_modules/dotenv/lib/main.js:142:11)\n\n  console.log\n    [dotenv@17.2.3] injecting env (3) from .env -- tip: âš™ï¸  load multiple .env files with { path: ['.env.local', '.env'] }\n\n      at _log (../node_modules/dotenv/lib/main.js:142:11)\n\n  console.log\n    [dotenv@17.2.3] injecting env (3) from .env -- tip: ðŸ“¡ add observability to secrets: https://dotenvx.com/ops\n\n      at _log (../node_modules/dotenv/lib/main.js:142:11)\n\n  console.log\n    âœ… MongoDB conectado\n\n      at log (src/app.js:34:29)\n\n  console.log\n    âœ… MongoDB conectado\n\n      at log (src/app.js:34:29)\n\n  console.log\n    âœ… MongoDB conectado\n\n      at log (src/app.js:34:29)\n\n  console.log\n    âœ… MongoDB conectado\n\n      at log (src/app.js:34:29)\n\nFAIL test/doctores.test.js\n  â— Test suite failed to run\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     â€¢ If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     â€¢ If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     â€¢ To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     â€¢ If you need a custom transformation specify a \"transform\" option in your config.\n     â€¢ If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    SyntaxError: C:\\Users\\estef\\OneDrive\\Desktop\\git\\27854_P3_Proyecto\\Pruebas-Unitarias-Backend\\test\\doctores.test.js: Missing semicolon. (206:37)\n\n    \u001b[0m \u001b[90m 204 |\u001b[39m \u001b[32m            // ACT: Actualizar telÃ©fono y especialidad\u001b[39m\n     \u001b[90m 205 |\u001b[39m \u001b[32m            const updated = await request(app)\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 206 |\u001b[39m \u001b[32m                .put(`\u001b[39m\u001b[33m/\u001b[39mapi\u001b[33m/\u001b[39mdoctores\u001b[33m/\u001b[39m${id}\u001b[32m`)\u001b[39m\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 207 |\u001b[39m \u001b[32m                .send({ \u001b[39m\n     \u001b[90m 208 |\u001b[39m \u001b[32m                    phone: '0999999999',\u001b[39m\n     \u001b[90m 209 |\u001b[39m \u001b[32m                    specialty: 'NeurologÃ­a PediÃ¡trica',\u001b[39m\u001b[0m\n\n      at constructor (../node_modules/@babel/parser/src/parse-error.ts:95:45)\n      at Parser.toParseError [as raise] (../node_modules/@babel/parser/src/tokenizer/index.ts:1507:19)\n      at Parser.raise [as semicolon] (../node_modules/@babel/parser/src/parser/util.ts:149:10)\n      at Parser.semicolon [as parseExpressionStatement] (../node_modules/@babel/parser/src/parser/statement.ts:1363:10)\n      at Parser.parseExpressionStatement [as parseStatementContent] (../node_modules/@babel/parser/src/parser/statement.ts:702:19)\n      at Parser.parseStatementContent [as parseStatementLike] (../node_modules/@babel/parser/src/parser/statement.ts:482:17)\n      at Parser.parseStatementLike [as parseModuleItem] (../node_modules/@babel/parser/src/parser/statement.ts:419:17)\n      at Parser.parseModuleItem [as parseBlockOrModuleBlockBody] (../node_modules/@babel/parser/src/parser/statement.ts:1443:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (../node_modules/@babel/parser/src/parser/statement.ts:1417:10)\n      at Parser.parseBlockBody [as parseProgram] (../node_modules/@babel/parser/src/parser/statement.ts:229:10)\n      at Parser.parseProgram [as parseTopLevel] (../node_modules/@babel/parser/src/parser/statement.ts:203:25)\n      at Parser.parseTopLevel [as parse] (../node_modules/@babel/parser/src/parser/index.ts:88:25)\n      at parse (../node_modules/@babel/parser/src/index.ts:86:38)\n      at parser (../node_modules/@babel/core/src/parser/index.ts:29:19)\n          at parser.next (<anonymous>)\n      at normalizeFile (../node_modules/@babel/core/src/transformation/normalize-file.ts:50:24)\n          at normalizeFile.next (<anonymous>)\n      at run (../node_modules/@babel/core/src/transformation/index.ts:41:36)\n          at run.next (<anonymous>)\n      at transform (../node_modules/@babel/core/src/transform.ts:29:20)\n          at transform.next (<anonymous>)\n      at evaluateSync (../node_modules/gensync/index.js:251:28)\n      at sync (../node_modules/gensync/index.js:89:14)\n      at fn (../node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)\n      at transformSync (../node_modules/@babel/core/src/transform.ts:66:52)\n      at ScriptTransformer.transformSource (../node_modules/@jest/transform/build/ScriptTransformer.js:545:31)\n      at ScriptTransformer._transformAndBuildScript (../node_modules/@jest/transform/build/ScriptTransformer.js:674:40)\n      at ScriptTransformer.transform (../node_modules/@jest/transform/build/ScriptTransformer.js:726:19)\n\nFAIL test/medicamentos.test.js\n  Medicamentos API - Pruebas Unitarias con PatrÃ³n AAA\n    GET /api/medicamentos\n      âˆš Debe retornar un array vacÃ­o inicialmente (60 ms)\n      âˆš Debe retornar todos los medicamentos registrados (30 ms)\n    POST /api/medicamentos\n      âˆš Debe crear un nuevo medicamento con datos vÃ¡lidos (37 ms)\n      âˆš Debe rechazar medicamento con datos incompletos (11 ms)\n    PUT /api/medicamentos/:id\n      Ã— Debe actualizar el precio de un medicamento existente (28 ms)\n      âˆš Debe actualizar mÃºltiples campos simultÃ¡neamente (27 ms)\n      âˆš Debe retornar 404 al actualizar medicamento inexistente (12 ms)\n    DELETE /api/medicamentos/:id\n      âˆš Debe eliminar un medicamento existente (35 ms)\n      âˆš Debe retornar 404 al eliminar medicamento inexistente (11 ms)\n\n  â— Medicamentos API - Pruebas Unitarias con PatrÃ³n AAA â€º PUT /api/medicamentos/:id â€º Debe actualizar el precio de un medicamento existente\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 404\n\n    \u001b[0m \u001b[90m 119 |\u001b[39m\n     \u001b[90m 120 |\u001b[39m             \u001b[90m// ASSERT: Verificar actualizaciÃ³n de precio\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 121 |\u001b[39m             expect(updated\u001b[33m.\u001b[39mstatusCode)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 122 |\u001b[39m             expect(updated\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mprice)\u001b[33m.\u001b[39mtoBe(\u001b[35m4.00\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 123 |\u001b[39m             expect(updated\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mname)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Aspirina'\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// Otros campos no cambian\u001b[39m\n     \u001b[90m 124 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBe (test/medicamentos.test.js:121:40)\n\nPASS test/especialidades.test.js\n  Especialidades API - Pruebas Unitarias con PatrÃ³n AAA\n    GET /api/especialidades\n      âˆš Debe retornar un array vacÃ­o inicialmente (54 ms)\n      âˆš Debe retornar todas las especialidades registradas (31 ms)\n    POST /api/especialidades\n      âˆš Debe crear una nueva especialidad con datos vÃ¡lidos (39 ms)\n      âˆš Debe rechazar especialidad sin nombre (11 ms)\n      âˆš Debe rechazar especialidad duplicada (case-insensitive) (26 ms)\n    PUT /api/especialidades/:id\n      âˆš Debe actualizar el nombre de una especialidad existente (28 ms)\n      âˆš Debe retornar 404 al actualizar especialidad inexistente (12 ms)\n    DELETE /api/especialidades/:id\n      âˆš Debe eliminar una especialidad existente (37 ms)\n      âˆš Debe retornar 404 al eliminar especialidad inexistente (10 ms)\n\nFAIL test/pacientes.test.js\n  Pacientes API - Pruebas Unitarias con PatrÃ³n AAA\n    GET /api/pacientes\n      âˆš Debe retornar una lista vacÃ­a inicialmente (63 ms)\n      Ã— Debe retornar todos los pacientes existentes (34 ms)\n    POST /api/pacientes\n      âˆš Debe crear un nuevo paciente con datos vÃ¡lidos (39 ms)\n      âˆš Debe rechazar paciente con datos incompletos (11 ms)\n    PUT /api/pacientes/:id\n      âˆš Debe actualizar un paciente existente (32 ms)\n      âˆš Debe actualizar mÃºltiples campos simultÃ¡neamente (25 ms)\n      âˆš Debe retornar 404 si el paciente no existe (12 ms)\n    DELETE /api/pacientes/:id\n      âˆš Debe eliminar un paciente existente (31 ms)\n      âˆš Debe retornar 404 al eliminar paciente inexistente (7 ms)\n\n  â— Pacientes API - Pruebas Unitarias con PatrÃ³n AAA â€º GET /api/pacientes â€º Debe retornar todos los pacientes existentes\n\n    expect(received).toHaveLength(expected)\n\n    Expected length: 2\n    Received length: 0\n    Received array:  []\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m             \u001b[90m// ASSERT: Verificar que retorna 2 pacientes (sin importar orden)\u001b[39m\n     \u001b[90m 42 |\u001b[39m             expect(res\u001b[33m.\u001b[39mstatusCode)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m             expect(res\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoHaveLength(\u001b[35m2\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m             \u001b[36mconst\u001b[39m names \u001b[33m=\u001b[39m res\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mmap(p \u001b[33m=>\u001b[39m p\u001b[33m.\u001b[39mname)\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m             expect(names)\u001b[33m.\u001b[39mtoContain(\u001b[32m'Juan'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m             expect(names)\u001b[33m.\u001b[39mtoContain(\u001b[32m'MarÃ­a'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toHaveLength (test/pacientes.test.js:43:30)\n\nPASS test/app.test.js (27.396 s)\n  Backend App API - Main Endpoints\n    âˆš OPTIONS request - should allow CORS with method OPTIONS (49 ms)\n    âˆš GET request - should include CORS headers (25 ms)\n    âˆš GET /nonexistent - should return 404 (16 ms)\n    âˆš GET /api/health - should return server status (17 ms)\n    âˆš GET /api/test-logs - should return test logs (18 ms)\n    âˆš POST /api/run-tests - should execute tests (24240 ms)\n\nTest Suites: 3 failed, 2 passed, 5 total\nTests:       2 failed, 31 passed, 33 total\nSnapshots:   0 total\nTime:        27.926 s, estimated 35 s\nRan all test suites.\n"
  },
  {
    "timestamp": "2026-02-12T02:26:13.541Z",
    "date": "11/2/2026, 21:26:13",
    "passed": 3,
    "failed": 2,
    "total": 5,
    "failedTests": [],
    "output": "\n> pruebas-unitarias-backend@1.0.0 test\n> jest --verbose\n\n  console.log\n    [dotenv@17.2.3] injecting env (3) from .env -- tip: âš™ï¸  write to custom object with { processEnv: myObject }\n\n      at _log (../node_modules/dotenv/lib/main.js:142:11)\n\n  console.log\n    [dotenv@17.2.3] injecting env (3) from .env -- tip: âš™ï¸  enable debug logging with { debug: true }\n\n      at _log (../node_modules/dotenv/lib/main.js:142:11)\n\n  console.log\n    [dotenv@17.2.3] injecting env (3) from .env -- tip: âš™ï¸  specify custom .env file path with { path: '/custom/path/.env' }\n\n      at _log (../node_modules/dotenv/lib/main.js:142:11)\n\n  console.log\n    [dotenv@17.2.3] injecting env (3) from .env -- tip: âš™ï¸  specify custom .env file path with { path: '/custom/path/.env' }\n\n      at _log (../node_modules/dotenv/lib/main.js:142:11)\n\n  console.log\n    âœ… MongoDB conectado\n\n      at log (src/app.js:34:29)\n\n  console.log\n    âœ… MongoDB conectado\n\n      at log (src/app.js:34:29)\n\n  console.log\n    âœ… MongoDB conectado\n\n      at log (src/app.js:34:29)\n\n  console.log\n    âœ… MongoDB conectado\n\n      at log (src/app.js:34:29)\n\nFAIL test/doctores.test.js\n  â— Test suite failed to run\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     â€¢ If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     â€¢ If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     â€¢ To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     â€¢ If you need a custom transformation specify a \"transform\" option in your config.\n     â€¢ If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    SyntaxError: C:\\Users\\estef\\OneDrive\\Desktop\\git\\27854_P3_Proyecto\\Pruebas-Unitarias-Backend\\test\\doctores.test.js: Missing semicolon. (206:37)\n\n    \u001b[0m \u001b[90m 204 |\u001b[39m \u001b[32m            // ACT: Actualizar telÃ©fono y especialidad\u001b[39m\n     \u001b[90m 205 |\u001b[39m \u001b[32m            const updated = await request(app)\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 206 |\u001b[39m \u001b[32m                .put(`\u001b[39m\u001b[33m/\u001b[39mapi\u001b[33m/\u001b[39mdoctores\u001b[33m/\u001b[39m${id}\u001b[32m`)\u001b[39m\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 207 |\u001b[39m \u001b[32m                .send({ \u001b[39m\n     \u001b[90m 208 |\u001b[39m \u001b[32m                    phone: '0999999999',\u001b[39m\n     \u001b[90m 209 |\u001b[39m \u001b[32m                    specialty: 'NeurologÃ­a PediÃ¡trica',\u001b[39m\u001b[0m\n\n      at constructor (../node_modules/@babel/parser/src/parse-error.ts:95:45)\n      at Parser.toParseError [as raise] (../node_modules/@babel/parser/src/tokenizer/index.ts:1507:19)\n      at Parser.raise [as semicolon] (../node_modules/@babel/parser/src/parser/util.ts:149:10)\n      at Parser.semicolon [as parseExpressionStatement] (../node_modules/@babel/parser/src/parser/statement.ts:1363:10)\n      at Parser.parseExpressionStatement [as parseStatementContent] (../node_modules/@babel/parser/src/parser/statement.ts:702:19)\n      at Parser.parseStatementContent [as parseStatementLike] (../node_modules/@babel/parser/src/parser/statement.ts:482:17)\n      at Parser.parseStatementLike [as parseModuleItem] (../node_modules/@babel/parser/src/parser/statement.ts:419:17)\n      at Parser.parseModuleItem [as parseBlockOrModuleBlockBody] (../node_modules/@babel/parser/src/parser/statement.ts:1443:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (../node_modules/@babel/parser/src/parser/statement.ts:1417:10)\n      at Parser.parseBlockBody [as parseProgram] (../node_modules/@babel/parser/src/parser/statement.ts:229:10)\n      at Parser.parseProgram [as parseTopLevel] (../node_modules/@babel/parser/src/parser/statement.ts:203:25)\n      at Parser.parseTopLevel [as parse] (../node_modules/@babel/parser/src/parser/index.ts:88:25)\n      at parse (../node_modules/@babel/parser/src/index.ts:86:38)\n      at parser (../node_modules/@babel/core/src/parser/index.ts:29:19)\n          at parser.next (<anonymous>)\n      at normalizeFile (../node_modules/@babel/core/src/transformation/normalize-file.ts:50:24)\n          at normalizeFile.next (<anonymous>)\n      at run (../node_modules/@babel/core/src/transformation/index.ts:41:36)\n          at run.next (<anonymous>)\n      at transform (../node_modules/@babel/core/src/transform.ts:29:20)\n          at transform.next (<anonymous>)\n      at evaluateSync (../node_modules/gensync/index.js:251:28)\n      at sync (../node_modules/gensync/index.js:89:14)\n      at fn (../node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)\n      at transformSync (../node_modules/@babel/core/src/transform.ts:66:52)\n      at ScriptTransformer.transformSource (../node_modules/@jest/transform/build/ScriptTransformer.js:545:31)\n      at ScriptTransformer._transformAndBuildScript (../node_modules/@jest/transform/build/ScriptTransformer.js:674:40)\n      at ScriptTransformer.transform (../node_modules/@jest/transform/build/ScriptTransformer.js:726:19)\n\nPASS test/pacientes.test.js\n  Pacientes API - Pruebas Unitarias con PatrÃ³n AAA\n    GET /api/pacientes\n      âˆš Debe retornar una lista vacÃ­a inicialmente (65 ms)\n      âˆš Debe retornar todos los pacientes existentes (44 ms)\n    POST /api/pacientes\n      âˆš Debe crear un nuevo paciente con datos vÃ¡lidos (38 ms)\n      âˆš Debe rechazar paciente con datos incompletos (10 ms)\n    PUT /api/pacientes/:id\n      âˆš Debe actualizar un paciente existente (38 ms)\n      âˆš Debe actualizar mÃºltiples campos simultÃ¡neamente (29 ms)\n      âˆš Debe retornar 404 si el paciente no existe (13 ms)\n    DELETE /api/pacientes/:id\n      âˆš Debe eliminar un paciente existente (34 ms)\n      âˆš Debe retornar 404 al eliminar paciente inexistente (12 ms)\n\nPASS test/medicamentos.test.js\n  Medicamentos API - Pruebas Unitarias con PatrÃ³n AAA\n    GET /api/medicamentos\n      âˆš Debe retornar un array vacÃ­o inicialmente (68 ms)\n      âˆš Debe retornar todos los medicamentos registrados (41 ms)\n    POST /api/medicamentos\n      âˆš Debe crear un nuevo medicamento con datos vÃ¡lidos (38 ms)\n      âˆš Debe rechazar medicamento con datos incompletos (9 ms)\n    PUT /api/medicamentos/:id\n      âˆš Debe actualizar el precio de un medicamento existente (37 ms)\n      âˆš Debe actualizar mÃºltiples campos simultÃ¡neamente (31 ms)\n      âˆš Debe retornar 404 al actualizar medicamento inexistente (12 ms)\n    DELETE /api/medicamentos/:id\n      âˆš Debe eliminar un medicamento existente (36 ms)\n      âˆš Debe retornar 404 al eliminar medicamento inexistente (10 ms)\n\nFAIL test/especialidades.test.js\n  Especialidades API - Pruebas Unitarias con PatrÃ³n AAA\n    GET /api/especialidades\n      âˆš Debe retornar un array vacÃ­o inicialmente (62 ms)\n      Ã— Debe retornar todas las especialidades registradas (46 ms)\n    POST /api/especialidades\n      âˆš Debe crear una nueva especialidad con datos vÃ¡lidos (49 ms)\n      âˆš Debe rechazar especialidad sin nombre (11 ms)\n      âˆš Debe rechazar especialidad duplicada (case-insensitive) (33 ms)\n    PUT /api/especialidades/:id\n      âˆš Debe actualizar el nombre de una especialidad existente (32 ms)\n      âˆš Debe retornar 404 al actualizar especialidad inexistente (13 ms)\n    DELETE /api/especialidades/:id\n      âˆš Debe eliminar una especialidad existente (38 ms)\n      âˆš Debe retornar 404 al eliminar especialidad inexistente (11 ms)\n\n  â— Especialidades API - Pruebas Unitarias con PatrÃ³n AAA â€º GET /api/especialidades â€º Debe retornar todas las especialidades registradas\n\n    expect(received).toHaveLength(expected)\n\n    Expected length: 3\n    Received length: 0\n    Received array:  []\n\n    \u001b[0m \u001b[90m 42 |\u001b[39m             \u001b[90m// ASSERT: Verificar que retorna 3 especialidades (sin importar orden)\u001b[39m\n     \u001b[90m 43 |\u001b[39m             expect(res\u001b[33m.\u001b[39mstatusCode)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 44 |\u001b[39m             expect(res\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoHaveLength(\u001b[35m3\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 45 |\u001b[39m             \u001b[36mconst\u001b[39m names \u001b[33m=\u001b[39m res\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mmap(e \u001b[33m=>\u001b[39m e\u001b[33m.\u001b[39mname)\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m             expect(names)\u001b[33m.\u001b[39mtoContain(\u001b[32m'CardiologÃ­a'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 47 |\u001b[39m             expect(names)\u001b[33m.\u001b[39mtoContain(\u001b[32m'PediatrÃ­a'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toHaveLength (test/especialidades.test.js:44:30)\n\nPASS test/app.test.js (22.643 s)\n  Backend App API - Main Endpoints\n    âˆš OPTIONS request - should allow CORS with method OPTIONS (45 ms)\n    âˆš GET request - should include CORS headers (28 ms)\n    âˆš GET /nonexistent - should return 404 (26 ms)\n    âˆš GET /api/health - should return server status (20 ms)\n    âˆš GET /api/test-logs - should return test logs (21 ms)\n    âˆš POST /api/run-tests - should execute tests (19632 ms)\n\nTest Suites: 2 failed, 3 passed, 5 total\nTests:       1 failed, 32 passed, 33 total\nSnapshots:   0 total\nTime:        23.026 s, estimated 35 s\nRan all test suites.\n"
  },
  {
    "timestamp": "2026-02-12T02:26:13.367Z",
    "date": "11/2/2026, 21:26:13",
    "passed": 2,
    "failed": 3,
    "total": 5,
    "failedTests": [],
    "output": "\n> pruebas-unitarias-backend@1.0.0 test\n> jest --verbose\n\n  console.log\n    [dotenv@17.2.3] injecting env (3) from .env -- tip: ðŸ”„ add secrets lifecycle management: https://dotenvx.com/ops\n\n      at _log (../node_modules/dotenv/lib/main.js:142:11)\n\n  console.log\n    [dotenv@17.2.3] injecting env (3) from .env -- tip: ðŸ” prevent committing .env to code: https://dotenvx.com/precommit\n\n      at _log (../node_modules/dotenv/lib/main.js:142:11)\n\n  console.log\n    [dotenv@17.2.3] injecting env (3) from .env -- tip: ðŸ› ï¸  run anywhere with `dotenvx run -- yourcommand`\n\n      at _log (../node_modules/dotenv/lib/main.js:142:11)\n\n  console.log\n    [dotenv@17.2.3] injecting env (3) from .env -- tip: âš™ï¸  suppress all logs with { quiet: true }\n\n      at _log (../node_modules/dotenv/lib/main.js:142:11)\n\n  console.log\n    âœ… MongoDB conectado\n\n      at log (src/app.js:34:29)\n\n  console.log\n    âœ… MongoDB conectado\n\n      at log (src/app.js:34:29)\n\n  console.log\n    âœ… MongoDB conectado\n\n      at log (src/app.js:34:29)\n\n  console.log\n    âœ… MongoDB conectado\n\n      at log (src/app.js:34:29)\n\nFAIL test/doctores.test.js\n  â— Test suite failed to run\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     â€¢ If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     â€¢ If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     â€¢ To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     â€¢ If you need a custom transformation specify a \"transform\" option in your config.\n     â€¢ If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    SyntaxError: C:\\Users\\estef\\OneDrive\\Desktop\\git\\27854_P3_Proyecto\\Pruebas-Unitarias-Backend\\test\\doctores.test.js: Missing semicolon. (206:37)\n\n    \u001b[0m \u001b[90m 204 |\u001b[39m \u001b[32m            // ACT: Actualizar telÃ©fono y especialidad\u001b[39m\n     \u001b[90m 205 |\u001b[39m \u001b[32m            const updated = await request(app)\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 206 |\u001b[39m \u001b[32m                .put(`\u001b[39m\u001b[33m/\u001b[39mapi\u001b[33m/\u001b[39mdoctores\u001b[33m/\u001b[39m${id}\u001b[32m`)\u001b[39m\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 207 |\u001b[39m \u001b[32m                .send({ \u001b[39m\n     \u001b[90m 208 |\u001b[39m \u001b[32m                    phone: '0999999999',\u001b[39m\n     \u001b[90m 209 |\u001b[39m \u001b[32m                    specialty: 'NeurologÃ­a PediÃ¡trica',\u001b[39m\u001b[0m\n\n      at constructor (../node_modules/@babel/parser/src/parse-error.ts:95:45)\n      at Parser.toParseError [as raise] (../node_modules/@babel/parser/src/tokenizer/index.ts:1507:19)\n      at Parser.raise [as semicolon] (../node_modules/@babel/parser/src/parser/util.ts:149:10)\n      at Parser.semicolon [as parseExpressionStatement] (../node_modules/@babel/parser/src/parser/statement.ts:1363:10)\n      at Parser.parseExpressionStatement [as parseStatementContent] (../node_modules/@babel/parser/src/parser/statement.ts:702:19)\n      at Parser.parseStatementContent [as parseStatementLike] (../node_modules/@babel/parser/src/parser/statement.ts:482:17)\n      at Parser.parseStatementLike [as parseModuleItem] (../node_modules/@babel/parser/src/parser/statement.ts:419:17)\n      at Parser.parseModuleItem [as parseBlockOrModuleBlockBody] (../node_modules/@babel/parser/src/parser/statement.ts:1443:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (../node_modules/@babel/parser/src/parser/statement.ts:1417:10)\n      at Parser.parseBlockBody [as parseProgram] (../node_modules/@babel/parser/src/parser/statement.ts:229:10)\n      at Parser.parseProgram [as parseTopLevel] (../node_modules/@babel/parser/src/parser/statement.ts:203:25)\n      at Parser.parseTopLevel [as parse] (../node_modules/@babel/parser/src/parser/index.ts:88:25)\n      at parse (../node_modules/@babel/parser/src/index.ts:86:38)\n      at parser (../node_modules/@babel/core/src/parser/index.ts:29:19)\n          at parser.next (<anonymous>)\n      at normalizeFile (../node_modules/@babel/core/src/transformation/normalize-file.ts:50:24)\n          at normalizeFile.next (<anonymous>)\n      at run (../node_modules/@babel/core/src/transformation/index.ts:41:36)\n          at run.next (<anonymous>)\n      at transform (../node_modules/@babel/core/src/transform.ts:29:20)\n          at transform.next (<anonymous>)\n      at evaluateSync (../node_modules/gensync/index.js:251:28)\n      at sync (../node_modules/gensync/index.js:89:14)\n      at fn (../node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)\n      at transformSync (../node_modules/@babel/core/src/transform.ts:66:52)\n      at ScriptTransformer.transformSource (../node_modules/@jest/transform/build/ScriptTransformer.js:545:31)\n      at ScriptTransformer._transformAndBuildScript (../node_modules/@jest/transform/build/ScriptTransformer.js:674:40)\n      at ScriptTransformer.transform (../node_modules/@jest/transform/build/ScriptTransformer.js:726:19)\n\nPASS test/pacientes.test.js\n  Pacientes API - Pruebas Unitarias con PatrÃ³n AAA\n    GET /api/pacientes\n      âˆš Debe retornar una lista vacÃ­a inicialmente (60 ms)\n      âˆš Debe retornar todos los pacientes existentes (33 ms)\n    POST /api/pacientes\n      âˆš Debe crear un nuevo paciente con datos vÃ¡lidos (34 ms)\n      âˆš Debe rechazar paciente con datos incompletos (10 ms)\n    PUT /api/pacientes/:id\n      âˆš Debe actualizar un paciente existente (35 ms)\n      âˆš Debe actualizar mÃºltiples campos simultÃ¡neamente (29 ms)\n      âˆš Debe retornar 404 si el paciente no existe (13 ms)\n    DELETE /api/pacientes/:id\n      âˆš Debe eliminar un paciente existente (34 ms)\n      âˆš Debe retornar 404 al eliminar paciente inexistente (11 ms)\n\nFAIL test/especialidades.test.js\n  Especialidades API - Pruebas Unitarias con PatrÃ³n AAA\n    GET /api/especialidades\n      âˆš Debe retornar un array vacÃ­o inicialmente (73 ms)\n      Ã— Debe retornar todas las especialidades registradas (30 ms)\n    POST /api/especialidades\n      âˆš Debe crear una nueva especialidad con datos vÃ¡lidos (36 ms)\n      âˆš Debe rechazar especialidad sin nombre (9 ms)\n      âˆš Debe rechazar especialidad duplicada (case-insensitive) (30 ms)\n    PUT /api/especialidades/:id\n      âˆš Debe actualizar el nombre de una especialidad existente (34 ms)\n      âˆš Debe retornar 404 al actualizar especialidad inexistente (13 ms)\n    DELETE /api/especialidades/:id\n      âˆš Debe eliminar una especialidad existente (37 ms)\n      âˆš Debe retornar 404 al eliminar especialidad inexistente (10 ms)\n\n  â— Especialidades API - Pruebas Unitarias con PatrÃ³n AAA â€º GET /api/especialidades â€º Debe retornar todas las especialidades registradas\n\n    expect(received).toHaveLength(expected)\n\n    Expected length: 3\n    Received length: 0\n    Received array:  []\n\n    \u001b[0m \u001b[90m 42 |\u001b[39m             \u001b[90m// ASSERT: Verificar que retorna 3 especialidades (sin importar orden)\u001b[39m\n     \u001b[90m 43 |\u001b[39m             expect(res\u001b[33m.\u001b[39mstatusCode)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 44 |\u001b[39m             expect(res\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoHaveLength(\u001b[35m3\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 45 |\u001b[39m             \u001b[36mconst\u001b[39m names \u001b[33m=\u001b[39m res\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mmap(e \u001b[33m=>\u001b[39m e\u001b[33m.\u001b[39mname)\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m             expect(names)\u001b[33m.\u001b[39mtoContain(\u001b[32m'CardiologÃ­a'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 47 |\u001b[39m             expect(names)\u001b[33m.\u001b[39mtoContain(\u001b[32m'PediatrÃ­a'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toHaveLength (test/especialidades.test.js:44:30)\n\nFAIL test/medicamentos.test.js\n  Medicamentos API - Pruebas Unitarias con PatrÃ³n AAA\n    GET /api/medicamentos\n      âˆš Debe retornar un array vacÃ­o inicialmente (81 ms)\n      Ã— Debe retornar todos los medicamentos registrados (33 ms)\n    POST /api/medicamentos\n      âˆš Debe crear un nuevo medicamento con datos vÃ¡lidos (39 ms)\n      âˆš Debe rechazar medicamento con datos incompletos (9 ms)\n    PUT /api/medicamentos/:id\n      âˆš Debe actualizar el precio de un medicamento existente (34 ms)\n      âˆš Debe actualizar mÃºltiples campos simultÃ¡neamente (28 ms)\n      âˆš Debe retornar 404 al actualizar medicamento inexistente (14 ms)\n    DELETE /api/medicamentos/:id\n      âˆš Debe eliminar un medicamento existente (34 ms)\n      âˆš Debe retornar 404 al eliminar medicamento inexistente (11 ms)\n\n  â— Medicamentos API - Pruebas Unitarias con PatrÃ³n AAA â€º GET /api/medicamentos â€º Debe retornar todos los medicamentos registrados\n\n    expect(received).toHaveLength(expected)\n\n    Expected length: 2\n    Received length: 0\n    Received array:  []\n\n    \u001b[0m \u001b[90m 55 |\u001b[39m             \u001b[90m// ASSERT: Verificar que retorna 2 medicamentos (sin importar orden)\u001b[39m\n     \u001b[90m 56 |\u001b[39m             expect(res\u001b[33m.\u001b[39mstatusCode)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 57 |\u001b[39m             expect(res\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoHaveLength(\u001b[35m2\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 58 |\u001b[39m             \u001b[36mconst\u001b[39m names \u001b[33m=\u001b[39m res\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mmap(m \u001b[33m=>\u001b[39m m\u001b[33m.\u001b[39mname)\u001b[33m;\u001b[39m\n     \u001b[90m 59 |\u001b[39m             expect(names)\u001b[33m.\u001b[39mtoContain(\u001b[32m'Paracetamol'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 60 |\u001b[39m             expect(names)\u001b[33m.\u001b[39mtoContain(\u001b[32m'Ibuprofeno'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toHaveLength (test/medicamentos.test.js:57:30)\n\nPASS test/app.test.js (17.979 s)\n  Backend App API - Main Endpoints\n    âˆš OPTIONS request - should allow CORS with method OPTIONS (46 ms)\n    âˆš GET request - should include CORS headers (26 ms)\n    âˆš GET /nonexistent - should return 404 (17 ms)\n    âˆš GET /api/health - should return server status (17 ms)\n    âˆš GET /api/test-logs - should return test logs (18 ms)\n    âˆš POST /api/run-tests - should execute tests (15097 ms)\n\nTest Suites: 3 failed, 2 passed, 5 total\nTests:       2 failed, 31 passed, 33 total\nSnapshots:   0 total\nTime:        18.391 s, estimated 35 s\nRan all test suites.\n"
  },
  {
    "timestamp": "2026-02-12T02:26:13.161Z",
    "date": "11/2/2026, 21:26:13",
    "passed": 2,
    "failed": 3,
    "total": 5,
    "failedTests": [],
    "output": "\n> pruebas-unitarias-backend@1.0.0 test\n> jest --verbose\n\n  console.log\n    [dotenv@17.2.3] injecting env (3) from .env -- tip: âš™ï¸  enable debug logging with { debug: true }\n\n      at _log (../node_modules/dotenv/lib/main.js:142:11)\n\n  console.log\n    [dotenv@17.2.3] injecting env (3) from .env -- tip: ðŸ”‘ add access controls to secrets: https://dotenvx.com/ops\n\n      at _log (../node_modules/dotenv/lib/main.js:142:11)\n\n  console.log\n    [dotenv@17.2.3] injecting env (3) from .env -- tip: ðŸ‘¥ sync secrets across teammates & machines: https://dotenvx.com/ops\n\n      at _log (../node_modules/dotenv/lib/main.js:142:11)\n\n  console.log\n    [dotenv@17.2.3] injecting env (3) from .env -- tip: ðŸ” prevent building .env in docker: https://dotenvx.com/prebuild\n\n      at _log (../node_modules/dotenv/lib/main.js:142:11)\n\n  console.log\n    âœ… MongoDB conectado\n\n      at log (src/app.js:34:29)\n\n  console.log\n    âœ… MongoDB conectado\n\n      at log (src/app.js:34:29)\n\n  console.log\n    âœ… MongoDB conectado\n\n      at log (src/app.js:34:29)\n\n  console.log\n    âœ… MongoDB conectado\n\n      at log (src/app.js:34:29)\n\nFAIL test/doctores.test.js\n  â— Test suite failed to run\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     â€¢ If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     â€¢ If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     â€¢ To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     â€¢ If you need a custom transformation specify a \"transform\" option in your config.\n     â€¢ If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    SyntaxError: C:\\Users\\estef\\OneDrive\\Desktop\\git\\27854_P3_Proyecto\\Pruebas-Unitarias-Backend\\test\\doctores.test.js: Missing semicolon. (206:37)\n\n    \u001b[0m \u001b[90m 204 |\u001b[39m \u001b[32m            // ACT: Actualizar telÃ©fono y especialidad\u001b[39m\n     \u001b[90m 205 |\u001b[39m \u001b[32m            const updated = await request(app)\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 206 |\u001b[39m \u001b[32m                .put(`\u001b[39m\u001b[33m/\u001b[39mapi\u001b[33m/\u001b[39mdoctores\u001b[33m/\u001b[39m${id}\u001b[32m`)\u001b[39m\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 207 |\u001b[39m \u001b[32m                .send({ \u001b[39m\n     \u001b[90m 208 |\u001b[39m \u001b[32m                    phone: '0999999999',\u001b[39m\n     \u001b[90m 209 |\u001b[39m \u001b[32m                    specialty: 'NeurologÃ­a PediÃ¡trica',\u001b[39m\u001b[0m\n\n      at constructor (../node_modules/@babel/parser/src/parse-error.ts:95:45)\n      at Parser.toParseError [as raise] (../node_modules/@babel/parser/src/tokenizer/index.ts:1507:19)\n      at Parser.raise [as semicolon] (../node_modules/@babel/parser/src/parser/util.ts:149:10)\n      at Parser.semicolon [as parseExpressionStatement] (../node_modules/@babel/parser/src/parser/statement.ts:1363:10)\n      at Parser.parseExpressionStatement [as parseStatementContent] (../node_modules/@babel/parser/src/parser/statement.ts:702:19)\n      at Parser.parseStatementContent [as parseStatementLike] (../node_modules/@babel/parser/src/parser/statement.ts:482:17)\n      at Parser.parseStatementLike [as parseModuleItem] (../node_modules/@babel/parser/src/parser/statement.ts:419:17)\n      at Parser.parseModuleItem [as parseBlockOrModuleBlockBody] (../node_modules/@babel/parser/src/parser/statement.ts:1443:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (../node_modules/@babel/parser/src/parser/statement.ts:1417:10)\n      at Parser.parseBlockBody [as parseProgram] (../node_modules/@babel/parser/src/parser/statement.ts:229:10)\n      at Parser.parseProgram [as parseTopLevel] (../node_modules/@babel/parser/src/parser/statement.ts:203:25)\n      at Parser.parseTopLevel [as parse] (../node_modules/@babel/parser/src/parser/index.ts:88:25)\n      at parse (../node_modules/@babel/parser/src/index.ts:86:38)\n      at parser (../node_modules/@babel/core/src/parser/index.ts:29:19)\n          at parser.next (<anonymous>)\n      at normalizeFile (../node_modules/@babel/core/src/transformation/normalize-file.ts:50:24)\n          at normalizeFile.next (<anonymous>)\n      at run (../node_modules/@babel/core/src/transformation/index.ts:41:36)\n          at run.next (<anonymous>)\n      at transform (../node_modules/@babel/core/src/transform.ts:29:20)\n          at transform.next (<anonymous>)\n      at evaluateSync (../node_modules/gensync/index.js:251:28)\n      at sync (../node_modules/gensync/index.js:89:14)\n      at fn (../node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)\n      at transformSync (../node_modules/@babel/core/src/transform.ts:66:52)\n      at ScriptTransformer.transformSource (../node_modules/@jest/transform/build/ScriptTransformer.js:545:31)\n      at ScriptTransformer._transformAndBuildScript (../node_modules/@jest/transform/build/ScriptTransformer.js:674:40)\n      at ScriptTransformer.transform (../node_modules/@jest/transform/build/ScriptTransformer.js:726:19)\n\nPASS test/medicamentos.test.js\n  Medicamentos API - Pruebas Unitarias con PatrÃ³n AAA\n    GET /api/medicamentos\n      âˆš Debe retornar un array vacÃ­o inicialmente (63 ms)\n      âˆš Debe retornar todos los medicamentos registrados (62 ms)\n    POST /api/medicamentos\n      âˆš Debe crear un nuevo medicamento con datos vÃ¡lidos (44 ms)\n      âˆš Debe rechazar medicamento con datos incompletos (11 ms)\n    PUT /api/medicamentos/:id\n      âˆš Debe actualizar el precio de un medicamento existente (57 ms)\n      âˆš Debe actualizar mÃºltiples campos simultÃ¡neamente (33 ms)\n      âˆš Debe retornar 404 al actualizar medicamento inexistente (16 ms)\n    DELETE /api/medicamentos/:id\n      âˆš Debe eliminar un medicamento existente (37 ms)\n      âˆš Debe retornar 404 al eliminar medicamento inexistente (15 ms)\n\nFAIL test/especialidades.test.js\n  Especialidades API - Pruebas Unitarias con PatrÃ³n AAA\n    GET /api/especialidades\n      âˆš Debe retornar un array vacÃ­o inicialmente (85 ms)\n      Ã— Debe retornar todas las especialidades registradas (59 ms)\n    POST /api/especialidades\n      âˆš Debe crear una nueva especialidad con datos vÃ¡lidos (54 ms)\n      âˆš Debe rechazar especialidad sin nombre (18 ms)\n      Ã— Debe rechazar especialidad duplicada (case-insensitive) (43 ms)\n    PUT /api/especialidades/:id\n      Ã— Debe actualizar el nombre de una especialidad existente (33 ms)\n      âˆš Debe retornar 404 al actualizar especialidad inexistente (16 ms)\n    DELETE /api/especialidades/:id\n      Ã— Debe eliminar una especialidad existente (27 ms)\n      âˆš Debe retornar 404 al eliminar especialidad inexistente (9 ms)\n\n  â— Especialidades API - Pruebas Unitarias con PatrÃ³n AAA â€º GET /api/especialidades â€º Debe retornar todas las especialidades registradas\n\n    expect(received).toHaveLength(expected)\n\n    Expected length: 3\n    Received length: 0\n    Received array:  []\n\n    \u001b[0m \u001b[90m 42 |\u001b[39m             \u001b[90m// ASSERT: Verificar que retorna 3 especialidades (sin importar orden)\u001b[39m\n     \u001b[90m 43 |\u001b[39m             expect(res\u001b[33m.\u001b[39mstatusCode)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 44 |\u001b[39m             expect(res\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoHaveLength(\u001b[35m3\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 45 |\u001b[39m             \u001b[36mconst\u001b[39m names \u001b[33m=\u001b[39m res\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mmap(e \u001b[33m=>\u001b[39m e\u001b[33m.\u001b[39mname)\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m             expect(names)\u001b[33m.\u001b[39mtoContain(\u001b[32m'CardiologÃ­a'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 47 |\u001b[39m             expect(names)\u001b[33m.\u001b[39mtoContain(\u001b[32m'PediatrÃ­a'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toHaveLength (test/especialidades.test.js:44:30)\n\n  â— Especialidades API - Pruebas Unitarias con PatrÃ³n AAA â€º POST /api/especialidades â€º Debe rechazar especialidad duplicada (case-insensitive)\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 409\n    Received: 201\n\n    \u001b[0m \u001b[90m 84 |\u001b[39m\n     \u001b[90m 85 |\u001b[39m             \u001b[90m// ASSERT: Verificar error 409 (conflicto)\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 86 |\u001b[39m             expect(res\u001b[33m.\u001b[39mstatusCode)\u001b[33m.\u001b[39mtoBe(\u001b[35m409\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 87 |\u001b[39m             expect(res\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'message'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'Specialty already exists'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 88 |\u001b[39m         })\u001b[33m;\u001b[39m\n     \u001b[90m 89 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBe (test/especialidades.test.js:86:36)\n\n  â— Especialidades API - Pruebas Unitarias con PatrÃ³n AAA â€º PUT /api/especialidades/:id â€º Debe actualizar el nombre de una especialidad existente\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 404\n\n    \u001b[0m \u001b[90m 102 |\u001b[39m\n     \u001b[90m 103 |\u001b[39m             \u001b[90m// ASSERT: Verificar actualizaciÃ³n\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 104 |\u001b[39m             expect(updated\u001b[33m.\u001b[39mstatusCode)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 105 |\u001b[39m             expect(updated\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mname)\u001b[33m.\u001b[39mtoBe(\u001b[32m'OftalmologÃ­a PediÃ¡trica'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 106 |\u001b[39m         })\u001b[33m;\u001b[39m\n     \u001b[90m 107 |\u001b[39m\u001b[0m\n\n      at Object.toBe (test/especialidades.test.js:104:40)\n\n  â— Especialidades API - Pruebas Unitarias con PatrÃ³n AAA â€º DELETE /api/especialidades/:id â€º Debe eliminar una especialidad existente\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 404\n\n    \u001b[0m \u001b[90m 132 |\u001b[39m\n     \u001b[90m 133 |\u001b[39m             \u001b[90m// ASSERT: Verificar eliminaciÃ³n exitosa\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 134 |\u001b[39m             expect(deleted\u001b[33m.\u001b[39mstatusCode)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 135 |\u001b[39m             expect(deleted\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mname)\u001b[33m.\u001b[39mtoBe(\u001b[32m'CardiologÃ­a'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 136 |\u001b[39m             \n     \u001b[90m 137 |\u001b[39m             \u001b[90m// Verificar que ya no existe en la base de datos\u001b[39m\u001b[0m\n\n      at Object.toBe (test/especialidades.test.js:134:40)\n\nFAIL test/pacientes.test.js\n  Pacientes API - Pruebas Unitarias con PatrÃ³n AAA\n    GET /api/pacientes\n      âˆš Debe retornar una lista vacÃ­a inicialmente (80 ms)\n      âˆš Debe retornar todos los pacientes existentes (73 ms)\n    POST /api/pacientes\n      âˆš Debe crear un nuevo paciente con datos vÃ¡lidos (57 ms)\n      âˆš Debe rechazar paciente con datos incompletos (16 ms)\n    PUT /api/pacientes/:id\n      Ã— Debe actualizar un paciente existente (36 ms)\n      âˆš Debe actualizar mÃºltiples campos simultÃ¡neamente (25 ms)\n      âˆš Debe retornar 404 si el paciente no existe (9 ms)\n    DELETE /api/pacientes/:id\n      âˆš Debe eliminar un paciente existente (25 ms)\n      âˆš Debe retornar 404 al eliminar paciente inexistente (7 ms)\n\n  â— Pacientes API - Pruebas Unitarias con PatrÃ³n AAA â€º PUT /api/pacientes/:id â€º Debe actualizar un paciente existente\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 500\n\n    \u001b[0m \u001b[90m 102 |\u001b[39m\n     \u001b[90m 103 |\u001b[39m             \u001b[90m// ASSERT: Verificar actualizaciÃ³n\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 104 |\u001b[39m             expect(updated\u001b[33m.\u001b[39mstatusCode)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 105 |\u001b[39m             expect(updated\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39millness)\u001b[33m.\u001b[39mtoBe(\u001b[32m'MigraÃ±a'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 106 |\u001b[39m             expect(updated\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mname)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Ana'\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// Otros campos no cambian\u001b[39m\n     \u001b[90m 107 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBe (test/pacientes.test.js:104:40)\n\nPASS test/app.test.js (13.295 s)\n  Backend App API - Main Endpoints\n    âˆš OPTIONS request - should allow CORS with method OPTIONS (102 ms)\n    âˆš GET request - should include CORS headers (31 ms)\n    âˆš GET /nonexistent - should return 404 (41 ms)\n    âˆš GET /api/health - should return server status (17 ms)\n    âˆš GET /api/test-logs - should return test logs (16 ms)\n    âˆš POST /api/run-tests - should execute tests (9869 ms)\n\nTest Suites: 3 failed, 2 passed, 5 total\nTests:       5 failed, 28 passed, 33 total\nSnapshots:   0 total\nTime:        13.751 s, estimated 35 s\nRan all test suites.\n"
  },
  {
    "timestamp": "2026-02-12T02:26:12.990Z",
    "date": "11/2/2026, 21:26:12",
    "passed": 2,
    "failed": 3,
    "total": 5,
    "failedTests": [],
    "output": "\n> pruebas-unitarias-backend@1.0.0 test\n> jest --verbose\n\n  console.log\n    [dotenv@17.2.3] injecting env (3) from .env -- tip: âš™ï¸  enable debug logging with { debug: true }\n\n      at _log (../node_modules/dotenv/lib/main.js:142:11)\n\n  console.log\n    [dotenv@17.2.3] injecting env (3) from .env -- tip: ðŸ”‘ add access controls to secrets: https://dotenvx.com/ops\n\n      at _log (../node_modules/dotenv/lib/main.js:142:11)\n\n  console.log\n    [dotenv@17.2.3] injecting env (3) from .env -- tip: âš™ï¸  load multiple .env files with { path: ['.env.local', '.env'] }\n\n      at _log (../node_modules/dotenv/lib/main.js:142:11)\n\n  console.log\n    [dotenv@17.2.3] injecting env (3) from .env -- tip: ðŸ”„ add secrets lifecycle management: https://dotenvx.com/ops\n\n      at _log (../node_modules/dotenv/lib/main.js:142:11)\n\n  console.log\n    âœ… MongoDB conectado\n\n      at log (src/app.js:34:29)\n\n  console.log\n    âœ… MongoDB conectado\n\n      at log (src/app.js:34:29)\n\n  console.log\n    âœ… MongoDB conectado\n\n      at log (src/app.js:34:29)\n\n  console.log\n    âœ… MongoDB conectado\n\n      at log (src/app.js:34:29)\n\nFAIL test/doctores.test.js\n  â— Test suite failed to run\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     â€¢ If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     â€¢ If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     â€¢ To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     â€¢ If you need a custom transformation specify a \"transform\" option in your config.\n     â€¢ If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    SyntaxError: C:\\Users\\estef\\OneDrive\\Desktop\\git\\27854_P3_Proyecto\\Pruebas-Unitarias-Backend\\test\\doctores.test.js: Missing semicolon. (206:37)\n\n    \u001b[0m \u001b[90m 204 |\u001b[39m \u001b[32m            // ACT: Actualizar telÃ©fono y especialidad\u001b[39m\n     \u001b[90m 205 |\u001b[39m \u001b[32m            const updated = await request(app)\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 206 |\u001b[39m \u001b[32m                .put(`\u001b[39m\u001b[33m/\u001b[39mapi\u001b[33m/\u001b[39mdoctores\u001b[33m/\u001b[39m${id}\u001b[32m`)\u001b[39m\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 207 |\u001b[39m \u001b[32m                .send({ \u001b[39m\n     \u001b[90m 208 |\u001b[39m \u001b[32m                    phone: '0999999999',\u001b[39m\n     \u001b[90m 209 |\u001b[39m \u001b[32m                    specialty: 'NeurologÃ­a PediÃ¡trica',\u001b[39m\u001b[0m\n\n      at constructor (../node_modules/@babel/parser/src/parse-error.ts:95:45)\n      at Parser.toParseError [as raise] (../node_modules/@babel/parser/src/tokenizer/index.ts:1507:19)\n      at Parser.raise [as semicolon] (../node_modules/@babel/parser/src/parser/util.ts:149:10)\n      at Parser.semicolon [as parseExpressionStatement] (../node_modules/@babel/parser/src/parser/statement.ts:1363:10)\n      at Parser.parseExpressionStatement [as parseStatementContent] (../node_modules/@babel/parser/src/parser/statement.ts:702:19)\n      at Parser.parseStatementContent [as parseStatementLike] (../node_modules/@babel/parser/src/parser/statement.ts:482:17)\n      at Parser.parseStatementLike [as parseModuleItem] (../node_modules/@babel/parser/src/parser/statement.ts:419:17)\n      at Parser.parseModuleItem [as parseBlockOrModuleBlockBody] (../node_modules/@babel/parser/src/parser/statement.ts:1443:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (../node_modules/@babel/parser/src/parser/statement.ts:1417:10)\n      at Parser.parseBlockBody [as parseProgram] (../node_modules/@babel/parser/src/parser/statement.ts:229:10)\n      at Parser.parseProgram [as parseTopLevel] (../node_modules/@babel/parser/src/parser/statement.ts:203:25)\n      at Parser.parseTopLevel [as parse] (../node_modules/@babel/parser/src/parser/index.ts:88:25)\n      at parse (../node_modules/@babel/parser/src/index.ts:86:38)\n      at parser (../node_modules/@babel/core/src/parser/index.ts:29:19)\n          at parser.next (<anonymous>)\n      at normalizeFile (../node_modules/@babel/core/src/transformation/normalize-file.ts:50:24)\n          at normalizeFile.next (<anonymous>)\n      at run (../node_modules/@babel/core/src/transformation/index.ts:41:36)\n          at run.next (<anonymous>)\n      at transform (../node_modules/@babel/core/src/transform.ts:29:20)\n          at transform.next (<anonymous>)\n      at evaluateSync (../node_modules/gensync/index.js:251:28)\n      at sync (../node_modules/gensync/index.js:89:14)\n      at fn (../node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)\n      at transformSync (../node_modules/@babel/core/src/transform.ts:66:52)\n      at ScriptTransformer.transformSource (../node_modules/@jest/transform/build/ScriptTransformer.js:545:31)\n      at ScriptTransformer._transformAndBuildScript (../node_modules/@jest/transform/build/ScriptTransformer.js:674:40)\n      at ScriptTransformer.transform (../node_modules/@jest/transform/build/ScriptTransformer.js:726:19)\n\nPASS test/medicamentos.test.js\n  Medicamentos API - Pruebas Unitarias con PatrÃ³n AAA\n    GET /api/medicamentos\n      âˆš Debe retornar un array vacÃ­o inicialmente (65 ms)\n      âˆš Debe retornar todos los medicamentos registrados (37 ms)\n    POST /api/medicamentos\n      âˆš Debe crear un nuevo medicamento con datos vÃ¡lidos (43 ms)\n      âˆš Debe rechazar medicamento con datos incompletos (11 ms)\n    PUT /api/medicamentos/:id\n      âˆš Debe actualizar el precio de un medicamento existente (31 ms)\n      âˆš Debe actualizar mÃºltiples campos simultÃ¡neamente (27 ms)\n      âˆš Debe retornar 404 al actualizar medicamento inexistente (21 ms)\n    DELETE /api/medicamentos/:id\n      âˆš Debe eliminar un medicamento existente (38 ms)\n      âˆš Debe retornar 404 al eliminar medicamento inexistente (13 ms)\n\nFAIL test/pacientes.test.js\n  Pacientes API - Pruebas Unitarias con PatrÃ³n AAA\n    GET /api/pacientes\n      âˆš Debe retornar una lista vacÃ­a inicialmente (55 ms)\n      Ã— Debe retornar todos los pacientes existentes (38 ms)\n    POST /api/pacientes\n      âˆš Debe crear un nuevo paciente con datos vÃ¡lidos (41 ms)\n      âˆš Debe rechazar paciente con datos incompletos (10 ms)\n    PUT /api/pacientes/:id\n      âˆš Debe actualizar un paciente existente (38 ms)\n      âˆš Debe actualizar mÃºltiples campos simultÃ¡neamente (30 ms)\n      âˆš Debe retornar 404 si el paciente no existe (15 ms)\n    DELETE /api/pacientes/:id\n      âˆš Debe eliminar un paciente existente (43 ms)\n      âˆš Debe retornar 404 al eliminar paciente inexistente (12 ms)\n\n  â— Pacientes API - Pruebas Unitarias con PatrÃ³n AAA â€º GET /api/pacientes â€º Debe retornar todos los pacientes existentes\n\n    expect(received).toHaveLength(expected)\n\n    Expected length: 2\n    Received length: 0\n    Received array:  []\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m             \u001b[90m// ASSERT: Verificar que retorna 2 pacientes (sin importar orden)\u001b[39m\n     \u001b[90m 42 |\u001b[39m             expect(res\u001b[33m.\u001b[39mstatusCode)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m             expect(res\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoHaveLength(\u001b[35m2\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m             \u001b[36mconst\u001b[39m names \u001b[33m=\u001b[39m res\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mmap(p \u001b[33m=>\u001b[39m p\u001b[33m.\u001b[39mname)\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m             expect(names)\u001b[33m.\u001b[39mtoContain(\u001b[32m'Juan'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m             expect(names)\u001b[33m.\u001b[39mtoContain(\u001b[32m'MarÃ­a'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toHaveLength (test/pacientes.test.js:43:30)\n\nFAIL test/especialidades.test.js\n  Especialidades API - Pruebas Unitarias con PatrÃ³n AAA\n    GET /api/especialidades\n      âˆš Debe retornar un array vacÃ­o inicialmente (63 ms)\n      Ã— Debe retornar todas las especialidades registradas (41 ms)\n    POST /api/especialidades\n      âˆš Debe crear una nueva especialidad con datos vÃ¡lidos (43 ms)\n      âˆš Debe rechazar especialidad sin nombre (14 ms)\n      âˆš Debe rechazar especialidad duplicada (case-insensitive) (31 ms)\n    PUT /api/especialidades/:id\n      âˆš Debe actualizar el nombre de una especialidad existente (37 ms)\n      âˆš Debe retornar 404 al actualizar especialidad inexistente (16 ms)\n    DELETE /api/especialidades/:id\n      âˆš Debe eliminar una especialidad existente (41 ms)\n      âˆš Debe retornar 404 al eliminar especialidad inexistente (11 ms)\n\n  â— Especialidades API - Pruebas Unitarias con PatrÃ³n AAA â€º GET /api/especialidades â€º Debe retornar todas las especialidades registradas\n\n    expect(received).toHaveLength(expected)\n\n    Expected length: 3\n    Received length: 0\n    Received array:  []\n\n    \u001b[0m \u001b[90m 42 |\u001b[39m             \u001b[90m// ASSERT: Verificar que retorna 3 especialidades (sin importar orden)\u001b[39m\n     \u001b[90m 43 |\u001b[39m             expect(res\u001b[33m.\u001b[39mstatusCode)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 44 |\u001b[39m             expect(res\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoHaveLength(\u001b[35m3\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 45 |\u001b[39m             \u001b[36mconst\u001b[39m names \u001b[33m=\u001b[39m res\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mmap(e \u001b[33m=>\u001b[39m e\u001b[33m.\u001b[39mname)\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m             expect(names)\u001b[33m.\u001b[39mtoContain(\u001b[32m'CardiologÃ­a'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 47 |\u001b[39m             expect(names)\u001b[33m.\u001b[39mtoContain(\u001b[32m'PediatrÃ­a'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toHaveLength (test/especialidades.test.js:44:30)\n\nPASS test/app.test.js (8.315 s)\n  Backend App API - Main Endpoints\n    âˆš OPTIONS request - should allow CORS with method OPTIONS (40 ms)\n    âˆš GET request - should include CORS headers (28 ms)\n    âˆš GET /nonexistent - should return 404 (23 ms)\n    âˆš GET /api/health - should return server status (19 ms)\n    âˆš GET /api/test-logs - should return test logs (18 ms)\n    âˆš POST /api/run-tests - should execute tests (5455 ms)\n\nTest Suites: 3 failed, 2 passed, 5 total\nTests:       2 failed, 31 passed, 33 total\nSnapshots:   0 total\nTime:        8.737 s, estimated 35 s\nRan all test suites.\n"
  },
  {
    "timestamp": "2026-02-12T02:26:12.814Z",
    "date": "11/2/2026, 21:26:12",
    "passed": 3,
    "failed": 2,
    "total": 5,
    "failedTests": [],
    "output": "\n> pruebas-unitarias-backend@1.0.0 test\n> jest --verbose\n\n  console.log\n    [dotenv@17.2.3] injecting env (3) from .env -- tip: âš™ï¸  write to custom object with { processEnv: myObject }\n\n      at _log (../node_modules/dotenv/lib/main.js:142:11)\n\n  console.log\n    [dotenv@17.2.3] injecting env (3) from .env -- tip: ðŸ› ï¸  run anywhere with `dotenvx run -- yourcommand`\n\n      at _log (../node_modules/dotenv/lib/main.js:142:11)\n\n  console.log\n    [dotenv@17.2.3] injecting env (3) from .env -- tip: ðŸ—‚ï¸ backup and recover secrets: https://dotenvx.com/ops\n\n      at _log (../node_modules/dotenv/lib/main.js:142:11)\n\n  console.log\n    [dotenv@17.2.3] injecting env (3) from .env -- tip: ðŸ” prevent building .env in docker: https://dotenvx.com/prebuild\n\n      at _log (../node_modules/dotenv/lib/main.js:142:11)\n\n  console.log\n    âœ… MongoDB conectado\n\n      at log (src/app.js:34:29)\n\n  console.log\n    âœ… MongoDB conectado\n\n      at log (src/app.js:34:29)\n\n  console.log\n    âœ… MongoDB conectado\n\n      at log (src/app.js:34:29)\n\n  console.log\n    âœ… MongoDB conectado\n\n      at log (src/app.js:34:29)\n\nFAIL test/doctores.test.js\n  â— Test suite failed to run\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     â€¢ If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     â€¢ If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     â€¢ To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     â€¢ If you need a custom transformation specify a \"transform\" option in your config.\n     â€¢ If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    SyntaxError: C:\\Users\\estef\\OneDrive\\Desktop\\git\\27854_P3_Proyecto\\Pruebas-Unitarias-Backend\\test\\doctores.test.js: Missing semicolon. (206:37)\n\n    \u001b[0m \u001b[90m 204 |\u001b[39m \u001b[32m            // ACT: Actualizar telÃ©fono y especialidad\u001b[39m\n     \u001b[90m 205 |\u001b[39m \u001b[32m            const updated = await request(app)\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 206 |\u001b[39m \u001b[32m                .put(`\u001b[39m\u001b[33m/\u001b[39mapi\u001b[33m/\u001b[39mdoctores\u001b[33m/\u001b[39m${id}\u001b[32m`)\u001b[39m\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 207 |\u001b[39m \u001b[32m                .send({ \u001b[39m\n     \u001b[90m 208 |\u001b[39m \u001b[32m                    phone: '0999999999',\u001b[39m\n     \u001b[90m 209 |\u001b[39m \u001b[32m                    specialty: 'NeurologÃ­a PediÃ¡trica',\u001b[39m\u001b[0m\n\n      at constructor (../node_modules/@babel/parser/src/parse-error.ts:95:45)\n      at Parser.toParseError [as raise] (../node_modules/@babel/parser/src/tokenizer/index.ts:1507:19)\n      at Parser.raise [as semicolon] (../node_modules/@babel/parser/src/parser/util.ts:149:10)\n      at Parser.semicolon [as parseExpressionStatement] (../node_modules/@babel/parser/src/parser/statement.ts:1363:10)\n      at Parser.parseExpressionStatement [as parseStatementContent] (../node_modules/@babel/parser/src/parser/statement.ts:702:19)\n      at Parser.parseStatementContent [as parseStatementLike] (../node_modules/@babel/parser/src/parser/statement.ts:482:17)\n      at Parser.parseStatementLike [as parseModuleItem] (../node_modules/@babel/parser/src/parser/statement.ts:419:17)\n      at Parser.parseModuleItem [as parseBlockOrModuleBlockBody] (../node_modules/@babel/parser/src/parser/statement.ts:1443:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (../node_modules/@babel/parser/src/parser/statement.ts:1417:10)\n      at Parser.parseBlockBody [as parseProgram] (../node_modules/@babel/parser/src/parser/statement.ts:229:10)\n      at Parser.parseProgram [as parseTopLevel] (../node_modules/@babel/parser/src/parser/statement.ts:203:25)\n      at Parser.parseTopLevel [as parse] (../node_modules/@babel/parser/src/parser/index.ts:88:25)\n      at parse (../node_modules/@babel/parser/src/index.ts:86:38)\n      at parser (../node_modules/@babel/core/src/parser/index.ts:29:19)\n          at parser.next (<anonymous>)\n      at normalizeFile (../node_modules/@babel/core/src/transformation/normalize-file.ts:50:24)\n          at normalizeFile.next (<anonymous>)\n      at run (../node_modules/@babel/core/src/transformation/index.ts:41:36)\n          at run.next (<anonymous>)\n      at transform (../node_modules/@babel/core/src/transform.ts:29:20)\n          at transform.next (<anonymous>)\n      at evaluateSync (../node_modules/gensync/index.js:251:28)\n      at sync (../node_modules/gensync/index.js:89:14)\n      at fn (../node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)\n      at transformSync (../node_modules/@babel/core/src/transform.ts:66:52)\n      at ScriptTransformer.transformSource (../node_modules/@jest/transform/build/ScriptTransformer.js:545:31)\n      at ScriptTransformer._transformAndBuildScript (../node_modules/@jest/transform/build/ScriptTransformer.js:674:40)\n      at ScriptTransformer.transform (../node_modules/@jest/transform/build/ScriptTransformer.js:726:19)\n\nFAIL test/especialidades.test.js\n  Especialidades API - Pruebas Unitarias con PatrÃ³n AAA\n    GET /api/especialidades\n      âˆš Debe retornar un array vacÃ­o inicialmente (81 ms)\n      Ã— Debe retornar todas las especialidades registradas (35 ms)\n    POST /api/especialidades\n      âˆš Debe crear una nueva especialidad con datos vÃ¡lidos (43 ms)\n      âˆš Debe rechazar especialidad sin nombre (12 ms)\n      âˆš Debe rechazar especialidad duplicada (case-insensitive) (27 ms)\n    PUT /api/especialidades/:id\n      âˆš Debe actualizar el nombre de una especialidad existente (29 ms)\n      âˆš Debe retornar 404 al actualizar especialidad inexistente (14 ms)\n    DELETE /api/especialidades/:id\n      âˆš Debe eliminar una especialidad existente (38 ms)\n      âˆš Debe retornar 404 al eliminar especialidad inexistente (10 ms)\n\n  â— Especialidades API - Pruebas Unitarias con PatrÃ³n AAA â€º GET /api/especialidades â€º Debe retornar todas las especialidades registradas\n\n    expect(received).toHaveLength(expected)\n\n    Expected length: 3\n    Received length: 0\n    Received array:  []\n\n    \u001b[0m \u001b[90m 42 |\u001b[39m             \u001b[90m// ASSERT: Verificar que retorna 3 especialidades (sin importar orden)\u001b[39m\n     \u001b[90m 43 |\u001b[39m             expect(res\u001b[33m.\u001b[39mstatusCode)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 44 |\u001b[39m             expect(res\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoHaveLength(\u001b[35m3\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 45 |\u001b[39m             \u001b[36mconst\u001b[39m names \u001b[33m=\u001b[39m res\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mmap(e \u001b[33m=>\u001b[39m e\u001b[33m.\u001b[39mname)\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m             expect(names)\u001b[33m.\u001b[39mtoContain(\u001b[32m'CardiologÃ­a'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 47 |\u001b[39m             expect(names)\u001b[33m.\u001b[39mtoContain(\u001b[32m'PediatrÃ­a'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toHaveLength (test/especialidades.test.js:44:30)\n\nPASS test/pacientes.test.js\n  Pacientes API - Pruebas Unitarias con PatrÃ³n AAA\n    GET /api/pacientes\n      âˆš Debe retornar una lista vacÃ­a inicialmente (68 ms)\n      âˆš Debe retornar todos los pacientes existentes (42 ms)\n    POST /api/pacientes\n      âˆš Debe crear un nuevo paciente con datos vÃ¡lidos (41 ms)\n      âˆš Debe rechazar paciente con datos incompletos (9 ms)\n    PUT /api/pacientes/:id\n      âˆš Debe actualizar un paciente existente (29 ms)\n      âˆš Debe actualizar mÃºltiples campos simultÃ¡neamente (27 ms)\n      âˆš Debe retornar 404 si el paciente no existe (12 ms)\n    DELETE /api/pacientes/:id\n      âˆš Debe eliminar un paciente existente (29 ms)\n      âˆš Debe retornar 404 al eliminar paciente inexistente (10 ms)\n\nPASS test/medicamentos.test.js\n  Medicamentos API - Pruebas Unitarias con PatrÃ³n AAA\n    GET /api/medicamentos\n      âˆš Debe retornar un array vacÃ­o inicialmente (62 ms)\n      âˆš Debe retornar todos los medicamentos registrados (42 ms)\n    POST /api/medicamentos\n      âˆš Debe crear un nuevo medicamento con datos vÃ¡lidos (39 ms)\n      âˆš Debe rechazar medicamento con datos incompletos (9 ms)\n    PUT /api/medicamentos/:id\n      âˆš Debe actualizar el precio de un medicamento existente (28 ms)\n      âˆš Debe actualizar mÃºltiples campos simultÃ¡neamente (30 ms)\n      âˆš Debe retornar 404 al actualizar medicamento inexistente (13 ms)\n    DELETE /api/medicamentos/:id\n      âˆš Debe eliminar un medicamento existente (32 ms)\n      âˆš Debe retornar 404 al eliminar medicamento inexistente (10 ms)\n\nPASS test/app.test.js\n  Backend App API - Main Endpoints\n    âˆš OPTIONS request - should allow CORS with method OPTIONS (65 ms)\n    âˆš GET request - should include CORS headers (28 ms)\n    âˆš GET /nonexistent - should return 404 (18 ms)\n    âˆš GET /api/health - should return server status (16 ms)\n    âˆš GET /api/test-logs - should return test logs (18 ms)\n    âˆš POST /api/run-tests - should execute tests (538 ms)\n\nTest Suites: 2 failed, 3 passed, 5 total\nTests:       1 failed, 32 passed, 33 total\nSnapshots:   0 total\nTime:        4.117 s, estimated 35 s\nRan all test suites.\n"
  },
  {
    "timestamp": "2026-02-12T02:26:12.641Z",
    "date": "11/2/2026, 21:26:12",
    "passed": 0,
    "failed": 0,
    "total": 0,
    "failedTests": [],
    "output": "\n> pruebas-unitarias-backend@1.0.0 test\n> jest --verbose\n\n\"jest\" no se reconoce como un comando interno o externo,\r\nprograma o archivo por lotes ejecutable.\r\n"
  },
  {
    "timestamp": "2026-02-12T02:25:39.368Z",
    "date": "11/2/2026, 21:25:39",
    "passed": 2,
    "failed": 3,
    "total": 5,
    "failedTests": [],
    "output": "\n> pruebas-unitarias-backend@1.0.0 test\n> jest --verbose\n\n  console.log\n    [dotenv@17.2.3] injecting env (3) from .env -- tip: âš™ï¸  write to custom object with { processEnv: myObject }\n\n      at _log (../node_modules/dotenv/lib/main.js:142:11)\n\n  console.log\n    [dotenv@17.2.3] injecting env (3) from .env -- tip: ðŸ” encrypt with Dotenvx: https://dotenvx.com\n\n      at _log (../node_modules/dotenv/lib/main.js:142:11)\n\n  console.log\n    [dotenv@17.2.3] injecting env (3) from .env -- tip: âš™ï¸  load multiple .env files with { path: ['.env.local', '.env'] }\n\n      at _log (../node_modules/dotenv/lib/main.js:142:11)\n\n  console.log\n    [dotenv@17.2.3] injecting env (3) from .env -- tip: ðŸ“¡ add observability to secrets: https://dotenvx.com/ops\n\n      at _log (../node_modules/dotenv/lib/main.js:142:11)\n\n  console.log\n    âœ… MongoDB conectado\n\n      at log (src/app.js:34:29)\n\n  console.log\n    âœ… MongoDB conectado\n\n      at log (src/app.js:34:29)\n\n  console.log\n    âœ… MongoDB conectado\n\n      at log (src/app.js:34:29)\n\n  console.log\n    âœ… MongoDB conectado\n\n      at log (src/app.js:34:29)\n\nFAIL test/doctores.test.js\n  â— Test suite failed to run\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     â€¢ If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     â€¢ If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     â€¢ To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     â€¢ If you need a custom transformation specify a \"transform\" option in your config.\n     â€¢ If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    SyntaxError: C:\\Users\\estef\\OneDrive\\Desktop\\git\\27854_P3_Proyecto\\Pruebas-Unitarias-Backend\\test\\doctores.test.js: Missing semicolon. (206:37)\n\n    \u001b[0m \u001b[90m 204 |\u001b[39m \u001b[32m            // ACT: Actualizar telÃ©fono y especialidad\u001b[39m\n     \u001b[90m 205 |\u001b[39m \u001b[32m            const updated = await request(app)\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 206 |\u001b[39m \u001b[32m                .put(`\u001b[39m\u001b[33m/\u001b[39mapi\u001b[33m/\u001b[39mdoctores\u001b[33m/\u001b[39m${id}\u001b[32m`)\u001b[39m\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 207 |\u001b[39m \u001b[32m                .send({ \u001b[39m\n     \u001b[90m 208 |\u001b[39m \u001b[32m                    phone: '0999999999',\u001b[39m\n     \u001b[90m 209 |\u001b[39m \u001b[32m                    specialty: 'NeurologÃ­a PediÃ¡trica',\u001b[39m\u001b[0m\n\n      at constructor (../node_modules/@babel/parser/src/parse-error.ts:95:45)\n      at Parser.toParseError [as raise] (../node_modules/@babel/parser/src/tokenizer/index.ts:1507:19)\n      at Parser.raise [as semicolon] (../node_modules/@babel/parser/src/parser/util.ts:149:10)\n      at Parser.semicolon [as parseExpressionStatement] (../node_modules/@babel/parser/src/parser/statement.ts:1363:10)\n      at Parser.parseExpressionStatement [as parseStatementContent] (../node_modules/@babel/parser/src/parser/statement.ts:702:19)\n      at Parser.parseStatementContent [as parseStatementLike] (../node_modules/@babel/parser/src/parser/statement.ts:482:17)\n      at Parser.parseStatementLike [as parseModuleItem] (../node_modules/@babel/parser/src/parser/statement.ts:419:17)\n      at Parser.parseModuleItem [as parseBlockOrModuleBlockBody] (../node_modules/@babel/parser/src/parser/statement.ts:1443:16)\n      at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (../node_modules/@babel/parser/src/parser/statement.ts:1417:10)\n      at Parser.parseBlockBody [as parseProgram] (../node_modules/@babel/parser/src/parser/statement.ts:229:10)\n      at Parser.parseProgram [as parseTopLevel] (../node_modules/@babel/parser/src/parser/statement.ts:203:25)\n      at Parser.parseTopLevel [as parse] (../node_modules/@babel/parser/src/parser/index.ts:88:25)\n      at parse (../node_modules/@babel/parser/src/index.ts:86:38)\n      at parser (../node_modules/@babel/core/src/parser/index.ts:29:19)\n          at parser.next (<anonymous>)\n      at normalizeFile (../node_modules/@babel/core/src/transformation/normalize-file.ts:50:24)\n          at normalizeFile.next (<anonymous>)\n      at run (../node_modules/@babel/core/src/transformation/index.ts:41:36)\n          at run.next (<anonymous>)\n      at transform (../node_modules/@babel/core/src/transform.ts:29:20)\n          at transform.next (<anonymous>)\n      at evaluateSync (../node_modules/gensync/index.js:251:28)\n      at sync (../node_modules/gensync/index.js:89:14)\n      at fn (../node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)\n      at transformSync (../node_modules/@babel/core/src/transform.ts:66:52)\n      at ScriptTransformer.transformSource (../node_modules/@jest/transform/build/ScriptTransformer.js:545:31)\n      at ScriptTransformer._transformAndBuildScript (../node_modules/@jest/transform/build/ScriptTransformer.js:674:40)\n      at ScriptTransformer.transform (../node_modules/@jest/transform/build/ScriptTransformer.js:726:19)\n\nPASS test/especialidades.test.js\n  Especialidades API - Pruebas Unitarias con PatrÃ³n AAA\n    GET /api/especialidades\n      âˆš Debe retornar un array vacÃ­o inicialmente (89 ms)\n      âˆš Debe retornar todas las especialidades registradas (52 ms)\n    POST /api/especialidades\n      âˆš Debe crear una nueva especialidad con datos vÃ¡lidos (54 ms)\n      âˆš Debe rechazar especialidad sin nombre (16 ms)\n      âˆš Debe rechazar especialidad duplicada (case-insensitive) (32 ms)\n    PUT /api/especialidades/:id\n      âˆš Debe actualizar el nombre de una especialidad existente (38 ms)\n      âˆš Debe retornar 404 al actualizar especialidad inexistente (15 ms)\n    DELETE /api/especialidades/:id\n      âˆš Debe eliminar una especialidad existente (40 ms)\n      âˆš Debe retornar 404 al eliminar especialidad inexistente (14 ms)\n\nPASS test/pacientes.test.js\n  Pacientes API - Pruebas Unitarias con PatrÃ³n AAA\n    GET /api/pacientes\n      âˆš Debe retornar una lista vacÃ­a inicialmente (90 ms)\n      âˆš Debe retornar todos los pacientes existentes (52 ms)\n    POST /api/pacientes\n      âˆš Debe crear un nuevo paciente con datos vÃ¡lidos (54 ms)\n      âˆš Debe rechazar paciente con datos incompletos (16 ms)\n    PUT /api/pacientes/:id\n      âˆš Debe actualizar un paciente existente (41 ms)\n      âˆš Debe actualizar mÃºltiples campos simultÃ¡neamente (34 ms)\n      âˆš Debe retornar 404 si el paciente no existe (14 ms)\n    DELETE /api/pacientes/:id\n      âˆš Debe eliminar un paciente existente (40 ms)\n      âˆš Debe retornar 404 al eliminar paciente inexistente (13 ms)\n\nFAIL test/medicamentos.test.js\n  Medicamentos API - Pruebas Unitarias con PatrÃ³n AAA\n    GET /api/medicamentos\n      âˆš Debe retornar un array vacÃ­o inicialmente (83 ms)\n      Ã— Debe retornar todos los medicamentos registrados (46 ms)\n    POST /api/medicamentos\n      âˆš Debe crear un nuevo medicamento con datos vÃ¡lidos (52 ms)\n      âˆš Debe rechazar medicamento con datos incompletos (12 ms)\n    PUT /api/medicamentos/:id\n      âˆš Debe actualizar el precio de un medicamento existente (42 ms)\n      âˆš Debe actualizar mÃºltiples campos simultÃ¡neamente (31 ms)\n      âˆš Debe retornar 404 al actualizar medicamento inexistente (14 ms)\n    DELETE /api/medicamentos/:id\n      âˆš Debe eliminar un medicamento existente (38 ms)\n      âˆš Debe retornar 404 al eliminar medicamento inexistente (12 ms)\n\n  â— Medicamentos API - Pruebas Unitarias con PatrÃ³n AAA â€º GET /api/medicamentos â€º Debe retornar todos los medicamentos registrados\n\n    expect(received).toHaveLength(expected)\n\n    Expected length: 2\n    Received length: 0\n    Received array:  []\n\n    \u001b[0m \u001b[90m 55 |\u001b[39m             \u001b[90m// ASSERT: Verificar que retorna 2 medicamentos (sin importar orden)\u001b[39m\n     \u001b[90m 56 |\u001b[39m             expect(res\u001b[33m.\u001b[39mstatusCode)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 57 |\u001b[39m             expect(res\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoHaveLength(\u001b[35m2\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 58 |\u001b[39m             \u001b[36mconst\u001b[39m names \u001b[33m=\u001b[39m res\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mmap(m \u001b[33m=>\u001b[39m m\u001b[33m.\u001b[39mname)\u001b[33m;\u001b[39m\n     \u001b[90m 59 |\u001b[39m             expect(names)\u001b[33m.\u001b[39mtoContain(\u001b[32m'Paracetamol'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 60 |\u001b[39m             expect(names)\u001b[33m.\u001b[39mtoContain(\u001b[32m'Ibuprofeno'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toHaveLength (test/medicamentos.test.js:57:30)\n\nFAIL test/app.test.js (34.102 s)\n  Backend App API - Main Endpoints\n    âˆš OPTIONS request - should allow CORS with method OPTIONS (62 ms)\n    âˆš GET request - should include CORS headers (37 ms)\n    âˆš GET /nonexistent - should return 404 (30 ms)\n    âˆš GET /api/health - should return server status (22 ms)\n    âˆš GET /api/test-logs - should return test logs (22 ms)\n    Ã— POST /api/run-tests - should execute tests (30021 ms)\n\n  â— Backend App API - Main Endpoints â€º POST /api/run-tests - should execute tests\n\n    thrown: \"Exceeded timeout of 30000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\n    \u001b[0m \u001b[90m 69 |\u001b[39m\n     \u001b[90m 70 |\u001b[39m     \u001b[90m// Test run-tests endpoint\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 71 |\u001b[39m     test(\u001b[32m'POST /api/run-tests - should execute tests'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m    |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 72 |\u001b[39m         \u001b[36mconst\u001b[39m res \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\n     \u001b[90m 73 |\u001b[39m             \u001b[33m.\u001b[39mpost(\u001b[32m'/api/run-tests'\u001b[39m)\n     \u001b[90m 74 |\u001b[39m             \u001b[33m.\u001b[39msend({ failTests\u001b[33m:\u001b[39m \u001b[36mfalse\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at test (test/app.test.js:71:5)\n      at Object.describe (test/app.test.js:9:1)\n\nA worker process has failed to exit gracefully and has been force exited. This is likely caused by tests leaking due to improper teardown. Try running with --detectOpenHandles to find leaks. Active timers can also cause this, ensure that .unref() was called on them.\nTest Suites: 3 failed, 2 passed, 5 total\nTests:       2 failed, 31 passed, 33 total\nSnapshots:   0 total\nTime:        35.055 s\nRan all test suites.\n"
  }
]