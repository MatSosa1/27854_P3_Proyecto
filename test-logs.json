[
  {
    "timestamp": "2026-02-12T02:45:54.730Z",
    "date": "11/2/2026, 21:45:54",
    "passed": 12,
    "failed": 2,
    "total": 14,
    "failedTests": [],
    "output": "\n> hospital-api-backend@1.0.0 test\n> jest --runInBand\n\nPASS Pruebas-Unitarias-Frontend/src/specialty.spec.ts\nPASS test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üì° add observability to secrets: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/app.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  load multiple .env files with { path: ['.env.local', '.env'] }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  enable debug logging with { debug: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nFAIL test/app.test.js (10.631 s)\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîë add access controls to secrets: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\n  ‚óè App API - Main Endpoints ‚Ä∫ POST /api/run-tests - should return success\n\n    thrown: \"Exceeded timeout of 10000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\n    \u001b[0m \u001b[90m 190 |\u001b[39m\n     \u001b[90m 191 |\u001b[39m     \u001b[90m// Test run-tests endpoint success\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 192 |\u001b[39m     test(\u001b[32m'POST /api/run-tests - should return success'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m     |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 193 |\u001b[39m         \u001b[36mconst\u001b[39m res \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\n     \u001b[90m 194 |\u001b[39m             \u001b[33m.\u001b[39mpost(\u001b[32m'/api/run-tests'\u001b[39m)\n     \u001b[90m 195 |\u001b[39m             \u001b[33m.\u001b[39msend({ failTests\u001b[33m:\u001b[39m [] })\u001b[33m;\u001b[39m\u001b[0m\n\n      at test/app.test.js:192:5\n      at Object.<anonymous> (test/app.test.js:9:1)\n\nPASS Pruebas-Unitarias-Backend/test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  load multiple .env files with { path: ['.env.local', '.env'] }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîê encrypt with Dotenvx: https://dotenvx.com\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  enable debug logging with { debug: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nFAIL test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚úÖ audit secrets and track compliance: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\n  ‚óè Especialidades API ‚Ä∫ should reject duplicate specialty\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 409\n    Received: 201\n\n    \u001b[0m \u001b[90m 47 |\u001b[39m         \u001b[36mconst\u001b[39m res \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\u001b[33m.\u001b[39mpost(\u001b[32m'/api/especialidades'\u001b[39m)\u001b[33m.\u001b[39msend({ name\u001b[33m:\u001b[39m \u001b[32m'cardiology'\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 48 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 49 |\u001b[39m         expect(res\u001b[33m.\u001b[39mstatusCode)\u001b[33m.\u001b[39mtoBe(\u001b[35m409\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 50 |\u001b[39m         expect(res\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'message'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'Specialty already exists'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 51 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 52 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (test/especialidades.test.js:49:32)\n\n  ‚óè Especialidades API ‚Ä∫ PUT /api/especialidades/:id should update an existing specialty\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 500\n\n    \u001b[0m \u001b[90m 61 |\u001b[39m             \u001b[33m.\u001b[39msend({ name\u001b[33m:\u001b[39m \u001b[32m'Oftalmolog√≠a Corregida'\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 62 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 63 |\u001b[39m         expect(updated\u001b[33m.\u001b[39mstatusCode)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 64 |\u001b[39m         expect(updated\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mname)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Oftalmolog√≠a Corregida'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 65 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 66 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (test/especialidades.test.js:63:36)\n\nPASS test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚úÖ audit secrets and track compliance: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üóÇÔ∏è backup and recover secrets: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS Pruebas-Unitarias-Frontend/src/medicine.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/patient.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/doctor.spec.ts\n\nTest Suites: 2 failed, 12 passed, 14 total\nTests:       3 failed, 187 passed, 190 total\nSnapshots:   0 total\nTime:        19.047 s\nRan all test suites.\nJest did not exit one second after the test run has completed.\n\n'This usually means that there are asynchronous operations that weren't stopped in your tests. Consider running Jest with `--detectOpenHandles` to troubleshoot this issue.\n"
  },
  {
    "timestamp": "2026-02-12T02:45:54.642Z",
    "date": "11/2/2026, 21:45:54",
    "passed": 13,
    "failed": 1,
    "total": 14,
    "failedTests": [],
    "output": "\n> hospital-api-backend@1.0.0 test\n> jest --runInBand\n\nPASS Pruebas-Unitarias-Frontend/src/specialty.spec.ts\nPASS test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîÑ add secrets lifecycle management: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/app.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîê prevent building .env in docker: https://dotenvx.com/prebuild\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîê encrypt with Dotenvx: https://dotenvx.com\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nFAIL test/app.test.js (10.793 s)\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  load multiple .env files with { path: ['.env.local', '.env'] }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\n  ‚óè App API - Main Endpoints ‚Ä∫ POST /api/run-tests - should return success\n\n    thrown: \"Exceeded timeout of 10000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\n    \u001b[0m \u001b[90m 190 |\u001b[39m\n     \u001b[90m 191 |\u001b[39m     \u001b[90m// Test run-tests endpoint success\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 192 |\u001b[39m     test(\u001b[32m'POST /api/run-tests - should return success'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m     |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 193 |\u001b[39m         \u001b[36mconst\u001b[39m res \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\n     \u001b[90m 194 |\u001b[39m             \u001b[33m.\u001b[39mpost(\u001b[32m'/api/run-tests'\u001b[39m)\n     \u001b[90m 195 |\u001b[39m             \u001b[33m.\u001b[39msend({ failTests\u001b[33m:\u001b[39m [] })\u001b[33m;\u001b[39m\u001b[0m\n\n      at test/app.test.js:192:5\n      at Object.<anonymous> (test/app.test.js:9:1)\n\nPASS Pruebas-Unitarias-Backend/test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîë add access controls to secrets: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîê encrypt with Dotenvx: https://dotenvx.com\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîê encrypt with Dotenvx: https://dotenvx.com\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  suppress all logs with { quiet: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  enable debug logging with { debug: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üì° add observability to secrets: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS Pruebas-Unitarias-Frontend/src/medicine.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/patient.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/doctor.spec.ts\n\nTest Suites: 1 failed, 13 passed, 14 total\nTests:       1 failed, 189 passed, 190 total\nSnapshots:   0 total\nTime:        18.61 s\nRan all test suites.\nJest did not exit one second after the test run has completed.\n\n'This usually means that there are asynchronous operations that weren't stopped in your tests. Consider running Jest with `--detectOpenHandles` to troubleshoot this issue.\n"
  },
  {
    "timestamp": "2026-02-12T02:45:54.557Z",
    "date": "11/2/2026, 21:45:54",
    "passed": 13,
    "failed": 1,
    "total": 14,
    "failedTests": [],
    "output": "\n> hospital-api-backend@1.0.0 test\n> jest --runInBand\n\nPASS Pruebas-Unitarias-Frontend/src/specialty.spec.ts\nPASS test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîê encrypt with Dotenvx: https://dotenvx.com\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/app.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîë add access controls to secrets: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚úÖ audit secrets and track compliance: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nFAIL test/app.test.js (10.824 s)\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  enable debug logging with { debug: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\n  ‚óè App API - Main Endpoints ‚Ä∫ POST /api/run-tests - should return success\n\n    thrown: \"Exceeded timeout of 10000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\n    \u001b[0m \u001b[90m 190 |\u001b[39m\n     \u001b[90m 191 |\u001b[39m     \u001b[90m// Test run-tests endpoint success\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 192 |\u001b[39m     test(\u001b[32m'POST /api/run-tests - should return success'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m     |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 193 |\u001b[39m         \u001b[36mconst\u001b[39m res \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\n     \u001b[90m 194 |\u001b[39m             \u001b[33m.\u001b[39mpost(\u001b[32m'/api/run-tests'\u001b[39m)\n     \u001b[90m 195 |\u001b[39m             \u001b[33m.\u001b[39msend({ failTests\u001b[33m:\u001b[39m [] })\u001b[33m;\u001b[39m\u001b[0m\n\n      at test/app.test.js:192:5\n      at Object.<anonymous> (test/app.test.js:9:1)\n\nPASS Pruebas-Unitarias-Backend/test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  specify custom .env file path with { path: '/custom/path/.env' }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üë• sync secrets across teammates & machines: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîê prevent building .env in docker: https://dotenvx.com/prebuild\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üì° add observability to secrets: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  suppress all logs with { quiet: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üë• sync secrets across teammates & machines: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS Pruebas-Unitarias-Frontend/src/medicine.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/patient.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/doctor.spec.ts\n\nTest Suites: 1 failed, 13 passed, 14 total\nTests:       1 failed, 189 passed, 190 total\nSnapshots:   0 total\nTime:        20.883 s\nRan all test suites.\nJest did not exit one second after the test run has completed.\n\n'This usually means that there are asynchronous operations that weren't stopped in your tests. Consider running Jest with `--detectOpenHandles` to troubleshoot this issue.\n"
  },
  {
    "timestamp": "2026-02-12T02:45:54.474Z",
    "date": "11/2/2026, 21:45:54",
    "passed": 13,
    "failed": 1,
    "total": 14,
    "failedTests": [],
    "output": "\n> hospital-api-backend@1.0.0 test\n> jest --runInBand\n\nFAIL test/app.test.js (11.905 s)\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  specify custom .env file path with { path: '/custom/path/.env' }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\n  ‚óè App API - Main Endpoints ‚Ä∫ POST /api/run-tests - should return success\n\n    thrown: \"Exceeded timeout of 10000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\n    \u001b[0m \u001b[90m 190 |\u001b[39m\n     \u001b[90m 191 |\u001b[39m     \u001b[90m// Test run-tests endpoint success\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 192 |\u001b[39m     test(\u001b[32m'POST /api/run-tests - should return success'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m     |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 193 |\u001b[39m         \u001b[36mconst\u001b[39m res \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\n     \u001b[90m 194 |\u001b[39m             \u001b[33m.\u001b[39mpost(\u001b[32m'/api/run-tests'\u001b[39m)\n     \u001b[90m 195 |\u001b[39m             \u001b[33m.\u001b[39msend({ failTests\u001b[33m:\u001b[39m [] })\u001b[33m;\u001b[39m\u001b[0m\n\n      at test/app.test.js:192:5\n      at Object.<anonymous> (test/app.test.js:9:1)\n\nPASS Pruebas-Unitarias-Backend/test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîÑ add secrets lifecycle management: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS Pruebas-Unitarias-Frontend/src/specialty.spec.ts\nPASS test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üë• sync secrets across teammates & machines: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üë• sync secrets across teammates & machines: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üõ†Ô∏è  run anywhere with `dotenvx run -- yourcommand`\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîê encrypt with Dotenvx: https://dotenvx.com\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üõ†Ô∏è  run anywhere with `dotenvx run -- yourcommand`\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîê prevent committing .env to code: https://dotenvx.com/precommit\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîë add access controls to secrets: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/app.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üõ†Ô∏è  run anywhere with `dotenvx run -- yourcommand`\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS Pruebas-Unitarias-Frontend/src/medicine.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/patient.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/doctor.spec.ts\n\nTest Suites: 1 failed, 13 passed, 14 total\nTests:       1 failed, 189 passed, 190 total\nSnapshots:   0 total\nTime:        22.649 s\nRan all test suites.\nJest did not exit one second after the test run has completed.\n\n'This usually means that there are asynchronous operations that weren't stopped in your tests. Consider running Jest with `--detectOpenHandles` to troubleshoot this issue.\n"
  },
  {
    "timestamp": "2026-02-12T02:45:54.389Z",
    "date": "11/2/2026, 21:45:54",
    "passed": 12,
    "failed": 2,
    "total": 14,
    "failedTests": [],
    "output": "\n> hospital-api-backend@1.0.0 test\n> jest --runInBand\n\nFAIL test/app.test.js (12.039 s)\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  override existing env vars with { override: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\n  ‚óè App API - Main Endpoints ‚Ä∫ POST /api/run-tests - should return success\n\n    thrown: \"Exceeded timeout of 10000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\n    \u001b[0m \u001b[90m 190 |\u001b[39m\n     \u001b[90m 191 |\u001b[39m     \u001b[90m// Test run-tests endpoint success\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 192 |\u001b[39m     test(\u001b[32m'POST /api/run-tests - should return success'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m     |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 193 |\u001b[39m         \u001b[36mconst\u001b[39m res \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\n     \u001b[90m 194 |\u001b[39m             \u001b[33m.\u001b[39mpost(\u001b[32m'/api/run-tests'\u001b[39m)\n     \u001b[90m 195 |\u001b[39m             \u001b[33m.\u001b[39msend({ failTests\u001b[33m:\u001b[39m [] })\u001b[33m;\u001b[39m\u001b[0m\n\n      at test/app.test.js:192:5\n      at Object.<anonymous> (test/app.test.js:9:1)\n\nPASS test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  override existing env vars with { override: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Frontend/src/specialty.spec.ts\nPASS test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîê prevent committing .env to code: https://dotenvx.com/precommit\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîë add access controls to secrets: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîê encrypt with Dotenvx: https://dotenvx.com\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nFAIL Pruebas-Unitarias-Backend/test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  specify custom .env file path with { path: '/custom/path/.env' }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\n  ‚óè Especialidades API - Pruebas Unitarias con Patr√≥n AAA ‚Ä∫ GET /api/especialidades ‚Ä∫ Debe retornar todas las especialidades registradas\n\n    expect(received).toHaveLength(expected)\n\n    Expected length: 3\n    Received length: 0\n    Received array:  []\n\n    \u001b[0m \u001b[90m 42 |\u001b[39m             \u001b[90m// ASSERT: Verificar que retorna 3 especialidades (sin importar orden)\u001b[39m\n     \u001b[90m 43 |\u001b[39m             expect(res\u001b[33m.\u001b[39mstatusCode)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 44 |\u001b[39m             expect(res\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoHaveLength(\u001b[35m3\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 45 |\u001b[39m             \u001b[36mconst\u001b[39m names \u001b[33m=\u001b[39m res\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mmap(e \u001b[33m=>\u001b[39m e\u001b[33m.\u001b[39mname)\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m             expect(names)\u001b[33m.\u001b[39mtoContain(\u001b[32m'Cardiolog√≠a'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 47 |\u001b[39m             expect(names)\u001b[33m.\u001b[39mtoContain(\u001b[32m'Pediatr√≠a'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (Pruebas-Unitarias-Backend/test/especialidades.test.js:44:30)\n\nPASS Pruebas-Unitarias-Backend/test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚úÖ audit secrets and track compliance: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîë add access controls to secrets: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚úÖ audit secrets and track compliance: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/app.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üë• sync secrets across teammates & machines: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS Pruebas-Unitarias-Frontend/src/doctor.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/medicine.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/patient.spec.ts\n\nTest Suites: 2 failed, 12 passed, 14 total\nTests:       2 failed, 188 passed, 190 total\nSnapshots:   0 total\nTime:        23.499 s\nRan all test suites.\nJest did not exit one second after the test run has completed.\n\n'This usually means that there are asynchronous operations that weren't stopped in your tests. Consider running Jest with `--detectOpenHandles` to troubleshoot this issue.\n"
  },
  {
    "timestamp": "2026-02-12T02:45:54.303Z",
    "date": "11/2/2026, 21:45:54",
    "passed": 10,
    "failed": 4,
    "total": 14,
    "failedTests": [],
    "output": "\n> hospital-api-backend@1.0.0 test\n> jest --runInBand\n\nFAIL test/app.test.js (11.815 s)\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  enable debug logging with { debug: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\n  ‚óè App API - Main Endpoints ‚Ä∫ POST /api/run-tests - should return success\n\n    thrown: \"Exceeded timeout of 10000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\n    \u001b[0m \u001b[90m 190 |\u001b[39m\n     \u001b[90m 191 |\u001b[39m     \u001b[90m// Test run-tests endpoint success\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 192 |\u001b[39m     test(\u001b[32m'POST /api/run-tests - should return success'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m     |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 193 |\u001b[39m         \u001b[36mconst\u001b[39m res \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\n     \u001b[90m 194 |\u001b[39m             \u001b[33m.\u001b[39mpost(\u001b[32m'/api/run-tests'\u001b[39m)\n     \u001b[90m 195 |\u001b[39m             \u001b[33m.\u001b[39msend({ failTests\u001b[33m:\u001b[39m [] })\u001b[33m;\u001b[39m\u001b[0m\n\n      at test/app.test.js:192:5\n      at Object.<anonymous> (test/app.test.js:9:1)\n\nPASS Pruebas-Unitarias-Frontend/src/specialty.spec.ts\nFAIL test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚úÖ audit secrets and track compliance: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\n  ‚óè Doctors API ‚Ä∫ should allow updating doctor with same license number\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 500\n\n    \u001b[0m \u001b[90m 136 |\u001b[39m             })\u001b[33m;\u001b[39m\n     \u001b[90m 137 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 138 |\u001b[39m         expect(res\u001b[33m.\u001b[39mstatusCode)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 139 |\u001b[39m         expect(res\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'licenseNumber'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'LIC-00001'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 140 |\u001b[39m         expect(res\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'name'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'John Updated'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 141 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (test/doctores.test.js:138:32)\n\n  ‚óè Doctors API ‚Ä∫ PUT /api/doctores/:id - should update only name\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 500\n\n    \u001b[0m \u001b[90m 295 |\u001b[39m             \u001b[33m.\u001b[39msend({ name\u001b[33m:\u001b[39m \u001b[32m'Updated'\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 296 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 297 |\u001b[39m         expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 298 |\u001b[39m         expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mname)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Updated'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 299 |\u001b[39m         expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mlastName)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Name'\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// Should remain unchanged\u001b[39m\n     \u001b[90m 300 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (test/doctores.test.js:297:33)\n\n  ‚óè Doctors API ‚Ä∫ PUT /api/doctores/:id - should update only lastName\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 404\n\n    \u001b[0m \u001b[90m 314 |\u001b[39m             \u001b[33m.\u001b[39msend({ lastName\u001b[33m:\u001b[39m \u001b[32m'Updated'\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 315 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 316 |\u001b[39m         expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 317 |\u001b[39m         expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mlastName)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Updated'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 318 |\u001b[39m         expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mname)\u001b[33m.\u001b[39mtoBe(\u001b[32m'John'\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// Should remain unchanged\u001b[39m\n     \u001b[90m 319 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (test/doctores.test.js:316:33)\n\n  ‚óè Doctors API ‚Ä∫ PUT /api/doctores/:id - should update email and specialty\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 404\n\n    \u001b[0m \u001b[90m 336 |\u001b[39m             })\u001b[33m;\u001b[39m\n     \u001b[90m 337 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 338 |\u001b[39m         expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 339 |\u001b[39m         expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39memail)\u001b[33m.\u001b[39mtoBe(\u001b[32m'jane.updated@hospital.com'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 340 |\u001b[39m         expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mspecialty)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Dermatolog√≠a'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 341 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (test/doctores.test.js:338:33)\n\n  ‚óè Doctors API ‚Ä∫ PUT /api/doctores/:id - should return complete updated doctor object\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 404\n\n    \u001b[0m \u001b[90m 365 |\u001b[39m             \u001b[33m.\u001b[39msend({ specialty\u001b[33m:\u001b[39m \u001b[32m'Cirug√≠a'\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 366 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 367 |\u001b[39m         expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 368 |\u001b[39m         expect(response\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'_id'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 369 |\u001b[39m         expect(response\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'name'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 370 |\u001b[39m         expect(response\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'lastName'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (test/doctores.test.js:367:33)\n\n  ‚óè Doctors API ‚Ä∫ GET /api/doctores - should return doctors with all fields\n\n    expect(received).toBeGreaterThanOrEqual(expected)\n\n    Expected: >= 1\n    Received:    0\n\n    \u001b[0m \u001b[90m 388 |\u001b[39m         \n     \u001b[90m 389 |\u001b[39m         expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 390 |\u001b[39m         expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mlength)\u001b[33m.\u001b[39mtoBeGreaterThanOrEqual(\u001b[35m1\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 391 |\u001b[39m         \u001b[36mconst\u001b[39m foundDoctor \u001b[33m=\u001b[39m response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mfind(d \u001b[33m=>\u001b[39m d\u001b[33m.\u001b[39m_id \u001b[33m===\u001b[39m doctor\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39m_id)\u001b[33m;\u001b[39m\n     \u001b[90m 392 |\u001b[39m         expect(foundDoctor)\u001b[33m.\u001b[39mtoBeDefined()\u001b[33m;\u001b[39m\n     \u001b[90m 393 |\u001b[39m         expect(foundDoctor)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'name'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'Full'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (test/doctores.test.js:390:38)\n\nFAIL Pruebas-Unitarias-Backend/test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîê encrypt with Dotenvx: https://dotenvx.com\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\n  ‚óè Pacientes API - Pruebas Unitarias con Patr√≥n AAA ‚Ä∫ GET /api/pacientes ‚Ä∫ Debe retornar todos los pacientes existentes\n\n    expect(received).toHaveLength(expected)\n\n    Expected length: 2\n    Received length: 1\n    Received array:  [{\"__v\": 0, \"_id\": \"698d3eb08ea98a5d96b14063\", \"createdAt\": \"2026-02-12T02:45:04.635Z\", \"email\": \"maria@test.com\", \"gender\": \"Femenino\", \"illness\": \"Fiebre\", \"lastName\": \"L√≥pez\", \"name\": \"Mar√≠a\"}]\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m             \u001b[90m// ASSERT: Verificar que retorna 2 pacientes (sin importar orden)\u001b[39m\n     \u001b[90m 42 |\u001b[39m             expect(res\u001b[33m.\u001b[39mstatusCode)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m             expect(res\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoHaveLength(\u001b[35m2\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m             \u001b[36mconst\u001b[39m names \u001b[33m=\u001b[39m res\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mmap(p \u001b[33m=>\u001b[39m p\u001b[33m.\u001b[39mname)\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m             expect(names)\u001b[33m.\u001b[39mtoContain(\u001b[32m'Juan'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m             expect(names)\u001b[33m.\u001b[39mtoContain(\u001b[32m'Mar√≠a'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (Pruebas-Unitarias-Backend/test/pacientes.test.js:43:30)\n\nPASS Pruebas-Unitarias-Backend/test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  override existing env vars with { override: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üõ†Ô∏è  run anywhere with `dotenvx run -- yourcommand`\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üì° add observability to secrets: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîë add access controls to secrets: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nFAIL Pruebas-Unitarias-Backend/test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üóÇÔ∏è backup and recover secrets: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\n  ‚óè Medicamentos API - Pruebas Unitarias con Patr√≥n AAA ‚Ä∫ GET /api/medicamentos ‚Ä∫ Debe retornar todos los medicamentos registrados\n\n    expect(received).toHaveLength(expected)\n\n    Expected length: 2\n    Received length: 0\n    Received array:  []\n\n    \u001b[0m \u001b[90m 55 |\u001b[39m             \u001b[90m// ASSERT: Verificar que retorna 2 medicamentos (sin importar orden)\u001b[39m\n     \u001b[90m 56 |\u001b[39m             expect(res\u001b[33m.\u001b[39mstatusCode)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 57 |\u001b[39m             expect(res\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoHaveLength(\u001b[35m2\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 58 |\u001b[39m             \u001b[36mconst\u001b[39m names \u001b[33m=\u001b[39m res\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mmap(m \u001b[33m=>\u001b[39m m\u001b[33m.\u001b[39mname)\u001b[33m;\u001b[39m\n     \u001b[90m 59 |\u001b[39m             expect(names)\u001b[33m.\u001b[39mtoContain(\u001b[32m'Paracetamol'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 60 |\u001b[39m             expect(names)\u001b[33m.\u001b[39mtoContain(\u001b[32m'Ibuprofeno'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (Pruebas-Unitarias-Backend/test/medicamentos.test.js:57:30)\n\nPASS test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîê encrypt with Dotenvx: https://dotenvx.com\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/app.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üõ†Ô∏è  run anywhere with `dotenvx run -- yourcommand`\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS Pruebas-Unitarias-Frontend/src/medicine.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/doctor.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/patient.spec.ts\n\nTest Suites: 4 failed, 10 passed, 14 total\nTests:       9 failed, 181 passed, 190 total\nSnapshots:   0 total\nTime:        24.156 s\nRan all test suites.\nJest did not exit one second after the test run has completed.\n\n'This usually means that there are asynchronous operations that weren't stopped in your tests. Consider running Jest with `--detectOpenHandles` to troubleshoot this issue.\n"
  },
  {
    "timestamp": "2026-02-12T02:45:54.216Z",
    "date": "11/2/2026, 21:45:54",
    "passed": 12,
    "failed": 2,
    "total": 14,
    "failedTests": [],
    "output": "\n> hospital-api-backend@1.0.0 test\n> jest --runInBand\n\nFAIL test/app.test.js (12.31 s)\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  load multiple .env files with { path: ['.env.local', '.env'] }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\n  ‚óè App API - Main Endpoints ‚Ä∫ POST /api/run-tests - should return success\n\n    thrown: \"Exceeded timeout of 10000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\n    \u001b[0m \u001b[90m 190 |\u001b[39m\n     \u001b[90m 191 |\u001b[39m     \u001b[90m// Test run-tests endpoint success\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 192 |\u001b[39m     test(\u001b[32m'POST /api/run-tests - should return success'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m     |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 193 |\u001b[39m         \u001b[36mconst\u001b[39m res \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\n     \u001b[90m 194 |\u001b[39m             \u001b[33m.\u001b[39mpost(\u001b[32m'/api/run-tests'\u001b[39m)\n     \u001b[90m 195 |\u001b[39m             \u001b[33m.\u001b[39msend({ failTests\u001b[33m:\u001b[39m [] })\u001b[33m;\u001b[39m\u001b[0m\n\n      at test/app.test.js:192:5\n      at Object.<anonymous> (test/app.test.js:9:1)\n\nPASS Pruebas-Unitarias-Frontend/src/specialty.spec.ts\nFAIL test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîÑ add secrets lifecycle management: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\n  ‚óè Doctors API ‚Ä∫ POST /api/doctores - should return 409 error if license number already exists\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 409\n    Received: 201\n\n    \u001b[0m \u001b[90m 88 |\u001b[39m             \u001b[33m.\u001b[39msend(duplicateDoctor)\u001b[33m;\u001b[39m\n     \u001b[90m 89 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 90 |\u001b[39m         expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m409\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 91 |\u001b[39m         expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mmessage)\u001b[33m.\u001b[39mtoBe(\u001b[32m'A doctor with this license number already exists'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 92 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 93 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (test/doctores.test.js:90:33)\n\nPASS Pruebas-Unitarias-Backend/test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üóÇÔ∏è backup and recover secrets: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîê encrypt with Dotenvx: https://dotenvx.com\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  override existing env vars with { override: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  override existing env vars with { override: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîê prevent building .env in docker: https://dotenvx.com/prebuild\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  specify custom .env file path with { path: '/custom/path/.env' }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîê prevent committing .env to code: https://dotenvx.com/precommit\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/app.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üì° add observability to secrets: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS Pruebas-Unitarias-Frontend/src/medicine.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/doctor.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/patient.spec.ts\n\nTest Suites: 2 failed, 12 passed, 14 total\nTests:       2 failed, 188 passed, 190 total\nSnapshots:   0 total\nTime:        24.728 s\nRan all test suites.\nJest did not exit one second after the test run has completed.\n\n'This usually means that there are asynchronous operations that weren't stopped in your tests. Consider running Jest with `--detectOpenHandles` to troubleshoot this issue.\n"
  },
  {
    "timestamp": "2026-02-12T02:45:54.133Z",
    "date": "11/2/2026, 21:45:54",
    "passed": 13,
    "failed": 1,
    "total": 14,
    "failedTests": [],
    "output": "\n> hospital-api-backend@1.0.0 test\n> jest --runInBand\n\nFAIL test/app.test.js (12.603 s)\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  override existing env vars with { override: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\n  ‚óè App API - Main Endpoints ‚Ä∫ POST /api/run-tests - should return success\n\n    thrown: \"Exceeded timeout of 10000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\n    \u001b[0m \u001b[90m 190 |\u001b[39m\n     \u001b[90m 191 |\u001b[39m     \u001b[90m// Test run-tests endpoint success\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 192 |\u001b[39m     test(\u001b[32m'POST /api/run-tests - should return success'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m     |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 193 |\u001b[39m         \u001b[36mconst\u001b[39m res \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\n     \u001b[90m 194 |\u001b[39m             \u001b[33m.\u001b[39mpost(\u001b[32m'/api/run-tests'\u001b[39m)\n     \u001b[90m 195 |\u001b[39m             \u001b[33m.\u001b[39msend({ failTests\u001b[33m:\u001b[39m [] })\u001b[33m;\u001b[39m\u001b[0m\n\n      at test/app.test.js:192:5\n      at Object.<anonymous> (test/app.test.js:9:1)\n\nPASS Pruebas-Unitarias-Frontend/src/specialty.spec.ts\nPASS test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üë• sync secrets across teammates & machines: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üë• sync secrets across teammates & machines: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  enable debug logging with { debug: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîê prevent building .env in docker: https://dotenvx.com/prebuild\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  override existing env vars with { override: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/app.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üì° add observability to secrets: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîÑ add secrets lifecycle management: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  write to custom object with { processEnv: myObject }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  enable debug logging with { debug: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Frontend/src/doctor.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/patient.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/medicine.spec.ts\n\nTest Suites: 1 failed, 13 passed, 14 total\nTests:       1 failed, 189 passed, 190 total\nSnapshots:   0 total\nTime:        25.12 s\nRan all test suites.\nJest did not exit one second after the test run has completed.\n\n'This usually means that there are asynchronous operations that weren't stopped in your tests. Consider running Jest with `--detectOpenHandles` to troubleshoot this issue.\n"
  },
  {
    "timestamp": "2026-02-12T02:45:54.048Z",
    "date": "11/2/2026, 21:45:54",
    "passed": 11,
    "failed": 3,
    "total": 14,
    "failedTests": [],
    "output": "\n> hospital-api-backend@1.0.0 test\n> jest --runInBand\n\nFAIL test/app.test.js (13.253 s)\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîê prevent building .env in docker: https://dotenvx.com/prebuild\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\n  ‚óè App API - Main Endpoints ‚Ä∫ POST /api/run-tests - should return success\n\n    thrown: \"Exceeded timeout of 10000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\n    \u001b[0m \u001b[90m 190 |\u001b[39m\n     \u001b[90m 191 |\u001b[39m     \u001b[90m// Test run-tests endpoint success\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 192 |\u001b[39m     test(\u001b[32m'POST /api/run-tests - should return success'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m     |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 193 |\u001b[39m         \u001b[36mconst\u001b[39m res \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\n     \u001b[90m 194 |\u001b[39m             \u001b[33m.\u001b[39mpost(\u001b[32m'/api/run-tests'\u001b[39m)\n     \u001b[90m 195 |\u001b[39m             \u001b[33m.\u001b[39msend({ failTests\u001b[33m:\u001b[39m [] })\u001b[33m;\u001b[39m\u001b[0m\n\n      at test/app.test.js:192:5\n      at Object.<anonymous> (test/app.test.js:9:1)\n\nPASS Pruebas-Unitarias-Frontend/src/specialty.spec.ts\nFAIL test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üóÇÔ∏è backup and recover secrets: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\n  ‚óè Doctors API ‚Ä∫ should return 409 if license number already exists in another doctor\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 409\n    Received: 404\n\n    \u001b[0m \u001b[90m 115 |\u001b[39m             \u001b[33m.\u001b[39msend({ licenseNumber\u001b[33m:\u001b[39m \u001b[32m'LIC-001'\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 116 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 117 |\u001b[39m         expect(res\u001b[33m.\u001b[39mstatusCode)\u001b[33m.\u001b[39mtoBe(\u001b[35m409\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 118 |\u001b[39m         expect(res\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'message'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'A doctor with this license number already exists'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 119 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 120 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (test/doctores.test.js:117:32)\n\n  ‚óè Doctors API ‚Ä∫ should allow updating doctor with same license number\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 404\n\n    \u001b[0m \u001b[90m 136 |\u001b[39m             })\u001b[33m;\u001b[39m\n     \u001b[90m 137 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 138 |\u001b[39m         expect(res\u001b[33m.\u001b[39mstatusCode)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 139 |\u001b[39m         expect(res\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'licenseNumber'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'LIC-00001'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 140 |\u001b[39m         expect(res\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'name'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'John Updated'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 141 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (test/doctores.test.js:138:32)\n\n  ‚óè Doctors API ‚Ä∫ PUT /api/doctores/:id - should update an existing doctor\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 500\n\n    \u001b[0m \u001b[90m 180 |\u001b[39m             \u001b[33m.\u001b[39msend(updatedData)\u001b[33m;\u001b[39m\n     \u001b[90m 181 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 182 |\u001b[39m         expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 183 |\u001b[39m         expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mspecialty)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Neurocirug√≠a'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 184 |\u001b[39m         expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mphone)\u001b[33m.\u001b[39mtoBe(\u001b[32m'0912345678'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 185 |\u001b[39m         expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mname)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Carlos'\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// Should not change\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (test/doctores.test.js:182:33)\n\nPASS Pruebas-Unitarias-Backend/test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîê prevent building .env in docker: https://dotenvx.com/prebuild\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîë add access controls to secrets: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nFAIL test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  load multiple .env files with { path: ['.env.local', '.env'] }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\n  ‚óè Pacientes API ‚Ä∫ PUT /api/pacientes/:id should update multiple fields\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 404\n\n    \u001b[0m \u001b[90m 91 |\u001b[39m             })\u001b[33m;\u001b[39m\n     \u001b[90m 92 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 93 |\u001b[39m         expect(updated\u001b[33m.\u001b[39mstatusCode)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 94 |\u001b[39m         expect(updated\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mname)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Pedro Luis'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 95 |\u001b[39m         expect(updated\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mlastName)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Garcia Perez'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 96 |\u001b[39m         expect(updated\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39memail)\u001b[33m.\u001b[39mtoBe(\u001b[32m'pedroluis@example.com'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (test/pacientes.test.js:93:36)\n\nPASS Pruebas-Unitarias-Backend/test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  enable debug logging with { debug: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/app.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  suppress all logs with { quiet: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üõ†Ô∏è  run anywhere with `dotenvx run -- yourcommand`\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  suppress all logs with { quiet: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîê prevent building .env in docker: https://dotenvx.com/prebuild\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Frontend/src/doctor.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/patient.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/medicine.spec.ts\n\nTest Suites: 3 failed, 11 passed, 14 total\nTests:       5 failed, 185 passed, 190 total\nSnapshots:   0 total\nTime:        24.571 s\nRan all test suites.\nJest did not exit one second after the test run has completed.\n\n'This usually means that there are asynchronous operations that weren't stopped in your tests. Consider running Jest with `--detectOpenHandles` to troubleshoot this issue.\n"
  },
  {
    "timestamp": "2026-02-12T02:45:53.952Z",
    "date": "11/2/2026, 21:45:53",
    "passed": 11,
    "failed": 3,
    "total": 14,
    "failedTests": [],
    "output": "\n> hospital-api-backend@1.0.0 test\n> jest --runInBand\n\nFAIL test/app.test.js (13.182 s)\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  override existing env vars with { override: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\n  ‚óè App API - Main Endpoints ‚Ä∫ POST /api/run-tests - should return success\n\n    thrown: \"Exceeded timeout of 10000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\n    \u001b[0m \u001b[90m 190 |\u001b[39m\n     \u001b[90m 191 |\u001b[39m     \u001b[90m// Test run-tests endpoint success\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 192 |\u001b[39m     test(\u001b[32m'POST /api/run-tests - should return success'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m     |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 193 |\u001b[39m         \u001b[36mconst\u001b[39m res \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\n     \u001b[90m 194 |\u001b[39m             \u001b[33m.\u001b[39mpost(\u001b[32m'/api/run-tests'\u001b[39m)\n     \u001b[90m 195 |\u001b[39m             \u001b[33m.\u001b[39msend({ failTests\u001b[33m:\u001b[39m [] })\u001b[33m;\u001b[39m\u001b[0m\n\n      at test/app.test.js:192:5\n      at Object.<anonymous> (test/app.test.js:9:1)\n\nPASS Pruebas-Unitarias-Frontend/src/specialty.spec.ts\nPASS Pruebas-Unitarias-Backend/test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîë add access controls to secrets: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîê encrypt with Dotenvx: https://dotenvx.com\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  enable debug logging with { debug: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  enable debug logging with { debug: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nFAIL test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîê encrypt with Dotenvx: https://dotenvx.com\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\n  ‚óè Doctors API ‚Ä∫ POST /api/doctores - should return 409 error if license number already exists\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 409\n    Received: 201\n\n    \u001b[0m \u001b[90m 88 |\u001b[39m             \u001b[33m.\u001b[39msend(duplicateDoctor)\u001b[33m;\u001b[39m\n     \u001b[90m 89 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 90 |\u001b[39m         expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m409\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 91 |\u001b[39m         expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mmessage)\u001b[33m.\u001b[39mtoBe(\u001b[32m'A doctor with this license number already exists'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 92 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 93 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (test/doctores.test.js:90:33)\n\n  ‚óè Doctors API ‚Ä∫ should return 409 if license number already exists in another doctor\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 409\n    Received: 500\n\n    \u001b[0m \u001b[90m 115 |\u001b[39m             \u001b[33m.\u001b[39msend({ licenseNumber\u001b[33m:\u001b[39m \u001b[32m'LIC-001'\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 116 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 117 |\u001b[39m         expect(res\u001b[33m.\u001b[39mstatusCode)\u001b[33m.\u001b[39mtoBe(\u001b[35m409\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 118 |\u001b[39m         expect(res\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'message'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'A doctor with this license number already exists'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 119 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 120 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (test/doctores.test.js:117:32)\n\nFAIL Pruebas-Unitarias-Backend/test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîê encrypt with Dotenvx: https://dotenvx.com\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\n  ‚óè Especialidades API - Pruebas Unitarias con Patr√≥n AAA ‚Ä∫ GET /api/especialidades ‚Ä∫ Debe retornar un array vac√≠o inicialmente\n\n    expect(received).toEqual(expected) // deep equality\n\n    - Expected  - 1\n    + Received  + 8\n\n    - Array []\n    + Array [\n    +   Object {\n    +     \"__v\": 0,\n    +     \"_id\": \"698d3ec676e0c0a9b5344a6b\",\n    +     \"createdAt\": \"2026-02-12T02:45:26.387Z\",\n    +     \"name\": \"Cardiology\",\n    +   },\n    + ]\n\n    \u001b[0m \u001b[90m 26 |\u001b[39m             \u001b[90m// ASSERT: Verificar respuesta vac√≠a\u001b[39m\n     \u001b[90m 27 |\u001b[39m             expect(res\u001b[33m.\u001b[39mstatusCode)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 28 |\u001b[39m             expect(res\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoEqual([])\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 29 |\u001b[39m         })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\n     \u001b[90m 31 |\u001b[39m         test(\u001b[32m'Debe retornar todas las especialidades registradas'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.<anonymous> (Pruebas-Unitarias-Backend/test/especialidades.test.js:28:30)\n\n  ‚óè Especialidades API - Pruebas Unitarias con Patr√≥n AAA ‚Ä∫ GET /api/especialidades ‚Ä∫ Debe retornar todas las especialidades registradas\n\n    expect(received).toHaveLength(expected)\n\n    Expected length: 3\n    Received length: 4\n    Received array:  [{\"__v\": 0, \"_id\": \"698d3ec676e0c0a9b5344a70\", \"createdAt\": \"2026-02-12T02:45:26.410Z\", \"name\": \"Oftalmolog√≠a\"}, {\"__v\": 0, \"_id\": \"698d3ec6d35e98003a3e9683\", \"createdAt\": \"2026-02-12T02:45:26.408Z\", \"name\": \"Pediatr√≠a\"}, {\"__v\": 0, \"_id\": \"698d3ec6d35e98003a3e9682\", \"createdAt\": \"2026-02-12T02:45:26.407Z\", \"name\": \"Cardiolog√≠a\"}, {\"__v\": 0, \"_id\": \"698d3ec6d35e98003a3e9684\", \"createdAt\": \"2026-02-12T02:45:26.408Z\", \"name\": \"Neurolog√≠a\"}]\n\n    \u001b[0m \u001b[90m 42 |\u001b[39m             \u001b[90m// ASSERT: Verificar que retorna 3 especialidades (sin importar orden)\u001b[39m\n     \u001b[90m 43 |\u001b[39m             expect(res\u001b[33m.\u001b[39mstatusCode)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 44 |\u001b[39m             expect(res\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoHaveLength(\u001b[35m3\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 45 |\u001b[39m             \u001b[36mconst\u001b[39m names \u001b[33m=\u001b[39m res\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mmap(e \u001b[33m=>\u001b[39m e\u001b[33m.\u001b[39mname)\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m             expect(names)\u001b[33m.\u001b[39mtoContain(\u001b[32m'Cardiolog√≠a'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 47 |\u001b[39m             expect(names)\u001b[33m.\u001b[39mtoContain(\u001b[32m'Pediatr√≠a'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (Pruebas-Unitarias-Backend/test/especialidades.test.js:44:30)\n\n  ‚óè Especialidades API - Pruebas Unitarias con Patr√≥n AAA ‚Ä∫ POST /api/especialidades ‚Ä∫ Debe rechazar especialidad duplicada (case-insensitive)\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 409\n    Received: 201\n\n    \u001b[0m \u001b[90m 84 |\u001b[39m\n     \u001b[90m 85 |\u001b[39m             \u001b[90m// ASSERT: Verificar error 409 (conflicto)\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 86 |\u001b[39m             expect(res\u001b[33m.\u001b[39mstatusCode)\u001b[33m.\u001b[39mtoBe(\u001b[35m409\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 87 |\u001b[39m             expect(res\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'message'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'Specialty already exists'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 88 |\u001b[39m         })\u001b[33m;\u001b[39m\n     \u001b[90m 89 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (Pruebas-Unitarias-Backend/test/especialidades.test.js:86:36)\n\nPASS Pruebas-Unitarias-Backend/test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  specify custom .env file path with { path: '/custom/path/.env' }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üì° add observability to secrets: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/app.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚úÖ audit secrets and track compliance: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS Pruebas-Unitarias-Frontend/src/doctor.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/medicine.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/patient.spec.ts\n\nTest Suites: 3 failed, 11 passed, 14 total\nTests:       6 failed, 184 passed, 190 total\nSnapshots:   0 total\nTime:        24.359 s\nRan all test suites.\nJest did not exit one second after the test run has completed.\n\n'This usually means that there are asynchronous operations that weren't stopped in your tests. Consider running Jest with `--detectOpenHandles` to troubleshoot this issue.\n"
  },
  {
    "timestamp": "2026-02-12T02:45:53.855Z",
    "date": "11/2/2026, 21:45:53",
    "passed": 11,
    "failed": 3,
    "total": 14,
    "failedTests": [],
    "output": "\n> hospital-api-backend@1.0.0 test\n> jest --runInBand\n\nFAIL test/app.test.js (13.055 s)\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  enable debug logging with { debug: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\n  ‚óè App API - Main Endpoints ‚Ä∫ POST /api/run-tests - should return success\n\n    thrown: \"Exceeded timeout of 10000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\n    \u001b[0m \u001b[90m 190 |\u001b[39m\n     \u001b[90m 191 |\u001b[39m     \u001b[90m// Test run-tests endpoint success\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 192 |\u001b[39m     test(\u001b[32m'POST /api/run-tests - should return success'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m     |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 193 |\u001b[39m         \u001b[36mconst\u001b[39m res \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\n     \u001b[90m 194 |\u001b[39m             \u001b[33m.\u001b[39mpost(\u001b[32m'/api/run-tests'\u001b[39m)\n     \u001b[90m 195 |\u001b[39m             \u001b[33m.\u001b[39msend({ failTests\u001b[33m:\u001b[39m [] })\u001b[33m;\u001b[39m\u001b[0m\n\n      at test/app.test.js:192:5\n      at Object.<anonymous> (test/app.test.js:9:1)\n\nFAIL Pruebas-Unitarias-Backend/test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üë• sync secrets across teammates & machines: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\n  ‚óè Especialidades API - Pruebas Unitarias con Patr√≥n AAA ‚Ä∫ PUT /api/especialidades/:id ‚Ä∫ Debe actualizar el nombre de una especialidad existente\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 500\n\n    \u001b[0m \u001b[90m 102 |\u001b[39m\n     \u001b[90m 103 |\u001b[39m             \u001b[90m// ASSERT: Verificar actualizaci√≥n\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 104 |\u001b[39m             expect(updated\u001b[33m.\u001b[39mstatusCode)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 105 |\u001b[39m             expect(updated\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mname)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Oftalmolog√≠a Pedi√°trica'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 106 |\u001b[39m         })\u001b[33m;\u001b[39m\n     \u001b[90m 107 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (Pruebas-Unitarias-Backend/test/especialidades.test.js:104:40)\n\n  ‚óè Especialidades API - Pruebas Unitarias con Patr√≥n AAA ‚Ä∫ DELETE /api/especialidades/:id ‚Ä∫ Debe eliminar una especialidad existente\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 404\n\n    \u001b[0m \u001b[90m 132 |\u001b[39m\n     \u001b[90m 133 |\u001b[39m             \u001b[90m// ASSERT: Verificar eliminaci√≥n exitosa\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 134 |\u001b[39m             expect(deleted\u001b[33m.\u001b[39mstatusCode)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 135 |\u001b[39m             expect(deleted\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mname)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Cardiolog√≠a'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 136 |\u001b[39m             \n     \u001b[90m 137 |\u001b[39m             \u001b[90m// Verificar que ya no existe en la base de datos\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (Pruebas-Unitarias-Backend/test/especialidades.test.js:134:40)\n\nPASS Pruebas-Unitarias-Frontend/src/specialty.spec.ts\nPASS Pruebas-Unitarias-Backend/test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üë• sync secrets across teammates & machines: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nFAIL test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  specify custom .env file path with { path: '/custom/path/.env' }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\n  ‚óè Doctors API ‚Ä∫ PUT /api/doctores/:id - should update only lastName\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 404\n\n    \u001b[0m \u001b[90m 314 |\u001b[39m             \u001b[33m.\u001b[39msend({ lastName\u001b[33m:\u001b[39m \u001b[32m'Updated'\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 315 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 316 |\u001b[39m         expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 317 |\u001b[39m         expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mlastName)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Updated'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 318 |\u001b[39m         expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mname)\u001b[33m.\u001b[39mtoBe(\u001b[32m'John'\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// Should remain unchanged\u001b[39m\n     \u001b[90m 319 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (test/doctores.test.js:316:33)\n\nPASS Pruebas-Unitarias-Backend/test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîÑ add secrets lifecycle management: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîë add access controls to secrets: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîê prevent building .env in docker: https://dotenvx.com/prebuild\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  enable debug logging with { debug: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîê prevent building .env in docker: https://dotenvx.com/prebuild\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/app.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üì° add observability to secrets: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS Pruebas-Unitarias-Frontend/src/doctor.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/medicine.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/patient.spec.ts\n\nTest Suites: 3 failed, 11 passed, 14 total\nTests:       4 failed, 186 passed, 190 total\nSnapshots:   0 total\nTime:        24.469 s\nRan all test suites.\nJest did not exit one second after the test run has completed.\n\n'This usually means that there are asynchronous operations that weren't stopped in your tests. Consider running Jest with `--detectOpenHandles` to troubleshoot this issue.\n"
  },
  {
    "timestamp": "2026-02-12T02:45:53.756Z",
    "date": "11/2/2026, 21:45:53",
    "passed": 10,
    "failed": 4,
    "total": 14,
    "failedTests": [],
    "output": "\n> hospital-api-backend@1.0.0 test\n> jest --runInBand\n\nFAIL test/app.test.js (12.906 s)\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîÑ add secrets lifecycle management: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\n  ‚óè App API - Main Endpoints ‚Ä∫ POST /api/run-tests - should return success\n\n    thrown: \"Exceeded timeout of 10000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\n    \u001b[0m \u001b[90m 190 |\u001b[39m\n     \u001b[90m 191 |\u001b[39m     \u001b[90m// Test run-tests endpoint success\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 192 |\u001b[39m     test(\u001b[32m'POST /api/run-tests - should return success'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m     |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 193 |\u001b[39m         \u001b[36mconst\u001b[39m res \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\n     \u001b[90m 194 |\u001b[39m             \u001b[33m.\u001b[39mpost(\u001b[32m'/api/run-tests'\u001b[39m)\n     \u001b[90m 195 |\u001b[39m             \u001b[33m.\u001b[39msend({ failTests\u001b[33m:\u001b[39m [] })\u001b[33m;\u001b[39m\u001b[0m\n\n      at test/app.test.js:192:5\n      at Object.<anonymous> (test/app.test.js:9:1)\n\nPASS test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  enable debug logging with { debug: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Frontend/src/specialty.spec.ts\nFAIL Pruebas-Unitarias-Backend/test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîê prevent committing .env to code: https://dotenvx.com/precommit\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\n  ‚óè Especialidades API - Pruebas Unitarias con Patr√≥n AAA ‚Ä∫ GET /api/especialidades ‚Ä∫ Debe retornar todas las especialidades registradas\n\n    expect(received).toHaveLength(expected)\n\n    Expected length: 3\n    Received length: 1\n    Received array:  [{\"__v\": 0, \"_id\": \"698d3ece96ef30d4864c49ae\", \"createdAt\": \"2026-02-12T02:45:34.158Z\", \"name\": \"Neurolog√≠a\"}]\n\n    \u001b[0m \u001b[90m 42 |\u001b[39m             \u001b[90m// ASSERT: Verificar que retorna 3 especialidades (sin importar orden)\u001b[39m\n     \u001b[90m 43 |\u001b[39m             expect(res\u001b[33m.\u001b[39mstatusCode)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 44 |\u001b[39m             expect(res\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoHaveLength(\u001b[35m3\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 45 |\u001b[39m             \u001b[36mconst\u001b[39m names \u001b[33m=\u001b[39m res\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mmap(e \u001b[33m=>\u001b[39m e\u001b[33m.\u001b[39mname)\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m             expect(names)\u001b[33m.\u001b[39mtoContain(\u001b[32m'Cardiolog√≠a'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 47 |\u001b[39m             expect(names)\u001b[33m.\u001b[39mtoContain(\u001b[32m'Pediatr√≠a'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (Pruebas-Unitarias-Backend/test/especialidades.test.js:44:30)\n\nFAIL Pruebas-Unitarias-Backend/test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîê prevent building .env in docker: https://dotenvx.com/prebuild\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\n  ‚óè Doctores API - Pruebas Unitarias con Patr√≥n AAA ‚Ä∫ POST /api/doctores ‚Ä∫ Debe rechazar doctor con n√∫mero de licencia duplicado\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 409\n    Received: 201\n\n    \u001b[0m \u001b[90m 150 |\u001b[39m\n     \u001b[90m 151 |\u001b[39m             \u001b[90m// ASSERT: Verificar error 409 (conflicto)\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 152 |\u001b[39m             expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m409\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 153 |\u001b[39m         })\u001b[33m;\u001b[39m\n     \u001b[90m 154 |\u001b[39m\n     \u001b[90m 155 |\u001b[39m         test(\u001b[32m'Debe rechazar doctor sin nombre'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.<anonymous> (Pruebas-Unitarias-Backend/test/doctores.test.js:152:37)\n\n  ‚óè Doctores API - Pruebas Unitarias con Patr√≥n AAA ‚Ä∫ PUT /api/doctores/:id ‚Ä∫ Debe rechazar actualizaci√≥n de licenseNumber duplicado\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 409\n    Received: 200\n\n    \u001b[0m \u001b[90m 290 |\u001b[39m                 \u001b[33m.\u001b[39msend({ licenseNumber\u001b[33m:\u001b[39m \u001b[32m'LIC-111'\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 291 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 292 |\u001b[39m             expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m409\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 293 |\u001b[39m             expect(response\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'message'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'A doctor with this license number already exists'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 294 |\u001b[39m         })\u001b[33m;\u001b[39m\n     \u001b[90m 295 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (Pruebas-Unitarias-Backend/test/doctores.test.js:292:37)\n\nPASS test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  enable debug logging with { debug: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  suppress all logs with { quiet: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîê encrypt with Dotenvx: https://dotenvx.com\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/app.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  load multiple .env files with { path: ['.env.local', '.env'] }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîë add access controls to secrets: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nFAIL test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  suppress all logs with { quiet: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\n  ‚óè Medicamentos API ‚Ä∫ PUT /api/medicamentos/:id should update multiple fields\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 404\n\n    \u001b[0m \u001b[90m 94 |\u001b[39m             })\u001b[33m;\u001b[39m\n     \u001b[90m 95 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 96 |\u001b[39m         expect(updated\u001b[33m.\u001b[39mstatusCode)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 97 |\u001b[39m         expect(updated\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mname)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Ibuprofeno 400mg'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 98 |\u001b[39m         expect(updated\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mdescription)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Antiinflamatorio y analg√©sico'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 99 |\u001b[39m         expect(updated\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mquantity)\u001b[33m.\u001b[39mtoBe(\u001b[35m100\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (test/medicamentos.test.js:96:36)\n\n  ‚óè Medicamentos API ‚Ä∫ DELETE /api/medicamentos/:id should delete a medicamento\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 404\n\n    \u001b[0m \u001b[90m 116 |\u001b[39m\n     \u001b[90m 117 |\u001b[39m         \u001b[36mconst\u001b[39m deleted \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\u001b[33m.\u001b[39m\u001b[36mdelete\u001b[39m(\u001b[32m`/api/medicamentos/${id}`\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 118 |\u001b[39m         expect(deleted\u001b[33m.\u001b[39mstatusCode)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 119 |\u001b[39m         expect(deleted\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mname)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Amoxicilina'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 120 |\u001b[39m\n     \u001b[90m 121 |\u001b[39m         \u001b[36mconst\u001b[39m res \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\u001b[33m.\u001b[39m\u001b[36mget\u001b[39m(\u001b[32m'/api/medicamentos'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (test/medicamentos.test.js:118:36)\n\nPASS Pruebas-Unitarias-Frontend/src/patient.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/medicine.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/doctor.spec.ts\n\nTest Suites: 4 failed, 10 passed, 14 total\nTests:       6 failed, 184 passed, 190 total\nSnapshots:   0 total\nTime:        24.712 s, estimated 25 s\nRan all test suites.\nJest did not exit one second after the test run has completed.\n\n'This usually means that there are asynchronous operations that weren't stopped in your tests. Consider running Jest with `--detectOpenHandles` to troubleshoot this issue.\n"
  },
  {
    "timestamp": "2026-02-12T02:45:53.671Z",
    "date": "11/2/2026, 21:45:53",
    "passed": 9,
    "failed": 5,
    "total": 14,
    "failedTests": [],
    "output": "\n> hospital-api-backend@1.0.0 test\n> jest --runInBand\n\nFAIL test/app.test.js (12.944 s)\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚úÖ audit secrets and track compliance: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\n  ‚óè App API - Main Endpoints ‚Ä∫ POST /api/run-tests - should return success\n\n    thrown: \"Exceeded timeout of 10000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\n    \u001b[0m \u001b[90m 190 |\u001b[39m\n     \u001b[90m 191 |\u001b[39m     \u001b[90m// Test run-tests endpoint success\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 192 |\u001b[39m     test(\u001b[32m'POST /api/run-tests - should return success'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m     |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 193 |\u001b[39m         \u001b[36mconst\u001b[39m res \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\n     \u001b[90m 194 |\u001b[39m             \u001b[33m.\u001b[39mpost(\u001b[32m'/api/run-tests'\u001b[39m)\n     \u001b[90m 195 |\u001b[39m             \u001b[33m.\u001b[39msend({ failTests\u001b[33m:\u001b[39m [] })\u001b[33m;\u001b[39m\u001b[0m\n\n      at test/app.test.js:192:5\n      at Object.<anonymous> (test/app.test.js:9:1)\n\nPASS Pruebas-Unitarias-Frontend/src/specialty.spec.ts\nFAIL test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîê prevent building .env in docker: https://dotenvx.com/prebuild\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\n  ‚óè Doctors API ‚Ä∫ should allow updating doctor with same license number\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 500\n\n    \u001b[0m \u001b[90m 136 |\u001b[39m             })\u001b[33m;\u001b[39m\n     \u001b[90m 137 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 138 |\u001b[39m         expect(res\u001b[33m.\u001b[39mstatusCode)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 139 |\u001b[39m         expect(res\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'licenseNumber'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'LIC-00001'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 140 |\u001b[39m         expect(res\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'name'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'John Updated'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 141 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (test/doctores.test.js:138:32)\n\n  ‚óè Doctors API ‚Ä∫ GET /api/doctores - should return array with doctors\n\n    expect(received).toBeGreaterThan(expected)\n\n    Expected: > 0\n    Received:   0\n\n    \u001b[0m \u001b[90m 156 |\u001b[39m         expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 157 |\u001b[39m         expect(\u001b[33mArray\u001b[39m\u001b[33m.\u001b[39misArray(response\u001b[33m.\u001b[39mbody))\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 158 |\u001b[39m         expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mlength)\u001b[33m.\u001b[39mtoBeGreaterThan(\u001b[35m0\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 159 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 160 |\u001b[39m\n     \u001b[90m 161 |\u001b[39m     \u001b[90m// Test PUT - Update doctor\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (test/doctores.test.js:158:38)\n\n  ‚óè Doctors API ‚Ä∫ PUT /api/doctores/:id - should return 404 if doctor does not exist\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 404\n\n    \u001b[0m \u001b[90m 200 |\u001b[39m         \u001b[36mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\u001b[33m.\u001b[39m\u001b[36mdelete\u001b[39m(\u001b[32m`/api/doctores/${doctor.body._id}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 201 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 202 |\u001b[39m         expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 203 |\u001b[39m         expect(response\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'_id'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 204 |\u001b[39m         expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39m_id)\u001b[33m.\u001b[39mtoBe(doctor\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39m_id)\u001b[33m;\u001b[39m\n     \u001b[90m 205 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (test/doctores.test.js:202:33)\n\nPASS test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  write to custom object with { processEnv: myObject }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nFAIL Pruebas-Unitarias-Backend/test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  suppress all logs with { quiet: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\n  ‚óè Medicamentos API - Pruebas Unitarias con Patr√≥n AAA ‚Ä∫ GET /api/medicamentos ‚Ä∫ Debe retornar todos los medicamentos registrados\n\n    expect(received).toHaveLength(expected)\n\n    Expected length: 2\n    Received length: 0\n    Received array:  []\n\n    \u001b[0m \u001b[90m 55 |\u001b[39m             \u001b[90m// ASSERT: Verificar que retorna 2 medicamentos (sin importar orden)\u001b[39m\n     \u001b[90m 56 |\u001b[39m             expect(res\u001b[33m.\u001b[39mstatusCode)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 57 |\u001b[39m             expect(res\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoHaveLength(\u001b[35m2\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 58 |\u001b[39m             \u001b[36mconst\u001b[39m names \u001b[33m=\u001b[39m res\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mmap(m \u001b[33m=>\u001b[39m m\u001b[33m.\u001b[39mname)\u001b[33m;\u001b[39m\n     \u001b[90m 59 |\u001b[39m             expect(names)\u001b[33m.\u001b[39mtoContain(\u001b[32m'Paracetamol'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 60 |\u001b[39m             expect(names)\u001b[33m.\u001b[39mtoContain(\u001b[32m'Ibuprofeno'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (Pruebas-Unitarias-Backend/test/medicamentos.test.js:57:30)\n\n  ‚óè Medicamentos API - Pruebas Unitarias con Patr√≥n AAA ‚Ä∫ PUT /api/medicamentos/:id ‚Ä∫ Debe actualizar el precio de un medicamento existente\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 404\n\n    \u001b[0m \u001b[90m 119 |\u001b[39m\n     \u001b[90m 120 |\u001b[39m             \u001b[90m// ASSERT: Verificar actualizaci√≥n de precio\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 121 |\u001b[39m             expect(updated\u001b[33m.\u001b[39mstatusCode)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 122 |\u001b[39m             expect(updated\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mprice)\u001b[33m.\u001b[39mtoBe(\u001b[35m4.00\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 123 |\u001b[39m             expect(updated\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mname)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Aspirina'\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// Otros campos no cambian\u001b[39m\n     \u001b[90m 124 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (Pruebas-Unitarias-Backend/test/medicamentos.test.js:121:40)\n\n  ‚óè Medicamentos API - Pruebas Unitarias con Patr√≥n AAA ‚Ä∫ PUT /api/medicamentos/:id ‚Ä∫ Debe actualizar m√∫ltiples campos simult√°neamente\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 404\n\n    \u001b[0m \u001b[90m 147 |\u001b[39m\n     \u001b[90m 148 |\u001b[39m             \u001b[90m// ASSERT: Verificar actualizaciones m√∫ltiples\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 149 |\u001b[39m             expect(updated\u001b[33m.\u001b[39mstatusCode)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 150 |\u001b[39m             expect(updated\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mname)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Ibuprofeno 400mg'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 151 |\u001b[39m             expect(updated\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mdescription)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Antiinflamatorio y analg√©sico'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 152 |\u001b[39m             expect(updated\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mquantity)\u001b[33m.\u001b[39mtoBe(\u001b[35m100\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (Pruebas-Unitarias-Backend/test/medicamentos.test.js:149:40)\n\nFAIL Pruebas-Unitarias-Backend/test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  specify custom .env file path with { path: '/custom/path/.env' }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\n  ‚óè Doctores API - Pruebas Unitarias con Patr√≥n AAA ‚Ä∫ PUT /api/doctores/:id ‚Ä∫ Debe rechazar actualizaci√≥n de licenseNumber duplicado\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 409\n    Received: 404\n\n    \u001b[0m \u001b[90m 290 |\u001b[39m                 \u001b[33m.\u001b[39msend({ licenseNumber\u001b[33m:\u001b[39m \u001b[32m'LIC-111'\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 291 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 292 |\u001b[39m             expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m409\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 293 |\u001b[39m             expect(response\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'message'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'A doctor with this license number already exists'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 294 |\u001b[39m         })\u001b[33m;\u001b[39m\n     \u001b[90m 295 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (Pruebas-Unitarias-Backend/test/doctores.test.js:292:37)\n\n  ‚óè Doctores API - Pruebas Unitarias con Patr√≥n AAA ‚Ä∫ PUT /api/doctores/:id ‚Ä∫ Debe permitir actualizar licenseNumber con el mismo valor\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 404\n\n    \u001b[0m \u001b[90m 320 |\u001b[39m                 \u001b[33m.\u001b[39msend({ name\u001b[33m:\u001b[39m \u001b[32m'Juan Updated'\u001b[39m\u001b[33m,\u001b[39m licenseNumber\u001b[33m:\u001b[39m \u001b[32m'LIC-333'\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 321 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 322 |\u001b[39m             expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 323 |\u001b[39m             expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mname)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Juan Updated'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 324 |\u001b[39m             expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mlicenseNumber)\u001b[33m.\u001b[39mtoBe(\u001b[32m'LIC-333'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 325 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (Pruebas-Unitarias-Backend/test/doctores.test.js:322:37)\n\nPASS Pruebas-Unitarias-Backend/test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üóÇÔ∏è backup and recover secrets: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üõ†Ô∏è  run anywhere with `dotenvx run -- yourcommand`\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîê encrypt with Dotenvx: https://dotenvx.com\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nFAIL test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üõ†Ô∏è  run anywhere with `dotenvx run -- yourcommand`\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\n  ‚óè Medicamentos API ‚Ä∫ PUT /api/medicamentos/:id should update an existing medicamento\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 404\n\n    \u001b[0m \u001b[90m 68 |\u001b[39m             \u001b[33m.\u001b[39msend({ price\u001b[33m:\u001b[39m \u001b[35m4.00\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 69 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 70 |\u001b[39m         expect(updated\u001b[33m.\u001b[39mstatusCode)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 71 |\u001b[39m         expect(updated\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mprice)\u001b[33m.\u001b[39mtoBe(\u001b[35m4.00\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 72 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 73 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (test/medicamentos.test.js:70:36)\n\n  ‚óè Medicamentos API ‚Ä∫ PUT /api/medicamentos/:id should update multiple fields\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 404\n\n    \u001b[0m \u001b[90m 94 |\u001b[39m             })\u001b[33m;\u001b[39m\n     \u001b[90m 95 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 96 |\u001b[39m         expect(updated\u001b[33m.\u001b[39mstatusCode)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 97 |\u001b[39m         expect(updated\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mname)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Ibuprofeno 400mg'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 98 |\u001b[39m         expect(updated\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mdescription)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Antiinflamatorio y analg√©sico'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 99 |\u001b[39m         expect(updated\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mquantity)\u001b[33m.\u001b[39mtoBe(\u001b[35m100\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (test/medicamentos.test.js:96:36)\n\n  ‚óè Medicamentos API ‚Ä∫ DELETE /api/medicamentos/:id should delete a medicamento\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 404\n\n    \u001b[0m \u001b[90m 116 |\u001b[39m\n     \u001b[90m 117 |\u001b[39m         \u001b[36mconst\u001b[39m deleted \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\u001b[33m.\u001b[39m\u001b[36mdelete\u001b[39m(\u001b[32m`/api/medicamentos/${id}`\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 118 |\u001b[39m         expect(deleted\u001b[33m.\u001b[39mstatusCode)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 119 |\u001b[39m         expect(deleted\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mname)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Amoxicilina'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 120 |\u001b[39m\n     \u001b[90m 121 |\u001b[39m         \u001b[36mconst\u001b[39m res \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\u001b[33m.\u001b[39m\u001b[36mget\u001b[39m(\u001b[32m'/api/medicamentos'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (test/medicamentos.test.js:118:36)\n\nPASS Pruebas-Unitarias-Backend/test/app.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üóÇÔ∏è backup and recover secrets: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS Pruebas-Unitarias-Frontend/src/medicine.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/doctor.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/patient.spec.ts\n\nTest Suites: 5 failed, 9 passed, 14 total\nTests:       12 failed, 178 passed, 190 total\nSnapshots:   0 total\nTime:        24.82 s, estimated 25 s\nRan all test suites.\nJest did not exit one second after the test run has completed.\n\n'This usually means that there are asynchronous operations that weren't stopped in your tests. Consider running Jest with `--detectOpenHandles` to troubleshoot this issue.\n"
  },
  {
    "timestamp": "2026-02-12T02:45:53.555Z",
    "date": "11/2/2026, 21:45:53",
    "passed": 11,
    "failed": 3,
    "total": 14,
    "failedTests": [],
    "output": "\n> hospital-api-backend@1.0.0 test\n> jest --runInBand\n\nFAIL test/app.test.js (13.094 s)\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚úÖ audit secrets and track compliance: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\n  ‚óè App API - Main Endpoints ‚Ä∫ POST /api/run-tests - should return success\n\n    thrown: \"Exceeded timeout of 10000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\n    \u001b[0m \u001b[90m 190 |\u001b[39m\n     \u001b[90m 191 |\u001b[39m     \u001b[90m// Test run-tests endpoint success\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 192 |\u001b[39m     \u001b[90m// SKIPPED: This endpoint runs the entire test suite, causing timeouts\u001b[39m\n     \u001b[90m     |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 193 |\u001b[39m     test\u001b[33m.\u001b[39mskip(\u001b[32m'POST /api/run-tests - should return success'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 194 |\u001b[39m         \u001b[36mconst\u001b[39m res \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\n     \u001b[90m 195 |\u001b[39m             \u001b[33m.\u001b[39mpost(\u001b[32m'/api/run-tests'\u001b[39m)\u001b[0m\n\n      at test/app.test.js:192:5\n      at Object.<anonymous> (test/app.test.js:9:1)\n\nFAIL test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîë add access controls to secrets: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\n  ‚óè Doctors API ‚Ä∫ POST /api/doctores - should create a new doctor\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 201\n    Received: 409\n\n    \u001b[0m \u001b[90m 39 |\u001b[39m             \u001b[33m.\u001b[39msend(newDoctor)\u001b[33m;\u001b[39m\n     \u001b[90m 40 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 41 |\u001b[39m         expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m201\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 42 |\u001b[39m         expect(response\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'_id'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 43 |\u001b[39m         expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mname)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Carlos'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 44 |\u001b[39m         expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mlastName)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Ram√≠rez'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (test/doctores.test.js:41:33)\n\n  ‚óè Doctors API ‚Ä∫ POST /api/doctores - should return 409 error if license number already exists\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 409\n    Received: 201\n\n    \u001b[0m \u001b[90m 88 |\u001b[39m             \u001b[33m.\u001b[39msend(duplicateDoctor)\u001b[33m;\u001b[39m\n     \u001b[90m 89 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 90 |\u001b[39m         expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m409\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 91 |\u001b[39m         expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mmessage)\u001b[33m.\u001b[39mtoBe(\u001b[32m'A doctor with this license number already exists'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 92 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 93 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (test/doctores.test.js:90:33)\n\n  ‚óè Doctors API ‚Ä∫ should return 409 if license number already exists in another doctor\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 409\n    Received: 500\n\n    \u001b[0m \u001b[90m 115 |\u001b[39m             \u001b[33m.\u001b[39msend({ licenseNumber\u001b[33m:\u001b[39m \u001b[32m'LIC-001'\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 116 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 117 |\u001b[39m         expect(res\u001b[33m.\u001b[39mstatusCode)\u001b[33m.\u001b[39mtoBe(\u001b[35m409\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 118 |\u001b[39m         expect(res\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'message'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'A doctor with this license number already exists'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 119 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 120 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (test/doctores.test.js:117:32)\n\n  ‚óè Doctors API ‚Ä∫ PUT /api/doctores/:id - should update an existing doctor\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 500\n\n    \u001b[0m \u001b[90m 180 |\u001b[39m             \u001b[33m.\u001b[39msend(updatedData)\u001b[33m;\u001b[39m\n     \u001b[90m 181 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 182 |\u001b[39m         expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 183 |\u001b[39m         expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mspecialty)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Neurocirug√≠a'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 184 |\u001b[39m         expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mphone)\u001b[33m.\u001b[39mtoBe(\u001b[32m'0912345678'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 185 |\u001b[39m         expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mname)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Carlos'\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// Should not change\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (test/doctores.test.js:182:33)\n\n  ‚óè Doctors API ‚Ä∫ PUT /api/doctores/:id - should return 404 if doctor does not exist\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 404\n\n    \u001b[0m \u001b[90m 200 |\u001b[39m         \u001b[36mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\u001b[33m.\u001b[39m\u001b[36mdelete\u001b[39m(\u001b[32m`/api/doctores/${doctor.body._id}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 201 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 202 |\u001b[39m         expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 203 |\u001b[39m         expect(response\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'_id'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 204 |\u001b[39m         expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39m_id)\u001b[33m.\u001b[39mtoBe(doctor\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39m_id)\u001b[33m;\u001b[39m\n     \u001b[90m 205 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (test/doctores.test.js:202:33)\n\n  ‚óè Doctors API ‚Ä∫ PUT /api/doctores/:id - should update email and specialty\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 404\n\n    \u001b[0m \u001b[90m 336 |\u001b[39m             })\u001b[33m;\u001b[39m\n     \u001b[90m 337 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 338 |\u001b[39m         expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 339 |\u001b[39m         expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39memail)\u001b[33m.\u001b[39mtoBe(\u001b[32m'jane.updated@hospital.com'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 340 |\u001b[39m         expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mspecialty)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Dermatolog√≠a'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 341 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (test/doctores.test.js:338:33)\n\n  ‚óè Doctors API ‚Ä∫ PUT /api/doctores/:id - should return complete updated doctor object\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 404\n\n    \u001b[0m \u001b[90m 365 |\u001b[39m             \u001b[33m.\u001b[39msend({ specialty\u001b[33m:\u001b[39m \u001b[32m'Cirug√≠a'\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 366 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 367 |\u001b[39m         expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 368 |\u001b[39m         expect(response\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'_id'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 369 |\u001b[39m         expect(response\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'name'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 370 |\u001b[39m         expect(response\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'lastName'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (test/doctores.test.js:367:33)\n\n  ‚óè Doctors API ‚Ä∫ GET /api/doctores - should return doctors with all fields\n\n    expect(received).toBeGreaterThanOrEqual(expected)\n\n    Expected: >= 1\n    Received:    0\n\n    \u001b[0m \u001b[90m 388 |\u001b[39m         \n     \u001b[90m 389 |\u001b[39m         expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 390 |\u001b[39m         expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mlength)\u001b[33m.\u001b[39mtoBeGreaterThanOrEqual(\u001b[35m1\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 391 |\u001b[39m         \u001b[36mconst\u001b[39m foundDoctor \u001b[33m=\u001b[39m response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mfind(d \u001b[33m=>\u001b[39m d\u001b[33m.\u001b[39m_id \u001b[33m===\u001b[39m doctor\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39m_id)\u001b[33m;\u001b[39m\n     \u001b[90m 392 |\u001b[39m         expect(foundDoctor)\u001b[33m.\u001b[39mtoBeDefined()\u001b[33m;\u001b[39m\n     \u001b[90m 393 |\u001b[39m         expect(foundDoctor)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'name'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'Full'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (test/doctores.test.js:390:38)\n\nPASS test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîÑ add secrets lifecycle management: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Frontend/src/specialty.spec.ts\nPASS Pruebas-Unitarias-Backend/test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üì° add observability to secrets: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nFAIL Pruebas-Unitarias-Backend/test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  load multiple .env files with { path: ['.env.local', '.env'] }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\n  ‚óè Doctores API - Pruebas Unitarias con Patr√≥n AAA ‚Ä∫ GET /api/doctores ‚Ä∫ Debe retornar todos los doctores registrados\n\n    expect(received).toHaveLength(expected)\n\n    Expected length: 2\n    Received length: 0\n    Received array:  []\n\n    \u001b[0m \u001b[90m 53 |\u001b[39m             \u001b[90m// ASSERT: Verificar que retorna 2 doctores (sin importar orden)\u001b[39m\n     \u001b[90m 54 |\u001b[39m             expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 55 |\u001b[39m             expect(response\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoHaveLength(\u001b[35m2\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 56 |\u001b[39m             \u001b[36mconst\u001b[39m names \u001b[33m=\u001b[39m response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mmap(d \u001b[33m=>\u001b[39m d\u001b[33m.\u001b[39mname)\u001b[33m;\u001b[39m\n     \u001b[90m 57 |\u001b[39m             expect(names)\u001b[33m.\u001b[39mtoContain(\u001b[32m'Carlos'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 58 |\u001b[39m             expect(names)\u001b[33m.\u001b[39mtoContain(\u001b[32m'Mar√≠a'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (Pruebas-Unitarias-Backend/test/doctores.test.js:55:35)\n\nPASS Pruebas-Unitarias-Backend/test/app.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  enable debug logging with { debug: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üë• sync secrets across teammates & machines: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üì° add observability to secrets: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  override existing env vars with { override: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîê prevent committing .env to code: https://dotenvx.com/precommit\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Frontend/src/doctor.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/patient.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/medicine.spec.ts\n\nTest Suites: 3 failed, 11 passed, 14 total\nTests:       10 failed, 180 passed, 190 total\nSnapshots:   0 total\nTime:        23.64 s, estimated 25 s\nRan all test suites.\nJest did not exit one second after the test run has completed.\n\n'This usually means that there are asynchronous operations that weren't stopped in your tests. Consider running Jest with `--detectOpenHandles` to troubleshoot this issue.\n"
  },
  {
    "timestamp": "2026-02-12T02:45:53.438Z",
    "date": "11/2/2026, 21:45:53",
    "passed": 11,
    "failed": 3,
    "total": 14,
    "failedTests": [],
    "output": "\n> hospital-api-backend@1.0.0 test\n> jest --runInBand\n\nFAIL test/app.test.js (12.757 s)\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚úÖ audit secrets and track compliance: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\n  ‚óè App API - Main Endpoints ‚Ä∫ POST /api/run-tests - should return success\n\n    thrown: \"Exceeded timeout of 10000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\n    \u001b[0m \u001b[90m 190 |\u001b[39m\n     \u001b[90m 191 |\u001b[39m     \u001b[90m// Test run-tests endpoint success\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 192 |\u001b[39m     \u001b[90m// SKIPPED: This endpoint runs the entire test suite, causing timeouts\u001b[39m\n     \u001b[90m     |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 193 |\u001b[39m     test\u001b[33m.\u001b[39mskip(\u001b[32m'POST /api/run-tests - should return success'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 194 |\u001b[39m         \u001b[36mconst\u001b[39m res \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\n     \u001b[90m 195 |\u001b[39m             \u001b[33m.\u001b[39mpost(\u001b[32m'/api/run-tests'\u001b[39m)\u001b[0m\n\n      at test/app.test.js:192:5\n      at Object.<anonymous> (test/app.test.js:9:1)\n\nFAIL test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  write to custom object with { processEnv: myObject }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\n  ‚óè Doctors API ‚Ä∫ PUT /api/doctores/:id - should update only lastName\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 500\n\n    \u001b[0m \u001b[90m 314 |\u001b[39m             \u001b[33m.\u001b[39msend({ lastName\u001b[33m:\u001b[39m \u001b[32m'Updated'\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 315 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 316 |\u001b[39m         expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 317 |\u001b[39m         expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mlastName)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Updated'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 318 |\u001b[39m         expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mname)\u001b[33m.\u001b[39mtoBe(\u001b[32m'John'\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// Should remain unchanged\u001b[39m\n     \u001b[90m 319 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (test/doctores.test.js:316:33)\n\n  ‚óè Doctors API ‚Ä∫ PUT /api/doctores/:id - should update email and specialty\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 500\n\n    \u001b[0m \u001b[90m 336 |\u001b[39m             })\u001b[33m;\u001b[39m\n     \u001b[90m 337 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 338 |\u001b[39m         expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 339 |\u001b[39m         expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39memail)\u001b[33m.\u001b[39mtoBe(\u001b[32m'jane.updated@hospital.com'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 340 |\u001b[39m         expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mspecialty)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Dermatolog√≠a'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 341 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (test/doctores.test.js:338:33)\n\n  ‚óè Doctors API ‚Ä∫ PUT /api/doctores/:id - should return complete updated doctor object\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 404\n\n    \u001b[0m \u001b[90m 365 |\u001b[39m             \u001b[33m.\u001b[39msend({ specialty\u001b[33m:\u001b[39m \u001b[32m'Cirug√≠a'\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 366 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 367 |\u001b[39m         expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 368 |\u001b[39m         expect(response\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'_id'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 369 |\u001b[39m         expect(response\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'name'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 370 |\u001b[39m         expect(response\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'lastName'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (test/doctores.test.js:367:33)\n\nFAIL Pruebas-Unitarias-Backend/test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîë add access controls to secrets: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\n  ‚óè Especialidades API - Pruebas Unitarias con Patr√≥n AAA ‚Ä∫ GET /api/especialidades ‚Ä∫ Debe retornar todas las especialidades registradas\n\n    expect(received).toHaveLength(expected)\n\n    Expected length: 3\n    Received length: 0\n    Received array:  []\n\n    \u001b[0m \u001b[90m 42 |\u001b[39m             \u001b[90m// ASSERT: Verificar que retorna 3 especialidades (sin importar orden)\u001b[39m\n     \u001b[90m 43 |\u001b[39m             expect(res\u001b[33m.\u001b[39mstatusCode)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 44 |\u001b[39m             expect(res\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoHaveLength(\u001b[35m3\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 45 |\u001b[39m             \u001b[36mconst\u001b[39m names \u001b[33m=\u001b[39m res\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mmap(e \u001b[33m=>\u001b[39m e\u001b[33m.\u001b[39mname)\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m             expect(names)\u001b[33m.\u001b[39mtoContain(\u001b[32m'Cardiolog√≠a'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 47 |\u001b[39m             expect(names)\u001b[33m.\u001b[39mtoContain(\u001b[32m'Pediatr√≠a'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (Pruebas-Unitarias-Backend/test/especialidades.test.js:44:30)\n\n  ‚óè Especialidades API - Pruebas Unitarias con Patr√≥n AAA ‚Ä∫ POST /api/especialidades ‚Ä∫ Debe rechazar especialidad duplicada (case-insensitive)\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 409\n    Received: 201\n\n    \u001b[0m \u001b[90m 84 |\u001b[39m\n     \u001b[90m 85 |\u001b[39m             \u001b[90m// ASSERT: Verificar error 409 (conflicto)\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 86 |\u001b[39m             expect(res\u001b[33m.\u001b[39mstatusCode)\u001b[33m.\u001b[39mtoBe(\u001b[35m409\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 87 |\u001b[39m             expect(res\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'message'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'Specialty already exists'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 88 |\u001b[39m         })\u001b[33m;\u001b[39m\n     \u001b[90m 89 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (Pruebas-Unitarias-Backend/test/especialidades.test.js:86:36)\n\nPASS Pruebas-Unitarias-Frontend/src/specialty.spec.ts\nPASS Pruebas-Unitarias-Backend/test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üë• sync secrets across teammates & machines: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üì° add observability to secrets: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîê encrypt with Dotenvx: https://dotenvx.com\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîÑ add secrets lifecycle management: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/app.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîë add access controls to secrets: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîÑ add secrets lifecycle management: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîÑ add secrets lifecycle management: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Frontend/src/patient.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/doctor.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/medicine.spec.ts\n\nTest Suites: 3 failed, 11 passed, 14 total\nTests:       6 failed, 184 passed, 190 total\nSnapshots:   0 total\nTime:        20.994 s, estimated 24 s\nRan all test suites.\n"
  },
  {
    "timestamp": "2026-02-12T02:45:51.283Z",
    "date": "11/2/2026, 21:45:51",
    "passed": 12,
    "failed": 2,
    "total": 14,
    "failedTests": [],
    "output": "\n> hospital-api-backend@1.0.0 test\n> jest --runInBand\n\nPASS test/app.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  enable debug logging with { debug: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nFAIL test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîê prevent building .env in docker: https://dotenvx.com/prebuild\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\n  ‚óè Doctors API ‚Ä∫ POST /api/doctores - should return 409 error if license number already exists\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 409\n    Received: 201\n\n    \u001b[0m \u001b[90m 88 |\u001b[39m             \u001b[33m.\u001b[39msend(duplicateDoctor)\u001b[33m;\u001b[39m\n     \u001b[90m 89 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 90 |\u001b[39m         expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m409\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 91 |\u001b[39m         expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mmessage)\u001b[33m.\u001b[39mtoBe(\u001b[32m'A doctor with this license number already exists'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 92 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 93 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (test/doctores.test.js:90:33)\n\n  ‚óè Doctors API ‚Ä∫ should return 409 if license number already exists in another doctor\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 409\n    Received: 200\n\n    \u001b[0m \u001b[90m 115 |\u001b[39m             \u001b[33m.\u001b[39msend({ licenseNumber\u001b[33m:\u001b[39m \u001b[32m'LIC-001'\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 116 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 117 |\u001b[39m         expect(res\u001b[33m.\u001b[39mstatusCode)\u001b[33m.\u001b[39mtoBe(\u001b[35m409\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 118 |\u001b[39m         expect(res\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'message'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'A doctor with this license number already exists'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 119 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 120 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (test/doctores.test.js:117:32)\n\n  ‚óè Doctors API ‚Ä∫ PUT /api/doctores/:id - should update an existing doctor\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 500\n\n    \u001b[0m \u001b[90m 180 |\u001b[39m             \u001b[33m.\u001b[39msend(updatedData)\u001b[33m;\u001b[39m\n     \u001b[90m 181 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 182 |\u001b[39m         expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 183 |\u001b[39m         expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mspecialty)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Neurocirug√≠a'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 184 |\u001b[39m         expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mphone)\u001b[33m.\u001b[39mtoBe(\u001b[32m'0912345678'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 185 |\u001b[39m         expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mname)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Carlos'\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// Should not change\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (test/doctores.test.js:182:33)\n\n  ‚óè Doctors API ‚Ä∫ PUT /api/doctores/:id - should return 404 if doctor does not exist\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 404\n\n    \u001b[0m \u001b[90m 200 |\u001b[39m         \u001b[36mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\u001b[33m.\u001b[39m\u001b[36mdelete\u001b[39m(\u001b[32m`/api/doctores/${doctor.body._id}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 201 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 202 |\u001b[39m         expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 203 |\u001b[39m         expect(response\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'_id'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 204 |\u001b[39m         expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39m_id)\u001b[33m.\u001b[39mtoBe(doctor\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39m_id)\u001b[33m;\u001b[39m\n     \u001b[90m 205 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (test/doctores.test.js:202:33)\n\nPASS Pruebas-Unitarias-Backend/test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîÑ add secrets lifecycle management: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS Pruebas-Unitarias-Frontend/src/specialty.spec.ts\nFAIL Pruebas-Unitarias-Backend/test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîê prevent building .env in docker: https://dotenvx.com/prebuild\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\n  ‚óè Doctores API - Pruebas Unitarias con Patr√≥n AAA ‚Ä∫ PUT /api/doctores/:id ‚Ä∫ Debe rechazar actualizaci√≥n de licenseNumber duplicado\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 409\n    Received: 200\n\n    \u001b[0m \u001b[90m 290 |\u001b[39m                 \u001b[33m.\u001b[39msend({ licenseNumber\u001b[33m:\u001b[39m \u001b[32m'LIC-111'\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 291 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 292 |\u001b[39m             expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m409\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 293 |\u001b[39m             expect(response\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'message'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'A doctor with this license number already exists'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 294 |\u001b[39m         })\u001b[33m;\u001b[39m\n     \u001b[90m 295 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (Pruebas-Unitarias-Backend/test/doctores.test.js:292:37)\n\n  ‚óè Doctores API - Pruebas Unitarias con Patr√≥n AAA ‚Ä∫ PUT /api/doctores/:id ‚Ä∫ Debe permitir actualizar licenseNumber con el mismo valor\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 500\n\n    \u001b[0m \u001b[90m 320 |\u001b[39m                 \u001b[33m.\u001b[39msend({ name\u001b[33m:\u001b[39m \u001b[32m'Juan Updated'\u001b[39m\u001b[33m,\u001b[39m licenseNumber\u001b[33m:\u001b[39m \u001b[32m'LIC-333'\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 321 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 322 |\u001b[39m             expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 323 |\u001b[39m             expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mname)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Juan Updated'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 324 |\u001b[39m             expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mlicenseNumber)\u001b[33m.\u001b[39mtoBe(\u001b[32m'LIC-333'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 325 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (Pruebas-Unitarias-Backend/test/doctores.test.js:322:37)\n\nPASS Pruebas-Unitarias-Backend/test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  enable debug logging with { debug: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  write to custom object with { processEnv: myObject }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  suppress all logs with { quiet: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  enable debug logging with { debug: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/app.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  specify custom .env file path with { path: '/custom/path/.env' }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  override existing env vars with { override: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Frontend/src/medicine.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/patient.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/doctor.spec.ts\n\nTest Suites: 2 failed, 12 passed, 14 total\nTests:       6 failed, 1 skipped, 183 passed, 190 total\nSnapshots:   0 total\nTime:        13.564 s, estimated 24 s\nRan all test suites.\n"
  },
  {
    "timestamp": "2026-02-12T02:13:21.585Z",
    "date": "11/2/2026, 21:13:21",
    "passed": 8,
    "failed": 5,
    "total": 13,
    "failedTests": [],
    "output": "\n> hospital-api-backend@1.0.0 test\n> jest --runInBand\n\nFAIL test/app.test.js (31.833 s)\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîê encrypt with Dotenvx: https://dotenvx.com\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\n  ‚óè App API - Main Endpoints ‚Ä∫ POST /api/run-tests - should execute tests\n\n    thrown: \"Exceeded timeout of 30000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\n    \u001b[0m \u001b[90m 167 |\u001b[39m\n     \u001b[90m 168 |\u001b[39m     \u001b[90m// Test run-tests endpoint\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 169 |\u001b[39m     test(\u001b[32m'POST /api/run-tests - should execute tests'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m     |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 170 |\u001b[39m         \u001b[36mconst\u001b[39m res \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\n     \u001b[90m 171 |\u001b[39m             \u001b[33m.\u001b[39mpost(\u001b[32m'/api/run-tests'\u001b[39m)\n     \u001b[90m 172 |\u001b[39m             \u001b[33m.\u001b[39msend({ failTests\u001b[33m:\u001b[39m \u001b[36mfalse\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at test/app.test.js:169:5\n      at Object.<anonymous> (test/app.test.js:9:1)\n\nPASS Pruebas-Unitarias-Frontend/src/specialty.spec.ts\nFAIL Pruebas-Unitarias-Backend/test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîë add access controls to secrets: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\n  ‚óè Doctores API - Pruebas Unitarias con Patr√≥n AAA ‚Ä∫ GET /api/doctores ‚Ä∫ Debe retornar un array vac√≠o inicialmente\n\n    expect(received).toEqual(expected) // deep equality\n\n    - Expected  -  1\n    + Received  + 13\n\n    - Array []\n    + Array [\n    +   Object {\n    +     \"__v\": 0,\n    +     \"_id\": \"698d370bc1a657b4cd9a960d\",\n    +     \"createdAt\": \"2026-02-12T02:12:27.477Z\",\n    +     \"email\": \"carlos.ramirez@hospital.com\",\n    +     \"lastName\": \"Ram√≠rez\",\n    +     \"licenseNumber\": \"LIC-12345\",\n    +     \"name\": \"Carlos\",\n    +     \"phone\": \"0987654321\",\n    +     \"specialty\": \"Cardiolog√≠a\",\n    +   },\n    + ]\n\n    \u001b[0m \u001b[90m 24 |\u001b[39m             \u001b[90m// ASSERT: Verificar respuesta vac√≠a\u001b[39m\n     \u001b[90m 25 |\u001b[39m             expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 26 |\u001b[39m             expect(response\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoEqual([])\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 27 |\u001b[39m         })\u001b[33m;\u001b[39m\n     \u001b[90m 28 |\u001b[39m\n     \u001b[90m 29 |\u001b[39m         test(\u001b[32m'Debe retornar todos los doctores registrados'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.<anonymous> (Pruebas-Unitarias-Backend/test/doctores.test.js:26:35)\n\n  ‚óè Doctores API - Pruebas Unitarias con Patr√≥n AAA ‚Ä∫ GET /api/doctores ‚Ä∫ Debe retornar todos los doctores registrados\n\n    expect(received).toHaveLength(expected)\n\n    Expected length: 2\n    Received length: 3\n    Received array:  [{\"__v\": 0, \"_id\": \"698d370bc1a657b4cd9a9612\", \"createdAt\": \"2026-02-12T02:12:27.504Z\", \"email\": \"carlos.ramirez@hospital.com\", \"lastName\": \"Ram√≠rez\", \"licenseNumber\": \"LIC-12345\", \"name\": \"Carlos\", \"phone\": \"0987654321\", \"specialty\": \"Cardiolog√≠a\"}, {\"__v\": 0, \"_id\": \"698d370bc5578df74713573a\", \"createdAt\": \"2026-02-12T02:12:27.503Z\", \"email\": \"carlos@hospital.com\", \"lastName\": \"Ram√≠rez\", \"licenseNumber\": \"LIC-001\", \"name\": \"Carlos\", \"phone\": \"0987654321\", \"specialty\": \"Cardiolog√≠a\"}, {\"__v\": 0, \"_id\": \"698d370bc5578df74713573b\", \"createdAt\": \"2026-02-12T02:12:27.503Z\", \"email\": \"maria@hospital.com\", \"lastName\": \"Gonz√°lez\", \"licenseNumber\": \"LIC-002\", \"name\": \"Mar√≠a\", \"phone\": \"0987654322\", \"specialty\": \"Pediatr√≠a\"}]\n\n    \u001b[0m \u001b[90m 53 |\u001b[39m             \u001b[90m// ASSERT: Verificar que retorna 2 doctores (sin importar orden)\u001b[39m\n     \u001b[90m 54 |\u001b[39m             expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 55 |\u001b[39m             expect(response\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoHaveLength(\u001b[35m2\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 56 |\u001b[39m             \u001b[36mconst\u001b[39m names \u001b[33m=\u001b[39m response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mmap(d \u001b[33m=>\u001b[39m d\u001b[33m.\u001b[39mname)\u001b[33m;\u001b[39m\n     \u001b[90m 57 |\u001b[39m             expect(names)\u001b[33m.\u001b[39mtoContain(\u001b[32m'Carlos'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 58 |\u001b[39m             expect(names)\u001b[33m.\u001b[39mtoContain(\u001b[32m'Mar√≠a'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (Pruebas-Unitarias-Backend/test/doctores.test.js:55:35)\n\n  ‚óè Doctores API - Pruebas Unitarias con Patr√≥n AAA ‚Ä∫ PUT /api/doctores/:id ‚Ä∫ Debe actualizar los datos de un doctor existente\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 500\n\n    \u001b[0m \u001b[90m 157 |\u001b[39m\n     \u001b[90m 158 |\u001b[39m             \u001b[90m// ASSERT: Verificar actualizaci√≥n\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 159 |\u001b[39m             expect(updated\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 160 |\u001b[39m             expect(updated\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mphone)\u001b[33m.\u001b[39mtoBe(\u001b[32m'0999999999'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 161 |\u001b[39m             expect(updated\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mspecialty)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Neurolog√≠a Pedi√°trica'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 162 |\u001b[39m             expect(updated\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mname)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Ana'\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// Campos no modificados permanecen\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (Pruebas-Unitarias-Backend/test/doctores.test.js:159:36)\n\nPASS Pruebas-Unitarias-Backend/test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîê encrypt with Dotenvx: https://dotenvx.com\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  enable debug logging with { debug: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nFAIL Pruebas-Unitarias-Backend/test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîê prevent building .env in docker: https://dotenvx.com/prebuild\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\n  ‚óè Especialidades API - Pruebas Unitarias con Patr√≥n AAA ‚Ä∫ PUT /api/especialidades/:id ‚Ä∫ Debe actualizar el nombre de una especialidad existente\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 404\n\n    \u001b[0m \u001b[90m 100 |\u001b[39m\n     \u001b[90m 101 |\u001b[39m             \u001b[90m// ASSERT: Verificar actualizaci√≥n\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 102 |\u001b[39m             expect(updated\u001b[33m.\u001b[39mstatusCode)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 103 |\u001b[39m             expect(updated\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mname)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Oftalmolog√≠a Pedi√°trica'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 104 |\u001b[39m         })\u001b[33m;\u001b[39m\n     \u001b[90m 105 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (Pruebas-Unitarias-Backend/test/especialidades.test.js:102:40)\n\n  ‚óè Especialidades API - Pruebas Unitarias con Patr√≥n AAA ‚Ä∫ DELETE /api/especialidades/:id ‚Ä∫ Debe eliminar una especialidad existente\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 404\n\n    \u001b[0m \u001b[90m 130 |\u001b[39m\n     \u001b[90m 131 |\u001b[39m             \u001b[90m// ASSERT: Verificar eliminaci√≥n exitosa\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 132 |\u001b[39m             expect(deleted\u001b[33m.\u001b[39mstatusCode)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 133 |\u001b[39m             expect(deleted\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mname)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Cardiolog√≠a'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 134 |\u001b[39m             \n     \u001b[90m 135 |\u001b[39m             \u001b[90m// Verificar que ya no existe en la base de datos\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (Pruebas-Unitarias-Backend/test/especialidades.test.js:132:40)\n\nFAIL test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  write to custom object with { processEnv: myObject }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\n  ‚óè Doctors API ‚Ä∫ should return 409 if license number already exists in another doctor\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 409\n    Received: 200\n\n    \u001b[0m \u001b[90m 113 |\u001b[39m             \u001b[33m.\u001b[39msend({ licenseNumber\u001b[33m:\u001b[39m \u001b[32m'LIC-001'\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 114 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 115 |\u001b[39m         expect(res\u001b[33m.\u001b[39mstatusCode)\u001b[33m.\u001b[39mtoBe(\u001b[35m409\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 116 |\u001b[39m         expect(res\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'message'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'A doctor with this license number already exists'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 117 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 118 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (test/doctores.test.js:115:32)\n\nPASS Pruebas-Unitarias-Backend/test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üõ†Ô∏è  run anywhere with `dotenvx run -- yourcommand`\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üóÇÔ∏è backup and recover secrets: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nFAIL test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  override existing env vars with { override: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\n  ‚óè Especialidades API ‚Ä∫ should reject duplicate specialty\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 409\n    Received: 201\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m         \u001b[36mconst\u001b[39m res \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\u001b[33m.\u001b[39mpost(\u001b[32m'/api/especialidades'\u001b[39m)\u001b[33m.\u001b[39msend({ name\u001b[33m:\u001b[39m \u001b[32m'cardiology'\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m         expect(res\u001b[33m.\u001b[39mstatusCode)\u001b[33m.\u001b[39mtoBe(\u001b[35m409\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m         expect(res\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'message'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'Specialty already exists'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (test/especialidades.test.js:47:32)\n\n  ‚óè Especialidades API ‚Ä∫ PUT /api/especialidades/:id should update an existing specialty\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 404\n\n    \u001b[0m \u001b[90m 59 |\u001b[39m             \u001b[33m.\u001b[39msend({ name\u001b[33m:\u001b[39m \u001b[32m'Oftalmolog√≠a Corregida'\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 60 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 61 |\u001b[39m         expect(updated\u001b[33m.\u001b[39mstatusCode)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 62 |\u001b[39m         expect(updated\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mname)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Oftalmolog√≠a Corregida'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 63 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 64 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (test/especialidades.test.js:61:36)\n\n  ‚óè Especialidades API ‚Ä∫ DELETE /api/especialidades/:id should delete a specialty\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 404\n\n    \u001b[0m \u001b[90m 80 |\u001b[39m\n     \u001b[90m 81 |\u001b[39m         \u001b[36mconst\u001b[39m deleted \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\u001b[33m.\u001b[39m\u001b[36mdelete\u001b[39m(\u001b[32m`/api/especialidades/${id}`\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 82 |\u001b[39m         expect(deleted\u001b[33m.\u001b[39mstatusCode)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 83 |\u001b[39m         expect(deleted\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mname)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Cardiolog√≠a'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 84 |\u001b[39m\n     \u001b[90m 85 |\u001b[39m         \u001b[36mconst\u001b[39m res \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\u001b[33m.\u001b[39m\u001b[36mget\u001b[39m(\u001b[32m'/api/especialidades'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (test/especialidades.test.js:82:36)\n\nPASS Pruebas-Unitarias-Frontend/src/medicine.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/patient.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/doctor.spec.ts\n\nTest Suites: 5 failed, 8 passed, 13 total\nTests:       10 failed, 146 passed, 156 total\nSnapshots:   0 total\nTime:        40.812 s\nRan all test suites.\nJest did not exit one second after the test run has completed.\n\n'This usually means that there are asynchronous operations that weren't stopped in your tests. Consider running Jest with `--detectOpenHandles` to troubleshoot this issue.\n"
  },
  {
    "timestamp": "2026-02-12T02:13:21.502Z",
    "date": "11/2/2026, 21:13:21",
    "passed": 10,
    "failed": 3,
    "total": 13,
    "failedTests": [],
    "output": "\n> hospital-api-backend@1.0.0 test\n> jest --runInBand\n\nFAIL test/app.test.js (31.638 s)\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚úÖ audit secrets and track compliance: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\n  ‚óè App API - Main Endpoints ‚Ä∫ POST /api/run-tests - should execute tests\n\n    thrown: \"Exceeded timeout of 30000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\n    \u001b[0m \u001b[90m 167 |\u001b[39m\n     \u001b[90m 168 |\u001b[39m     \u001b[90m// Test run-tests endpoint\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 169 |\u001b[39m     test(\u001b[32m'POST /api/run-tests - should execute tests'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m     |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 170 |\u001b[39m         \u001b[36mconst\u001b[39m res \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\n     \u001b[90m 171 |\u001b[39m             \u001b[33m.\u001b[39mpost(\u001b[32m'/api/run-tests'\u001b[39m)\n     \u001b[90m 172 |\u001b[39m             \u001b[33m.\u001b[39msend({ failTests\u001b[33m:\u001b[39m \u001b[36mfalse\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at test/app.test.js:169:5\n      at Object.<anonymous> (test/app.test.js:9:1)\n\nPASS Pruebas-Unitarias-Frontend/src/specialty.spec.ts\nFAIL Pruebas-Unitarias-Backend/test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  enable debug logging with { debug: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\n  ‚óè Doctores API - Pruebas Unitarias con Patr√≥n AAA ‚Ä∫ POST /api/doctores ‚Ä∫ Debe rechazar doctor con n√∫mero de licencia duplicado\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 409\n    Received: 201\n\n    \u001b[0m \u001b[90m 130 |\u001b[39m\n     \u001b[90m 131 |\u001b[39m             \u001b[90m// ASSERT: Verificar error 409 (conflicto)\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 132 |\u001b[39m             expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m409\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 133 |\u001b[39m         })\u001b[33m;\u001b[39m\n     \u001b[90m 134 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 135 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (Pruebas-Unitarias-Backend/test/doctores.test.js:132:37)\n\n  ‚óè Doctores API - Pruebas Unitarias con Patr√≥n AAA ‚Ä∫ PUT /api/doctores/:id ‚Ä∫ Debe actualizar los datos de un doctor existente\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 404\n\n    \u001b[0m \u001b[90m 157 |\u001b[39m\n     \u001b[90m 158 |\u001b[39m             \u001b[90m// ASSERT: Verificar actualizaci√≥n\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 159 |\u001b[39m             expect(updated\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 160 |\u001b[39m             expect(updated\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mphone)\u001b[33m.\u001b[39mtoBe(\u001b[32m'0999999999'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 161 |\u001b[39m             expect(updated\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mspecialty)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Neurolog√≠a Pedi√°trica'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 162 |\u001b[39m             expect(updated\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mname)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Ana'\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// Campos no modificados permanecen\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (Pruebas-Unitarias-Backend/test/doctores.test.js:159:36)\n\nPASS Pruebas-Unitarias-Backend/test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîÑ add secrets lifecycle management: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  specify custom .env file path with { path: '/custom/path/.env' }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nFAIL Pruebas-Unitarias-Backend/test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  override existing env vars with { override: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\n  ‚óè Especialidades API - Pruebas Unitarias con Patr√≥n AAA ‚Ä∫ GET /api/especialidades ‚Ä∫ Debe retornar todas las especialidades registradas\n\n    expect(received).toHaveLength(expected)\n\n    Expected length: 3\n    Received length: 0\n    Received array:  []\n\n    \u001b[0m \u001b[90m 40 |\u001b[39m             \u001b[90m// ASSERT: Verificar que retorna 3 especialidades (sin importar orden)\u001b[39m\n     \u001b[90m 41 |\u001b[39m             expect(res\u001b[33m.\u001b[39mstatusCode)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 42 |\u001b[39m             expect(res\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoHaveLength(\u001b[35m3\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 43 |\u001b[39m             \u001b[36mconst\u001b[39m names \u001b[33m=\u001b[39m res\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mmap(e \u001b[33m=>\u001b[39m e\u001b[33m.\u001b[39mname)\u001b[33m;\u001b[39m\n     \u001b[90m 44 |\u001b[39m             expect(names)\u001b[33m.\u001b[39mtoContain(\u001b[32m'Cardiolog√≠a'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m             expect(names)\u001b[33m.\u001b[39mtoContain(\u001b[32m'Pediatr√≠a'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (Pruebas-Unitarias-Backend/test/especialidades.test.js:42:30)\n\n  ‚óè Especialidades API - Pruebas Unitarias con Patr√≥n AAA ‚Ä∫ POST /api/especialidades ‚Ä∫ Debe rechazar especialidad duplicada (case-insensitive)\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 409\n    Received: 201\n\n    \u001b[0m \u001b[90m 82 |\u001b[39m\n     \u001b[90m 83 |\u001b[39m             \u001b[90m// ASSERT: Verificar error 409 (conflicto)\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 84 |\u001b[39m             expect(res\u001b[33m.\u001b[39mstatusCode)\u001b[33m.\u001b[39mtoBe(\u001b[35m409\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 85 |\u001b[39m             expect(res\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'message'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'Specialty already exists'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 86 |\u001b[39m         })\u001b[33m;\u001b[39m\n     \u001b[90m 87 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (Pruebas-Unitarias-Backend/test/especialidades.test.js:84:36)\n\n  ‚óè Especialidades API - Pruebas Unitarias con Patr√≥n AAA ‚Ä∫ PUT /api/especialidades/:id ‚Ä∫ Debe actualizar el nombre de una especialidad existente\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 404\n\n    \u001b[0m \u001b[90m 100 |\u001b[39m\n     \u001b[90m 101 |\u001b[39m             \u001b[90m// ASSERT: Verificar actualizaci√≥n\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 102 |\u001b[39m             expect(updated\u001b[33m.\u001b[39mstatusCode)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 103 |\u001b[39m             expect(updated\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mname)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Oftalmolog√≠a Pedi√°trica'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 104 |\u001b[39m         })\u001b[33m;\u001b[39m\n     \u001b[90m 105 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (Pruebas-Unitarias-Backend/test/especialidades.test.js:102:40)\n\nPASS test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîê prevent building .env in docker: https://dotenvx.com/prebuild\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  load multiple .env files with { path: ['.env.local', '.env'] }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  load multiple .env files with { path: ['.env.local', '.env'] }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  load multiple .env files with { path: ['.env.local', '.env'] }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Frontend/src/medicine.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/patient.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/doctor.spec.ts\n\nTest Suites: 3 failed, 10 passed, 13 total\nTests:       6 failed, 150 passed, 156 total\nSnapshots:   0 total\nTime:        41.058 s\nRan all test suites.\nJest did not exit one second after the test run has completed.\n\n'This usually means that there are asynchronous operations that weren't stopped in your tests. Consider running Jest with `--detectOpenHandles` to troubleshoot this issue.\n"
  },
  {
    "timestamp": "2026-02-12T02:13:21.427Z",
    "date": "11/2/2026, 21:13:21",
    "passed": 11,
    "failed": 2,
    "total": 13,
    "failedTests": [],
    "output": "\n> hospital-api-backend@1.0.0 test\n> jest --runInBand\n\nFAIL test/app.test.js (31.656 s)\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  load multiple .env files with { path: ['.env.local', '.env'] }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\n  ‚óè App API - Main Endpoints ‚Ä∫ POST /api/run-tests - should execute tests\n\n    thrown: \"Exceeded timeout of 30000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\n    \u001b[0m \u001b[90m 167 |\u001b[39m\n     \u001b[90m 168 |\u001b[39m     \u001b[90m// Test run-tests endpoint\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 169 |\u001b[39m     test(\u001b[32m'POST /api/run-tests - should execute tests'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m     |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 170 |\u001b[39m         \u001b[36mconst\u001b[39m res \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\n     \u001b[90m 171 |\u001b[39m             \u001b[33m.\u001b[39mpost(\u001b[32m'/api/run-tests'\u001b[39m)\n     \u001b[90m 172 |\u001b[39m             \u001b[33m.\u001b[39msend({ failTests\u001b[33m:\u001b[39m \u001b[36mfalse\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at test/app.test.js:169:5\n      at Object.<anonymous> (test/app.test.js:9:1)\n\nPASS Pruebas-Unitarias-Frontend/src/specialty.spec.ts\nPASS Pruebas-Unitarias-Backend/test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üóÇÔ∏è backup and recover secrets: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  enable debug logging with { debug: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üì° add observability to secrets: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üì° add observability to secrets: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  load multiple .env files with { path: ['.env.local', '.env'] }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîë add access controls to secrets: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  write to custom object with { processEnv: myObject }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nFAIL test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  write to custom object with { processEnv: myObject }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\n  ‚óè Especialidades API ‚Ä∫ DELETE /api/especialidades/:id should delete a specialty\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 404\n\n    \u001b[0m \u001b[90m 80 |\u001b[39m\n     \u001b[90m 81 |\u001b[39m         \u001b[36mconst\u001b[39m deleted \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\u001b[33m.\u001b[39m\u001b[36mdelete\u001b[39m(\u001b[32m`/api/especialidades/${id}`\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 82 |\u001b[39m         expect(deleted\u001b[33m.\u001b[39mstatusCode)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 83 |\u001b[39m         expect(deleted\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mname)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Cardiolog√≠a'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 84 |\u001b[39m\n     \u001b[90m 85 |\u001b[39m         \u001b[36mconst\u001b[39m res \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\u001b[33m.\u001b[39m\u001b[36mget\u001b[39m(\u001b[32m'/api/especialidades'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (test/especialidades.test.js:82:36)\n\nPASS Pruebas-Unitarias-Frontend/src/medicine.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/patient.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/doctor.spec.ts\n\nTest Suites: 2 failed, 11 passed, 13 total\nTests:       2 failed, 154 passed, 156 total\nSnapshots:   0 total\nTime:        40.748 s\nRan all test suites.\nJest did not exit one second after the test run has completed.\n\n'This usually means that there are asynchronous operations that weren't stopped in your tests. Consider running Jest with `--detectOpenHandles` to troubleshoot this issue.\n"
  },
  {
    "timestamp": "2026-02-12T02:13:21.349Z",
    "date": "11/2/2026, 21:13:21",
    "passed": 11,
    "failed": 2,
    "total": 13,
    "failedTests": [],
    "output": "\n> hospital-api-backend@1.0.0 test\n> jest --runInBand\n\nFAIL test/app.test.js (31.648 s)\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  specify custom .env file path with { path: '/custom/path/.env' }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\n  ‚óè App API - Main Endpoints ‚Ä∫ POST /api/run-tests - should execute tests\n\n    thrown: \"Exceeded timeout of 30000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\n    \u001b[0m \u001b[90m 167 |\u001b[39m\n     \u001b[90m 168 |\u001b[39m     \u001b[90m// Test run-tests endpoint\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 169 |\u001b[39m     test(\u001b[32m'POST /api/run-tests - should execute tests'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m     |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 170 |\u001b[39m         \u001b[36mconst\u001b[39m res \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\n     \u001b[90m 171 |\u001b[39m             \u001b[33m.\u001b[39mpost(\u001b[32m'/api/run-tests'\u001b[39m)\n     \u001b[90m 172 |\u001b[39m             \u001b[33m.\u001b[39msend({ failTests\u001b[33m:\u001b[39m \u001b[36mfalse\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at test/app.test.js:169:5\n      at Object.<anonymous> (test/app.test.js:9:1)\n\nPASS Pruebas-Unitarias-Frontend/src/specialty.spec.ts\nPASS Pruebas-Unitarias-Backend/test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîê encrypt with Dotenvx: https://dotenvx.com\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîÑ add secrets lifecycle management: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  suppress all logs with { quiet: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîê encrypt with Dotenvx: https://dotenvx.com\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nFAIL test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîê encrypt with Dotenvx: https://dotenvx.com\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\n  ‚óè Doctors API ‚Ä∫ POST /api/doctores - should return 409 error if license number already exists\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 409\n    Received: 201\n\n    \u001b[0m \u001b[90m 86 |\u001b[39m             \u001b[33m.\u001b[39msend(duplicateDoctor)\u001b[33m;\u001b[39m\n     \u001b[90m 87 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 88 |\u001b[39m         expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m409\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 89 |\u001b[39m         expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mmessage)\u001b[33m.\u001b[39mtoBe(\u001b[32m'A doctor with this license number already exists'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 90 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 91 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (test/doctores.test.js:88:33)\n\n  ‚óè Doctors API ‚Ä∫ should return 409 if license number already exists in another doctor\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 409\n    Received: 200\n\n    \u001b[0m \u001b[90m 113 |\u001b[39m             \u001b[33m.\u001b[39msend({ licenseNumber\u001b[33m:\u001b[39m \u001b[32m'LIC-001'\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 114 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 115 |\u001b[39m         expect(res\u001b[33m.\u001b[39mstatusCode)\u001b[33m.\u001b[39mtoBe(\u001b[35m409\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 116 |\u001b[39m         expect(res\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'message'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'A doctor with this license number already exists'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 117 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 118 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (test/doctores.test.js:115:32)\n\n  ‚óè Doctors API ‚Ä∫ should allow updating doctor with same license number\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 500\n\n    \u001b[0m \u001b[90m 134 |\u001b[39m             })\u001b[33m;\u001b[39m\n     \u001b[90m 135 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 136 |\u001b[39m         expect(res\u001b[33m.\u001b[39mstatusCode)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 137 |\u001b[39m         expect(res\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'licenseNumber'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'LIC-00001'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 138 |\u001b[39m         expect(res\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'name'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'John Updated'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 139 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (test/doctores.test.js:136:32)\n\n  ‚óè Doctors API ‚Ä∫ GET /api/doctores - should return array with doctors\n\n    expect(received).toBeGreaterThan(expected)\n\n    Expected: > 0\n    Received:   0\n\n    \u001b[0m \u001b[90m 154 |\u001b[39m         expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 155 |\u001b[39m         expect(\u001b[33mArray\u001b[39m\u001b[33m.\u001b[39misArray(response\u001b[33m.\u001b[39mbody))\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 156 |\u001b[39m         expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mlength)\u001b[33m.\u001b[39mtoBeGreaterThan(\u001b[35m0\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 157 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 158 |\u001b[39m\n     \u001b[90m 159 |\u001b[39m     \u001b[90m// Test PUT - Update doctor\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (test/doctores.test.js:156:38)\n\nPASS Pruebas-Unitarias-Backend/test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üì° add observability to secrets: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  suppress all logs with { quiet: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  override existing env vars with { override: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Frontend/src/medicine.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/patient.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/doctor.spec.ts\n\nTest Suites: 2 failed, 11 passed, 13 total\nTests:       5 failed, 151 passed, 156 total\nSnapshots:   0 total\nTime:        40.697 s\nRan all test suites.\nJest did not exit one second after the test run has completed.\n\n'This usually means that there are asynchronous operations that weren't stopped in your tests. Consider running Jest with `--detectOpenHandles` to troubleshoot this issue.\n"
  },
  {
    "timestamp": "2026-02-12T02:13:21.273Z",
    "date": "11/2/2026, 21:13:21",
    "passed": 11,
    "failed": 2,
    "total": 13,
    "failedTests": [],
    "output": "\n> hospital-api-backend@1.0.0 test\n> jest --runInBand\n\nFAIL test/app.test.js (31.65 s)\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  suppress all logs with { quiet: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\n  ‚óè App API - Main Endpoints ‚Ä∫ POST /api/run-tests - should execute tests\n\n    thrown: \"Exceeded timeout of 30000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\n    \u001b[0m \u001b[90m 167 |\u001b[39m\n     \u001b[90m 168 |\u001b[39m     \u001b[90m// Test run-tests endpoint\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 169 |\u001b[39m     test(\u001b[32m'POST /api/run-tests - should execute tests'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m     |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 170 |\u001b[39m         \u001b[36mconst\u001b[39m res \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\n     \u001b[90m 171 |\u001b[39m             \u001b[33m.\u001b[39mpost(\u001b[32m'/api/run-tests'\u001b[39m)\n     \u001b[90m 172 |\u001b[39m             \u001b[33m.\u001b[39msend({ failTests\u001b[33m:\u001b[39m \u001b[36mfalse\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at test/app.test.js:169:5\n      at Object.<anonymous> (test/app.test.js:9:1)\n\nPASS Pruebas-Unitarias-Frontend/src/specialty.spec.ts\nPASS Pruebas-Unitarias-Backend/test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚úÖ audit secrets and track compliance: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üõ†Ô∏è  run anywhere with `dotenvx run -- yourcommand`\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üë• sync secrets across teammates & machines: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîê encrypt with Dotenvx: https://dotenvx.com\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üóÇÔ∏è backup and recover secrets: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üóÇÔ∏è backup and recover secrets: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîë add access controls to secrets: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nFAIL test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  enable debug logging with { debug: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\n  ‚óè Especialidades API ‚Ä∫ DELETE /api/especialidades/:id should delete a specialty\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 404\n\n    \u001b[0m \u001b[90m 80 |\u001b[39m\n     \u001b[90m 81 |\u001b[39m         \u001b[36mconst\u001b[39m deleted \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\u001b[33m.\u001b[39m\u001b[36mdelete\u001b[39m(\u001b[32m`/api/especialidades/${id}`\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 82 |\u001b[39m         expect(deleted\u001b[33m.\u001b[39mstatusCode)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 83 |\u001b[39m         expect(deleted\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mname)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Cardiolog√≠a'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 84 |\u001b[39m\n     \u001b[90m 85 |\u001b[39m         \u001b[36mconst\u001b[39m res \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\u001b[33m.\u001b[39m\u001b[36mget\u001b[39m(\u001b[32m'/api/especialidades'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (test/especialidades.test.js:82:36)\n\nPASS Pruebas-Unitarias-Frontend/src/medicine.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/patient.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/doctor.spec.ts\n\nTest Suites: 2 failed, 11 passed, 13 total\nTests:       2 failed, 154 passed, 156 total\nSnapshots:   0 total\nTime:        40.918 s\nRan all test suites.\nJest did not exit one second after the test run has completed.\n\n'This usually means that there are asynchronous operations that weren't stopped in your tests. Consider running Jest with `--detectOpenHandles` to troubleshoot this issue.\n"
  },
  {
    "timestamp": "2026-02-12T02:13:21.196Z",
    "date": "11/2/2026, 21:13:21",
    "passed": 11,
    "failed": 2,
    "total": 13,
    "failedTests": [],
    "output": "\n> hospital-api-backend@1.0.0 test\n> jest --runInBand\n\nFAIL test/app.test.js (31.714 s)\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  override existing env vars with { override: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\n  ‚óè App API - Main Endpoints ‚Ä∫ POST /api/run-tests - should execute tests\n\n    thrown: \"Exceeded timeout of 30000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\n    \u001b[0m \u001b[90m 167 |\u001b[39m\n     \u001b[90m 168 |\u001b[39m     \u001b[90m// Test run-tests endpoint\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 169 |\u001b[39m     test(\u001b[32m'POST /api/run-tests - should execute tests'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m     |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 170 |\u001b[39m         \u001b[36mconst\u001b[39m res \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\n     \u001b[90m 171 |\u001b[39m             \u001b[33m.\u001b[39mpost(\u001b[32m'/api/run-tests'\u001b[39m)\n     \u001b[90m 172 |\u001b[39m             \u001b[33m.\u001b[39msend({ failTests\u001b[33m:\u001b[39m \u001b[36mfalse\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at test/app.test.js:169:5\n      at Object.<anonymous> (test/app.test.js:9:1)\n\nPASS Pruebas-Unitarias-Frontend/src/specialty.spec.ts\nPASS Pruebas-Unitarias-Backend/test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üóÇÔ∏è backup and recover secrets: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîê prevent building .env in docker: https://dotenvx.com/prebuild\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  write to custom object with { processEnv: myObject }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nFAIL Pruebas-Unitarias-Backend/test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üë• sync secrets across teammates & machines: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\n  ‚óè Especialidades API - Pruebas Unitarias con Patr√≥n AAA ‚Ä∫ GET /api/especialidades ‚Ä∫ Debe retornar todas las especialidades registradas\n\n    expect(received).toHaveLength(expected)\n\n    Expected length: 3\n    Received length: 1\n    Received array:  [{\"__v\": 0, \"_id\": \"698d371cfa23a4e2ad862178\", \"createdAt\": \"2026-02-12T02:12:44.382Z\", \"name\": \"Neurolog√≠a\"}]\n\n    \u001b[0m \u001b[90m 40 |\u001b[39m             \u001b[90m// ASSERT: Verificar que retorna 3 especialidades (sin importar orden)\u001b[39m\n     \u001b[90m 41 |\u001b[39m             expect(res\u001b[33m.\u001b[39mstatusCode)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 42 |\u001b[39m             expect(res\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoHaveLength(\u001b[35m3\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 43 |\u001b[39m             \u001b[36mconst\u001b[39m names \u001b[33m=\u001b[39m res\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mmap(e \u001b[33m=>\u001b[39m e\u001b[33m.\u001b[39mname)\u001b[33m;\u001b[39m\n     \u001b[90m 44 |\u001b[39m             expect(names)\u001b[33m.\u001b[39mtoContain(\u001b[32m'Cardiolog√≠a'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m             expect(names)\u001b[33m.\u001b[39mtoContain(\u001b[32m'Pediatr√≠a'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (Pruebas-Unitarias-Backend/test/especialidades.test.js:42:30)\n\n  ‚óè Especialidades API - Pruebas Unitarias con Patr√≥n AAA ‚Ä∫ POST /api/especialidades ‚Ä∫ Debe rechazar especialidad duplicada (case-insensitive)\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 409\n    Received: 201\n\n    \u001b[0m \u001b[90m 82 |\u001b[39m\n     \u001b[90m 83 |\u001b[39m             \u001b[90m// ASSERT: Verificar error 409 (conflicto)\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 84 |\u001b[39m             expect(res\u001b[33m.\u001b[39mstatusCode)\u001b[33m.\u001b[39mtoBe(\u001b[35m409\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 85 |\u001b[39m             expect(res\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'message'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'Specialty already exists'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 86 |\u001b[39m         })\u001b[33m;\u001b[39m\n     \u001b[90m 87 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (Pruebas-Unitarias-Backend/test/especialidades.test.js:84:36)\n\n  ‚óè Especialidades API - Pruebas Unitarias con Patr√≥n AAA ‚Ä∫ PUT /api/especialidades/:id ‚Ä∫ Debe actualizar el nombre de una especialidad existente\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 500\n\n    \u001b[0m \u001b[90m 100 |\u001b[39m\n     \u001b[90m 101 |\u001b[39m             \u001b[90m// ASSERT: Verificar actualizaci√≥n\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 102 |\u001b[39m             expect(updated\u001b[33m.\u001b[39mstatusCode)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 103 |\u001b[39m             expect(updated\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mname)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Oftalmolog√≠a Pedi√°trica'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 104 |\u001b[39m         })\u001b[33m;\u001b[39m\n     \u001b[90m 105 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (Pruebas-Unitarias-Backend/test/especialidades.test.js:102:40)\n\n  ‚óè Especialidades API - Pruebas Unitarias con Patr√≥n AAA ‚Ä∫ DELETE /api/especialidades/:id ‚Ä∫ Debe eliminar una especialidad existente\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 404\n\n    \u001b[0m \u001b[90m 130 |\u001b[39m\n     \u001b[90m 131 |\u001b[39m             \u001b[90m// ASSERT: Verificar eliminaci√≥n exitosa\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 132 |\u001b[39m             expect(deleted\u001b[33m.\u001b[39mstatusCode)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 133 |\u001b[39m             expect(deleted\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mname)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Cardiolog√≠a'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 134 |\u001b[39m             \n     \u001b[90m 135 |\u001b[39m             \u001b[90m// Verificar que ya no existe en la base de datos\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (Pruebas-Unitarias-Backend/test/especialidades.test.js:132:40)\n\nPASS test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîê prevent committing .env to code: https://dotenvx.com/precommit\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  load multiple .env files with { path: ['.env.local', '.env'] }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  specify custom .env file path with { path: '/custom/path/.env' }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  write to custom object with { processEnv: myObject }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Frontend/src/medicine.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/patient.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/doctor.spec.ts\n\nTest Suites: 2 failed, 11 passed, 13 total\nTests:       5 failed, 151 passed, 156 total\nSnapshots:   0 total\nTime:        41.018 s\nRan all test suites.\nJest did not exit one second after the test run has completed.\n\n'This usually means that there are asynchronous operations that weren't stopped in your tests. Consider running Jest with `--detectOpenHandles` to troubleshoot this issue.\n"
  },
  {
    "timestamp": "2026-02-12T02:13:21.119Z",
    "date": "11/2/2026, 21:13:21",
    "passed": 11,
    "failed": 2,
    "total": 13,
    "failedTests": [],
    "output": "\n> hospital-api-backend@1.0.0 test\n> jest --runInBand\n\nFAIL test/app.test.js (31.66 s)\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîÑ add secrets lifecycle management: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\n  ‚óè App API - Main Endpoints ‚Ä∫ POST /api/run-tests - should execute tests\n\n    thrown: \"Exceeded timeout of 30000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\n    \u001b[0m \u001b[90m 167 |\u001b[39m\n     \u001b[90m 168 |\u001b[39m     \u001b[90m// Test run-tests endpoint\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 169 |\u001b[39m     test(\u001b[32m'POST /api/run-tests - should execute tests'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m     |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 170 |\u001b[39m         \u001b[36mconst\u001b[39m res \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\n     \u001b[90m 171 |\u001b[39m             \u001b[33m.\u001b[39mpost(\u001b[32m'/api/run-tests'\u001b[39m)\n     \u001b[90m 172 |\u001b[39m             \u001b[33m.\u001b[39msend({ failTests\u001b[33m:\u001b[39m \u001b[36mfalse\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at test/app.test.js:169:5\n      at Object.<anonymous> (test/app.test.js:9:1)\n\nPASS Pruebas-Unitarias-Frontend/src/specialty.spec.ts\nFAIL Pruebas-Unitarias-Backend/test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  load multiple .env files with { path: ['.env.local', '.env'] }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\n  ‚óè Doctores API - Pruebas Unitarias con Patr√≥n AAA ‚Ä∫ GET /api/doctores ‚Ä∫ Debe retornar todos los doctores registrados\n\n    expect(received).toHaveLength(expected)\n\n    Expected length: 2\n    Received length: 1\n    Received array:  [{\"__v\": 0, \"_id\": \"698d371c573084c1037a4d5c\", \"createdAt\": \"2026-02-12T02:12:44.500Z\", \"email\": \"maria@hospital.com\", \"lastName\": \"Gonz√°lez\", \"licenseNumber\": \"LIC-002\", \"name\": \"Mar√≠a\", \"phone\": \"0987654322\", \"specialty\": \"Pediatr√≠a\"}]\n\n    \u001b[0m \u001b[90m 53 |\u001b[39m             \u001b[90m// ASSERT: Verificar que retorna 2 doctores (sin importar orden)\u001b[39m\n     \u001b[90m 54 |\u001b[39m             expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 55 |\u001b[39m             expect(response\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoHaveLength(\u001b[35m2\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 56 |\u001b[39m             \u001b[36mconst\u001b[39m names \u001b[33m=\u001b[39m response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mmap(d \u001b[33m=>\u001b[39m d\u001b[33m.\u001b[39mname)\u001b[33m;\u001b[39m\n     \u001b[90m 57 |\u001b[39m             expect(names)\u001b[33m.\u001b[39mtoContain(\u001b[32m'Carlos'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 58 |\u001b[39m             expect(names)\u001b[33m.\u001b[39mtoContain(\u001b[32m'Mar√≠a'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (Pruebas-Unitarias-Backend/test/doctores.test.js:55:35)\n\nPASS Pruebas-Unitarias-Backend/test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  specify custom .env file path with { path: '/custom/path/.env' }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  specify custom .env file path with { path: '/custom/path/.env' }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üë• sync secrets across teammates & machines: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  override existing env vars with { override: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  override existing env vars with { override: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  override existing env vars with { override: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  override existing env vars with { override: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Frontend/src/medicine.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/patient.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/doctor.spec.ts\n\nTest Suites: 2 failed, 11 passed, 13 total\nTests:       2 failed, 154 passed, 156 total\nSnapshots:   0 total\nTime:        40.825 s\nRan all test suites.\nJest did not exit one second after the test run has completed.\n\n'This usually means that there are asynchronous operations that weren't stopped in your tests. Consider running Jest with `--detectOpenHandles` to troubleshoot this issue.\n"
  },
  {
    "timestamp": "2026-02-12T02:13:21.037Z",
    "date": "11/2/2026, 21:13:21",
    "passed": 12,
    "failed": 1,
    "total": 13,
    "failedTests": [],
    "output": "\n> hospital-api-backend@1.0.0 test\n> jest --runInBand\n\nFAIL test/app.test.js (31.696 s)\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  specify custom .env file path with { path: '/custom/path/.env' }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\n  ‚óè App API - Main Endpoints ‚Ä∫ POST /api/run-tests - should execute tests\n\n    thrown: \"Exceeded timeout of 30000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\n    \u001b[0m \u001b[90m 167 |\u001b[39m\n     \u001b[90m 168 |\u001b[39m     \u001b[90m// Test run-tests endpoint\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 169 |\u001b[39m     test(\u001b[32m'POST /api/run-tests - should execute tests'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m     |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 170 |\u001b[39m         \u001b[36mconst\u001b[39m res \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\n     \u001b[90m 171 |\u001b[39m             \u001b[33m.\u001b[39mpost(\u001b[32m'/api/run-tests'\u001b[39m)\n     \u001b[90m 172 |\u001b[39m             \u001b[33m.\u001b[39msend({ failTests\u001b[33m:\u001b[39m \u001b[36mfalse\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at test/app.test.js:169:5\n      at Object.<anonymous> (test/app.test.js:9:1)\n\nPASS Pruebas-Unitarias-Frontend/src/specialty.spec.ts\nPASS Pruebas-Unitarias-Backend/test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîÑ add secrets lifecycle management: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  write to custom object with { processEnv: myObject }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  override existing env vars with { override: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîÑ add secrets lifecycle management: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîê prevent committing .env to code: https://dotenvx.com/precommit\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  suppress all logs with { quiet: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üì° add observability to secrets: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  write to custom object with { processEnv: myObject }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Frontend/src/medicine.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/patient.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/doctor.spec.ts\n\nTest Suites: 1 failed, 12 passed, 13 total\nTests:       1 failed, 155 passed, 156 total\nSnapshots:   0 total\nTime:        40.739 s\nRan all test suites.\nJest did not exit one second after the test run has completed.\n\n'This usually means that there are asynchronous operations that weren't stopped in your tests. Consider running Jest with `--detectOpenHandles` to troubleshoot this issue.\n"
  },
  {
    "timestamp": "2026-02-12T02:13:20.936Z",
    "date": "11/2/2026, 21:13:20",
    "passed": 11,
    "failed": 2,
    "total": 13,
    "failedTests": [],
    "output": "\n> hospital-api-backend@1.0.0 test\n> jest --runInBand\n\nFAIL test/app.test.js (31.655 s)\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  write to custom object with { processEnv: myObject }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\n  ‚óè App API - Main Endpoints ‚Ä∫ POST /api/run-tests - should execute tests\n\n    thrown: \"Exceeded timeout of 30000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\n    \u001b[0m \u001b[90m 167 |\u001b[39m\n     \u001b[90m 168 |\u001b[39m     \u001b[90m// Test run-tests endpoint\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 169 |\u001b[39m     test(\u001b[32m'POST /api/run-tests - should execute tests'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m     |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 170 |\u001b[39m         \u001b[36mconst\u001b[39m res \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\n     \u001b[90m 171 |\u001b[39m             \u001b[33m.\u001b[39mpost(\u001b[32m'/api/run-tests'\u001b[39m)\n     \u001b[90m 172 |\u001b[39m             \u001b[33m.\u001b[39msend({ failTests\u001b[33m:\u001b[39m \u001b[36mfalse\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at test/app.test.js:169:5\n      at Object.<anonymous> (test/app.test.js:9:1)\n\nPASS Pruebas-Unitarias-Frontend/src/specialty.spec.ts\nPASS Pruebas-Unitarias-Backend/test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  override existing env vars with { override: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üì° add observability to secrets: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚úÖ audit secrets and track compliance: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  load multiple .env files with { path: ['.env.local', '.env'] }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîê encrypt with Dotenvx: https://dotenvx.com\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nFAIL Pruebas-Unitarias-Backend/test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üì° add observability to secrets: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\n  ‚óè Medicamentos API - Pruebas Unitarias con Patr√≥n AAA ‚Ä∫ PUT /api/medicamentos/:id ‚Ä∫ Debe actualizar el precio de un medicamento existente\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 404\n\n    \u001b[0m \u001b[90m 117 |\u001b[39m\n     \u001b[90m 118 |\u001b[39m             \u001b[90m// ASSERT: Verificar actualizaci√≥n de precio\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 119 |\u001b[39m             expect(updated\u001b[33m.\u001b[39mstatusCode)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 120 |\u001b[39m             expect(updated\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mprice)\u001b[33m.\u001b[39mtoBe(\u001b[35m4.00\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 121 |\u001b[39m             expect(updated\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mname)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Aspirina'\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// Otros campos no cambian\u001b[39m\n     \u001b[90m 122 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (Pruebas-Unitarias-Backend/test/medicamentos.test.js:119:40)\n\n  ‚óè Medicamentos API - Pruebas Unitarias con Patr√≥n AAA ‚Ä∫ DELETE /api/medicamentos/:id ‚Ä∫ Debe eliminar un medicamento existente\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 404\n\n    \u001b[0m \u001b[90m 185 |\u001b[39m\n     \u001b[90m 186 |\u001b[39m             \u001b[90m// ASSERT: Verificar eliminaci√≥n exitosa\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 187 |\u001b[39m             expect(deleted\u001b[33m.\u001b[39mstatusCode)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 188 |\u001b[39m             expect(deleted\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mname)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Amoxicilina'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 189 |\u001b[39m             \n     \u001b[90m 190 |\u001b[39m             \u001b[90m// Verificar que ya no existe en la base de datos\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (Pruebas-Unitarias-Backend/test/medicamentos.test.js:187:40)\n\nPASS test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  specify custom .env file path with { path: '/custom/path/.env' }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîÑ add secrets lifecycle management: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Frontend/src/medicine.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/patient.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/doctor.spec.ts\n\nTest Suites: 2 failed, 11 passed, 13 total\nTests:       3 failed, 153 passed, 156 total\nSnapshots:   0 total\nTime:        40.697 s\nRan all test suites.\nJest did not exit one second after the test run has completed.\n\n'This usually means that there are asynchronous operations that weren't stopped in your tests. Consider running Jest with `--detectOpenHandles` to troubleshoot this issue.\n"
  },
  {
    "timestamp": "2026-02-12T02:13:20.852Z",
    "date": "11/2/2026, 21:13:20",
    "passed": 12,
    "failed": 1,
    "total": 13,
    "failedTests": [],
    "output": "\n> hospital-api-backend@1.0.0 test\n> jest --runInBand\n\nFAIL test/app.test.js (31.916 s)\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîê prevent committing .env to code: https://dotenvx.com/precommit\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\n  ‚óè App API - Main Endpoints ‚Ä∫ POST /api/run-tests - should execute tests\n\n    thrown: \"Exceeded timeout of 30000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\n    \u001b[0m \u001b[90m 167 |\u001b[39m\n     \u001b[90m 168 |\u001b[39m     \u001b[90m// Test run-tests endpoint\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 169 |\u001b[39m     test(\u001b[32m'POST /api/run-tests - should execute tests'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m     |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 170 |\u001b[39m         \u001b[36mconst\u001b[39m res \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\n     \u001b[90m 171 |\u001b[39m             \u001b[33m.\u001b[39mpost(\u001b[32m'/api/run-tests'\u001b[39m)\n     \u001b[90m 172 |\u001b[39m             \u001b[33m.\u001b[39msend({ failTests\u001b[33m:\u001b[39m \u001b[36mfalse\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at test/app.test.js:169:5\n      at Object.<anonymous> (test/app.test.js:9:1)\n\nPASS Pruebas-Unitarias-Frontend/src/specialty.spec.ts\nPASS Pruebas-Unitarias-Backend/test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  specify custom .env file path with { path: '/custom/path/.env' }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  suppress all logs with { quiet: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üì° add observability to secrets: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîê prevent committing .env to code: https://dotenvx.com/precommit\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîÑ add secrets lifecycle management: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚úÖ audit secrets and track compliance: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  suppress all logs with { quiet: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  load multiple .env files with { path: ['.env.local', '.env'] }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Frontend/src/medicine.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/patient.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/doctor.spec.ts\n\nTest Suites: 1 failed, 12 passed, 13 total\nTests:       1 failed, 155 passed, 156 total\nSnapshots:   0 total\nTime:        40.413 s\nRan all test suites.\nJest did not exit one second after the test run has completed.\n\n'This usually means that there are asynchronous operations that weren't stopped in your tests. Consider running Jest with `--detectOpenHandles` to troubleshoot this issue.\n"
  },
  {
    "timestamp": "2026-02-12T02:13:20.777Z",
    "date": "11/2/2026, 21:13:20",
    "passed": 11,
    "failed": 2,
    "total": 13,
    "failedTests": [],
    "output": "\n> hospital-api-backend@1.0.0 test\n> jest --runInBand\n\nFAIL test/app.test.js (32.323 s)\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚úÖ audit secrets and track compliance: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\n  ‚óè App API - Main Endpoints ‚Ä∫ POST /api/run-tests - should execute tests\n\n    thrown: \"Exceeded timeout of 30000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\n    \u001b[0m \u001b[90m 167 |\u001b[39m\n     \u001b[90m 168 |\u001b[39m     \u001b[90m// Test run-tests endpoint\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 169 |\u001b[39m     test(\u001b[32m'POST /api/run-tests - should execute tests'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m     |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 170 |\u001b[39m         \u001b[36mconst\u001b[39m res \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\n     \u001b[90m 171 |\u001b[39m             \u001b[33m.\u001b[39mpost(\u001b[32m'/api/run-tests'\u001b[39m)\n     \u001b[90m 172 |\u001b[39m             \u001b[33m.\u001b[39msend({ failTests\u001b[33m:\u001b[39m \u001b[36mfalse\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at test/app.test.js:169:5\n      at Object.<anonymous> (test/app.test.js:9:1)\n\nPASS Pruebas-Unitarias-Frontend/src/specialty.spec.ts\nPASS Pruebas-Unitarias-Backend/test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  load multiple .env files with { path: ['.env.local', '.env'] }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  override existing env vars with { override: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  enable debug logging with { debug: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üõ†Ô∏è  run anywhere with `dotenvx run -- yourcommand`\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nFAIL test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚úÖ audit secrets and track compliance: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\n  ‚óè Doctors API ‚Ä∫ PUT /api/doctores/:id - should return 404 if doctor does not exist\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 404\n\n    \u001b[0m \u001b[90m 198 |\u001b[39m         \u001b[36mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\u001b[33m.\u001b[39m\u001b[36mdelete\u001b[39m(\u001b[32m`/api/doctores/${doctor.body._id}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 199 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 200 |\u001b[39m         expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 201 |\u001b[39m         expect(response\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'_id'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 202 |\u001b[39m         expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39m_id)\u001b[33m.\u001b[39mtoBe(doctor\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39m_id)\u001b[33m;\u001b[39m\n     \u001b[90m 203 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (test/doctores.test.js:200:33)\n\nPASS Pruebas-Unitarias-Backend/test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  override existing env vars with { override: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  override existing env vars with { override: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîê prevent building .env in docker: https://dotenvx.com/prebuild\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Frontend/src/medicine.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/patient.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/doctor.spec.ts\n\nTest Suites: 2 failed, 11 passed, 13 total\nTests:       2 failed, 154 passed, 156 total\nSnapshots:   0 total\nTime:        40.226 s\nRan all test suites.\nJest did not exit one second after the test run has completed.\n\n'This usually means that there are asynchronous operations that weren't stopped in your tests. Consider running Jest with `--detectOpenHandles` to troubleshoot this issue.\n"
  },
  {
    "timestamp": "2026-02-12T02:13:20.695Z",
    "date": "11/2/2026, 21:13:20",
    "passed": 11,
    "failed": 2,
    "total": 13,
    "failedTests": [],
    "output": "\n> hospital-api-backend@1.0.0 test\n> jest --runInBand\n\nFAIL test/app.test.js (32.684 s)\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üóÇÔ∏è backup and recover secrets: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\n  ‚óè App API - Main Endpoints ‚Ä∫ POST /api/run-tests - should execute tests\n\n    thrown: \"Exceeded timeout of 30000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\n    \u001b[0m \u001b[90m 167 |\u001b[39m\n     \u001b[90m 168 |\u001b[39m     \u001b[90m// Test run-tests endpoint\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 169 |\u001b[39m     test(\u001b[32m'POST /api/run-tests - should execute tests'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m     |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 170 |\u001b[39m         \u001b[36mconst\u001b[39m res \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\n     \u001b[90m 171 |\u001b[39m             \u001b[33m.\u001b[39mpost(\u001b[32m'/api/run-tests'\u001b[39m)\n     \u001b[90m 172 |\u001b[39m             \u001b[33m.\u001b[39msend({ failTests\u001b[33m:\u001b[39m \u001b[36mfalse\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at test/app.test.js:169:5\n      at Object.<anonymous> (test/app.test.js:9:1)\n\nPASS Pruebas-Unitarias-Frontend/src/specialty.spec.ts\nPASS Pruebas-Unitarias-Backend/test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîë add access controls to secrets: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nFAIL Pruebas-Unitarias-Backend/test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  enable debug logging with { debug: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\n  ‚óè Pacientes API - Pruebas Unitarias con Patr√≥n AAA ‚Ä∫ PUT /api/pacientes/:id ‚Ä∫ Debe actualizar m√∫ltiples campos simult√°neamente\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 500\n\n    \u001b[0m \u001b[90m 127 |\u001b[39m\n     \u001b[90m 128 |\u001b[39m             \u001b[90m// ASSERT: Verificar todas las actualizaciones\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 129 |\u001b[39m             expect(updated\u001b[33m.\u001b[39mstatusCode)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 130 |\u001b[39m             expect(updated\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mname)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Pedro Luis'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 131 |\u001b[39m             expect(updated\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mlastName)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Garcia Perez'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m             expect(updated\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39memail)\u001b[33m.\u001b[39mtoBe(\u001b[32m'pedroluis@example.com'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (Pruebas-Unitarias-Backend/test/pacientes.test.js:129:40)\n\nPASS test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  load multiple .env files with { path: ['.env.local', '.env'] }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  override existing env vars with { override: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  load multiple .env files with { path: ['.env.local', '.env'] }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üì° add observability to secrets: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  write to custom object with { processEnv: myObject }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  suppress all logs with { quiet: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Frontend/src/medicine.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/patient.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/doctor.spec.ts\n\nTest Suites: 2 failed, 11 passed, 13 total\nTests:       2 failed, 154 passed, 156 total\nSnapshots:   0 total\nTime:        39.703 s\nRan all test suites.\nJest did not exit one second after the test run has completed.\n\n'This usually means that there are asynchronous operations that weren't stopped in your tests. Consider running Jest with `--detectOpenHandles` to troubleshoot this issue.\n"
  },
  {
    "timestamp": "2026-02-12T02:13:20.617Z",
    "date": "11/2/2026, 21:13:20",
    "passed": 12,
    "failed": 1,
    "total": 13,
    "failedTests": [],
    "output": "\n> hospital-api-backend@1.0.0 test\n> jest --runInBand\n\nFAIL test/app.test.js (33.214 s)\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  override existing env vars with { override: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\n  ‚óè App API - Main Endpoints ‚Ä∫ POST /api/run-tests - should execute tests\n\n    thrown: \"Exceeded timeout of 30000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\n    \u001b[0m \u001b[90m 167 |\u001b[39m\n     \u001b[90m 168 |\u001b[39m     \u001b[90m// Test run-tests endpoint\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 169 |\u001b[39m     test(\u001b[32m'POST /api/run-tests - should execute tests'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m     |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 170 |\u001b[39m         \u001b[36mconst\u001b[39m res \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\n     \u001b[90m 171 |\u001b[39m             \u001b[33m.\u001b[39mpost(\u001b[32m'/api/run-tests'\u001b[39m)\n     \u001b[90m 172 |\u001b[39m             \u001b[33m.\u001b[39msend({ failTests\u001b[33m:\u001b[39m \u001b[36mfalse\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at test/app.test.js:169:5\n      at Object.<anonymous> (test/app.test.js:9:1)\n\nPASS Pruebas-Unitarias-Frontend/src/specialty.spec.ts\nPASS Pruebas-Unitarias-Backend/test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîê prevent building .env in docker: https://dotenvx.com/prebuild\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚úÖ audit secrets and track compliance: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  specify custom .env file path with { path: '/custom/path/.env' }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  specify custom .env file path with { path: '/custom/path/.env' }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîê prevent committing .env to code: https://dotenvx.com/precommit\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  specify custom .env file path with { path: '/custom/path/.env' }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚úÖ audit secrets and track compliance: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  write to custom object with { processEnv: myObject }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Frontend/src/medicine.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/patient.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/doctor.spec.ts\n\nTest Suites: 1 failed, 12 passed, 13 total\nTests:       1 failed, 155 passed, 156 total\nSnapshots:   0 total\nTime:        40.28 s\nRan all test suites.\nJest did not exit one second after the test run has completed.\n\n'This usually means that there are asynchronous operations that weren't stopped in your tests. Consider running Jest with `--detectOpenHandles` to troubleshoot this issue.\n"
  },
  {
    "timestamp": "2026-02-12T02:13:20.511Z",
    "date": "11/2/2026, 21:13:20",
    "passed": 11,
    "failed": 2,
    "total": 13,
    "failedTests": [],
    "output": "\n> hospital-api-backend@1.0.0 test\n> jest --runInBand\n\nFAIL test/app.test.js (32.86 s)\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  suppress all logs with { quiet: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\n  ‚óè App API - Main Endpoints ‚Ä∫ POST /api/run-tests - should execute tests\n\n    thrown: \"Exceeded timeout of 30000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\n    \u001b[0m \u001b[90m 167 |\u001b[39m\n     \u001b[90m 168 |\u001b[39m     \u001b[90m// Test run-tests endpoint\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 169 |\u001b[39m     test(\u001b[32m'POST /api/run-tests - should execute tests'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m     |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 170 |\u001b[39m         \u001b[36mconst\u001b[39m res \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\n     \u001b[90m 171 |\u001b[39m             \u001b[33m.\u001b[39mpost(\u001b[32m'/api/run-tests'\u001b[39m)\n     \u001b[90m 172 |\u001b[39m             \u001b[33m.\u001b[39msend({ failTests\u001b[33m:\u001b[39m \u001b[36mfalse\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at test/app.test.js:169:5\n      at Object.<anonymous> (test/app.test.js:9:1)\n\nPASS Pruebas-Unitarias-Backend/test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  specify custom .env file path with { path: '/custom/path/.env' }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîÑ add secrets lifecycle management: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  enable debug logging with { debug: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  enable debug logging with { debug: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Frontend/src/specialty.spec.ts\nPASS test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  load multiple .env files with { path: ['.env.local', '.env'] }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  enable debug logging with { debug: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  suppress all logs with { quiet: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nFAIL Pruebas-Unitarias-Backend/test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîê encrypt with Dotenvx: https://dotenvx.com\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\n  ‚óè Pacientes API - Pruebas Unitarias con Patr√≥n AAA ‚Ä∫ GET /api/pacientes ‚Ä∫ Debe retornar una lista vac√≠a inicialmente\n\n    expect(received).toEqual(expected) // deep equality\n\n    - Expected  -  1\n    + Received  + 12\n\n    - Array []\n    + Array [\n    +   Object {\n    +     \"__v\": 0,\n    +     \"_id\": \"698d373b9476e1da7063f96c\",\n    +     \"createdAt\": \"2026-02-12T02:13:15.477Z\",\n    +     \"email\": \"juanperez@example.com\",\n    +     \"gender\": \"Masculino\",\n    +     \"illness\": \"Gripe\",\n    +     \"lastName\": \"Perez\",\n    +     \"name\": \"Juan\",\n    +   },\n    + ]\n\n    \u001b[0m \u001b[90m 24 |\u001b[39m             \u001b[90m// ASSERT: Verificar respuesta\u001b[39m\n     \u001b[90m 25 |\u001b[39m             expect(res\u001b[33m.\u001b[39mstatusCode)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 26 |\u001b[39m             expect(res\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoEqual([])\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 27 |\u001b[39m         })\u001b[33m;\u001b[39m\n     \u001b[90m 28 |\u001b[39m\n     \u001b[90m 29 |\u001b[39m         test(\u001b[32m'Debe retornar todos los pacientes existentes'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.<anonymous> (Pruebas-Unitarias-Backend/test/pacientes.test.js:26:30)\n\n  ‚óè Pacientes API - Pruebas Unitarias con Patr√≥n AAA ‚Ä∫ GET /api/pacientes ‚Ä∫ Debe retornar todos los pacientes existentes\n\n    expect(received).toHaveLength(expected)\n\n    Expected length: 2\n    Received length: 3\n    Received array:  [{\"__v\": 0, \"_id\": \"698d373b9476e1da7063f970\", \"createdAt\": \"2026-02-12T02:13:15.494Z\", \"email\": \"analopez@example.com\", \"gender\": \"Femenino\", \"illness\": \"Fiebre\", \"lastName\": \"Lopez\", \"name\": \"Ana\"}, {\"__v\": 0, \"_id\": \"698d373bc8a7e918c7fbcf34\", \"createdAt\": \"2026-02-12T02:13:15.494Z\", \"email\": \"maria@test.com\", \"gender\": \"Femenino\", \"illness\": \"Fiebre\", \"lastName\": \"L√≥pez\", \"name\": \"Mar√≠a\"}, {\"__v\": 0, \"_id\": \"698d373bc8a7e918c7fbcf33\", \"createdAt\": \"2026-02-12T02:13:15.494Z\", \"email\": \"juan@test.com\", \"gender\": \"Masculino\", \"illness\": \"Gripe\", \"lastName\": \"P√©rez\", \"name\": \"Juan\"}]\n\n    \u001b[0m \u001b[90m 39 |\u001b[39m             \u001b[90m// ASSERT: Verificar que retorna 2 pacientes (sin importar orden)\u001b[39m\n     \u001b[90m 40 |\u001b[39m             expect(res\u001b[33m.\u001b[39mstatusCode)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 41 |\u001b[39m             expect(res\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoHaveLength(\u001b[35m2\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 42 |\u001b[39m             \u001b[36mconst\u001b[39m names \u001b[33m=\u001b[39m res\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mmap(p \u001b[33m=>\u001b[39m p\u001b[33m.\u001b[39mname)\u001b[33m;\u001b[39m\n     \u001b[90m 43 |\u001b[39m             expect(names)\u001b[33m.\u001b[39mtoContain(\u001b[32m'Juan'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 44 |\u001b[39m             expect(names)\u001b[33m.\u001b[39mtoContain(\u001b[32m'Mar√≠a'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (Pruebas-Unitarias-Backend/test/pacientes.test.js:41:30)\n\n  ‚óè Pacientes API - Pruebas Unitarias con Patr√≥n AAA ‚Ä∫ PUT /api/pacientes/:id ‚Ä∫ Debe actualizar m√∫ltiples campos simult√°neamente\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 404\n\n    \u001b[0m \u001b[90m 127 |\u001b[39m\n     \u001b[90m 128 |\u001b[39m             \u001b[90m// ASSERT: Verificar todas las actualizaciones\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 129 |\u001b[39m             expect(updated\u001b[33m.\u001b[39mstatusCode)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 130 |\u001b[39m             expect(updated\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mname)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Pedro Luis'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 131 |\u001b[39m             expect(updated\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mlastName)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Garcia Perez'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m             expect(updated\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39memail)\u001b[33m.\u001b[39mtoBe(\u001b[32m'pedroluis@example.com'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (Pruebas-Unitarias-Backend/test/pacientes.test.js:129:40)\n\nPASS Pruebas-Unitarias-Frontend/src/medicine.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/patient.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/doctor.spec.ts\n\nTest Suites: 2 failed, 11 passed, 13 total\nTests:       4 failed, 152 passed, 156 total\nSnapshots:   0 total\nTime:        39.818 s, estimated 41 s\nRan all test suites.\nJest did not exit one second after the test run has completed.\n\n'This usually means that there are asynchronous operations that weren't stopped in your tests. Consider running Jest with `--detectOpenHandles` to troubleshoot this issue.\n"
  },
  {
    "timestamp": "2026-02-12T02:13:20.381Z",
    "date": "11/2/2026, 21:13:20",
    "passed": 12,
    "failed": 1,
    "total": 13,
    "failedTests": [],
    "output": "\n> hospital-api-backend@1.0.0 test\n> jest --runInBand\n\nFAIL test/app.test.js (32.901 s)\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üóÇÔ∏è backup and recover secrets: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\n  ‚óè App API - Main Endpoints ‚Ä∫ POST /api/run-tests - should execute tests\n\n    thrown: \"Exceeded timeout of 30000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\n    \u001b[0m \u001b[90m 167 |\u001b[39m\n     \u001b[90m 168 |\u001b[39m     \u001b[90m// Test run-tests endpoint\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 169 |\u001b[39m     test(\u001b[32m'POST /api/run-tests - should execute tests'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m     |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 170 |\u001b[39m         \u001b[36mconst\u001b[39m res \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\n     \u001b[90m 171 |\u001b[39m             \u001b[33m.\u001b[39mpost(\u001b[32m'/api/run-tests'\u001b[39m)\n     \u001b[90m 172 |\u001b[39m             \u001b[33m.\u001b[39msend({ failTests\u001b[33m:\u001b[39m \u001b[36mfalse\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at test/app.test.js:169:5\n      at Object.<anonymous> (test/app.test.js:9:1)\n\nPASS test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîê prevent committing .env to code: https://dotenvx.com/precommit\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Frontend/src/specialty.spec.ts\nPASS Pruebas-Unitarias-Backend/test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  suppress all logs with { quiet: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  suppress all logs with { quiet: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  suppress all logs with { quiet: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üë• sync secrets across teammates & machines: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üë• sync secrets across teammates & machines: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîê encrypt with Dotenvx: https://dotenvx.com\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  enable debug logging with { debug: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Frontend/src/doctor.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/medicine.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/patient.spec.ts\n\nTest Suites: 1 failed, 12 passed, 13 total\nTests:       1 failed, 155 passed, 156 total\nSnapshots:   0 total\nTime:        38.884 s, estimated 41 s\nRan all test suites.\n"
  },
  {
    "timestamp": "2026-02-12T02:13:19.272Z",
    "date": "11/2/2026, 21:13:19",
    "passed": 12,
    "failed": 1,
    "total": 13,
    "failedTests": [],
    "output": "\n> hospital-api-backend@1.0.0 test\n> jest --runInBand\n\nPASS test/app.test.js (26.162 s)\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîê prevent committing .env to code: https://dotenvx.com/precommit\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  write to custom object with { processEnv: myObject }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Frontend/src/specialty.spec.ts\nFAIL test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  write to custom object with { processEnv: myObject }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\n  ‚óè Pacientes API ‚Ä∫ PUT /api/pacientes/:id should update multiple fields\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 500\n\n    \u001b[0m \u001b[90m 89 |\u001b[39m             })\u001b[33m;\u001b[39m\n     \u001b[90m 90 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 91 |\u001b[39m         expect(updated\u001b[33m.\u001b[39mstatusCode)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 92 |\u001b[39m         expect(updated\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mname)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Pedro Luis'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 93 |\u001b[39m         expect(updated\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mlastName)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Garcia Perez'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 94 |\u001b[39m         expect(updated\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39memail)\u001b[33m.\u001b[39mtoBe(\u001b[32m'pedroluis@example.com'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (test/pacientes.test.js:91:36)\n\nPASS Pruebas-Unitarias-Backend/test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üë• sync secrets across teammates & machines: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üë• sync secrets across teammates & machines: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  enable debug logging with { debug: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  write to custom object with { processEnv: myObject }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üë• sync secrets across teammates & machines: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîÑ add secrets lifecycle management: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Frontend/src/patient.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/medicine.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/doctor.spec.ts\n\nTest Suites: 1 failed, 12 passed, 13 total\nTests:       1 failed, 155 passed, 156 total\nSnapshots:   0 total\nTime:        32.707 s, estimated 41 s\nRan all test suites.\n"
  },
  {
    "timestamp": "2026-02-12T02:13:12.971Z",
    "date": "11/2/2026, 21:13:12",
    "passed": 13,
    "failed": 0,
    "total": 13,
    "failedTests": [],
    "output": "\n> hospital-api-backend@1.0.0 test\n> jest --runInBand\n\nPASS test/app.test.js (14.412 s)\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚úÖ audit secrets and track compliance: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  override existing env vars with { override: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS Pruebas-Unitarias-Frontend/src/specialty.spec.ts\nPASS test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  override existing env vars with { override: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîê encrypt with Dotenvx: https://dotenvx.com\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  suppress all logs with { quiet: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  suppress all logs with { quiet: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîê prevent building .env in docker: https://dotenvx.com/prebuild\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîê prevent building .env in docker: https://dotenvx.com/prebuild\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üõ†Ô∏è  run anywhere with `dotenvx run -- yourcommand`\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Frontend/src/patient.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/doctor.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/medicine.spec.ts\n\nTest Suites: 13 passed, 13 total\nTests:       156 passed, 156 total\nSnapshots:   0 total\nTime:        21.327 s, estimated 41 s\nRan all test suites.\n"
  },
  {
    "timestamp": "2026-02-12T02:13:06.279Z",
    "date": "11/2/2026, 21:13:06",
    "passed": 12,
    "failed": 1,
    "total": 13,
    "failedTests": [],
    "output": "\n> hospital-api-backend@1.0.0 test\n> jest --runInBand\n\nPASS test/app.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üõ†Ô∏è  run anywhere with `dotenvx run -- yourcommand`\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Frontend/src/specialty.spec.ts\nFAIL test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üõ†Ô∏è  run anywhere with `dotenvx run -- yourcommand`\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\n  ‚óè Pacientes API ‚Ä∫ PUT /api/pacientes/:id should update an existing patient\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 404\n\n    \u001b[0m \u001b[90m 64 |\u001b[39m             \u001b[33m.\u001b[39msend({ illness\u001b[33m:\u001b[39m \u001b[32m'Migra√±a'\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 65 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 66 |\u001b[39m         expect(updated\u001b[33m.\u001b[39mstatusCode)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 67 |\u001b[39m         expect(updated\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39millness)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Migra√±a'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 68 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 69 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (test/pacientes.test.js:66:36)\n\nPASS Pruebas-Unitarias-Backend/test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üì° add observability to secrets: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üõ†Ô∏è  run anywhere with `dotenvx run -- yourcommand`\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  enable debug logging with { debug: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚úÖ audit secrets and track compliance: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  specify custom .env file path with { path: '/custom/path/.env' }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîê prevent building .env in docker: https://dotenvx.com/prebuild\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîê prevent building .env in docker: https://dotenvx.com/prebuild\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Frontend/src/medicine.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/patient.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/doctor.spec.ts\n\nTest Suites: 1 failed, 12 passed, 13 total\nTests:       1 failed, 155 passed, 156 total\nSnapshots:   0 total\nTime:        9.696 s, estimated 41 s\nRan all test suites.\n"
  },
  {
    "timestamp": "2026-02-12T02:12:59.546Z",
    "date": "11/2/2026, 21:12:59",
    "passed": 0,
    "failed": 0,
    "total": 0,
    "failedTests": [],
    "output": "\n> hospital-api-backend@1.0.0 test\n> jest --runInBand\n\n\"jest\" no se reconoce como un comando interno o externo,\r\nprograma o archivo por lotes ejecutable.\r\n"
  },
  {
    "timestamp": "2026-02-12T02:09:53.008Z",
    "date": "11/2/2026, 21:09:53",
    "passed": 11,
    "failed": 2,
    "total": 13,
    "failedTests": [],
    "output": "\n> hospital-api-backend@1.0.0 test\n> jest --runInBand\n\nPASS Pruebas-Unitarias-Backend/test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üõ†Ô∏è  run anywhere with `dotenvx run -- yourcommand`\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS Pruebas-Unitarias-Frontend/src/specialty.spec.ts\nFAIL test/app.test.js (10.667 s)\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  specify custom .env file path with { path: '/custom/path/.env' }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\n  ‚óè App API - Main Endpoints ‚Ä∫ POST /api/run-tests - should execute tests\n\n    thrown: \"Exceeded timeout of 10000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\n    \u001b[0m \u001b[90m 167 |\u001b[39m\n     \u001b[90m 168 |\u001b[39m     \u001b[90m// Test run-tests endpoint\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 169 |\u001b[39m     test(\u001b[32m'POST /api/run-tests - should execute tests'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m     |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 170 |\u001b[39m         \u001b[36mconst\u001b[39m res \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\n     \u001b[90m 171 |\u001b[39m             \u001b[33m.\u001b[39mpost(\u001b[32m'/api/run-tests'\u001b[39m)\n     \u001b[90m 172 |\u001b[39m             \u001b[33m.\u001b[39msend({ failTests\u001b[33m:\u001b[39m \u001b[36mfalse\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at test/app.test.js:169:5\n      at Object.<anonymous> (test/app.test.js:9:1)\n\nPASS Pruebas-Unitarias-Backend/test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üõ†Ô∏è  run anywhere with `dotenvx run -- yourcommand`\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  write to custom object with { processEnv: myObject }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üë• sync secrets across teammates & machines: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üóÇÔ∏è backup and recover secrets: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîê prevent committing .env to code: https://dotenvx.com/precommit\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  write to custom object with { processEnv: myObject }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nFAIL Pruebas-Unitarias-Backend/test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîë add access controls to secrets: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\n  ‚óè Pacientes API - Pruebas Unitarias con Patr√≥n AAA ‚Ä∫ PUT /api/pacientes/:id ‚Ä∫ Debe actualizar un paciente existente\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 404\n\n    \u001b[0m \u001b[90m 100 |\u001b[39m\n     \u001b[90m 101 |\u001b[39m             \u001b[90m// ASSERT: Verificar actualizaci√≥n\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 102 |\u001b[39m             expect(updated\u001b[33m.\u001b[39mstatusCode)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 103 |\u001b[39m             expect(updated\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39millness)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Migra√±a'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 104 |\u001b[39m             expect(updated\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mname)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Ana'\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// Otros campos no cambian\u001b[39m\n     \u001b[90m 105 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (Pruebas-Unitarias-Backend/test/pacientes.test.js:102:40)\n\nPASS Pruebas-Unitarias-Frontend/src/medicine.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/patient.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/doctor.spec.ts\n\nTest Suites: 2 failed, 11 passed, 13 total\nTests:       2 failed, 154 passed, 156 total\nSnapshots:   0 total\nTime:        18.116 s\nRan all test suites.\nJest did not exit one second after the test run has completed.\n\n'This usually means that there are asynchronous operations that weren't stopped in your tests. Consider running Jest with `--detectOpenHandles` to troubleshoot this issue.\n"
  },
  {
    "timestamp": "2026-02-12T02:09:52.923Z",
    "date": "11/2/2026, 21:09:52",
    "passed": 11,
    "failed": 2,
    "total": 13,
    "failedTests": [],
    "output": "\n> hospital-api-backend@1.0.0 test\n> jest --runInBand\n\nPASS Pruebas-Unitarias-Backend/test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîê prevent committing .env to code: https://dotenvx.com/precommit\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS Pruebas-Unitarias-Frontend/src/specialty.spec.ts\nFAIL test/app.test.js (10.589 s)\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  write to custom object with { processEnv: myObject }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\n  ‚óè App API - Main Endpoints ‚Ä∫ POST /api/run-tests - should execute tests\n\n    thrown: \"Exceeded timeout of 10000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\n    \u001b[0m \u001b[90m 167 |\u001b[39m\n     \u001b[90m 168 |\u001b[39m     \u001b[90m// Test run-tests endpoint\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 169 |\u001b[39m     test(\u001b[32m'POST /api/run-tests - should execute tests'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m     |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 170 |\u001b[39m         \u001b[36mconst\u001b[39m res \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\n     \u001b[90m 171 |\u001b[39m             \u001b[33m.\u001b[39mpost(\u001b[32m'/api/run-tests'\u001b[39m)\n     \u001b[90m 172 |\u001b[39m             \u001b[33m.\u001b[39msend({ failTests\u001b[33m:\u001b[39m \u001b[36mfalse\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at test/app.test.js:169:5\n      at Object.<anonymous> (test/app.test.js:9:1)\n\nPASS Pruebas-Unitarias-Backend/test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üë• sync secrets across teammates & machines: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  specify custom .env file path with { path: '/custom/path/.env' }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üóÇÔ∏è backup and recover secrets: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  specify custom .env file path with { path: '/custom/path/.env' }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nFAIL test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üì° add observability to secrets: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\n  ‚óè Especialidades API ‚Ä∫ PUT /api/especialidades/:id should update an existing specialty\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 500\n\n    \u001b[0m \u001b[90m 59 |\u001b[39m             \u001b[33m.\u001b[39msend({ name\u001b[33m:\u001b[39m \u001b[32m'Oftalmolog√≠a Corregida'\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 60 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 61 |\u001b[39m         expect(updated\u001b[33m.\u001b[39mstatusCode)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 62 |\u001b[39m         expect(updated\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mname)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Oftalmolog√≠a Corregida'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 63 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 64 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (test/especialidades.test.js:61:36)\n\nPASS test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  suppress all logs with { quiet: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  suppress all logs with { quiet: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS Pruebas-Unitarias-Frontend/src/medicine.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/patient.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/doctor.spec.ts\n\nTest Suites: 2 failed, 11 passed, 13 total\nTests:       2 failed, 154 passed, 156 total\nSnapshots:   0 total\nTime:        17.863 s\nRan all test suites.\nJest did not exit one second after the test run has completed.\n\n'This usually means that there are asynchronous operations that weren't stopped in your tests. Consider running Jest with `--detectOpenHandles` to troubleshoot this issue.\n"
  },
  {
    "timestamp": "2026-02-12T02:09:52.837Z",
    "date": "11/2/2026, 21:09:52",
    "passed": 11,
    "failed": 2,
    "total": 13,
    "failedTests": [],
    "output": "\n> hospital-api-backend@1.0.0 test\n> jest --runInBand\n\nPASS Pruebas-Unitarias-Backend/test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üì° add observability to secrets: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS Pruebas-Unitarias-Frontend/src/specialty.spec.ts\nFAIL test/app.test.js (10.946 s)\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîê prevent committing .env to code: https://dotenvx.com/precommit\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\n  ‚óè App API - Main Endpoints ‚Ä∫ POST /api/run-tests - should execute tests\n\n    thrown: \"Exceeded timeout of 10000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\n    \u001b[0m \u001b[90m 167 |\u001b[39m\n     \u001b[90m 168 |\u001b[39m     \u001b[90m// Test run-tests endpoint\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 169 |\u001b[39m     test(\u001b[32m'POST /api/run-tests - should execute tests'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m     |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 170 |\u001b[39m         \u001b[36mconst\u001b[39m res \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\n     \u001b[90m 171 |\u001b[39m             \u001b[33m.\u001b[39mpost(\u001b[32m'/api/run-tests'\u001b[39m)\n     \u001b[90m 172 |\u001b[39m             \u001b[33m.\u001b[39msend({ failTests\u001b[33m:\u001b[39m \u001b[36mfalse\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at test/app.test.js:169:5\n      at Object.<anonymous> (test/app.test.js:9:1)\n\nPASS Pruebas-Unitarias-Backend/test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üóÇÔ∏è backup and recover secrets: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  specify custom .env file path with { path: '/custom/path/.env' }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîê prevent committing .env to code: https://dotenvx.com/precommit\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîê prevent committing .env to code: https://dotenvx.com/precommit\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  enable debug logging with { debug: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nFAIL test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîê prevent committing .env to code: https://dotenvx.com/precommit\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\n  ‚óè Pacientes API ‚Ä∫ PUT /api/pacientes/:id should update an existing patient\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 500\n\n    \u001b[0m \u001b[90m 64 |\u001b[39m             \u001b[33m.\u001b[39msend({ illness\u001b[33m:\u001b[39m \u001b[32m'Migra√±a'\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 65 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 66 |\u001b[39m         expect(updated\u001b[33m.\u001b[39mstatusCode)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 67 |\u001b[39m         expect(updated\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39millness)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Migra√±a'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 68 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 69 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (test/pacientes.test.js:66:36)\n\n  ‚óè Pacientes API ‚Ä∫ PUT /api/pacientes/:id should update multiple fields\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 500\n\n    \u001b[0m \u001b[90m 89 |\u001b[39m             })\u001b[33m;\u001b[39m\n     \u001b[90m 90 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 91 |\u001b[39m         expect(updated\u001b[33m.\u001b[39mstatusCode)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 92 |\u001b[39m         expect(updated\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mname)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Pedro Luis'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 93 |\u001b[39m         expect(updated\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mlastName)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Garcia Perez'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 94 |\u001b[39m         expect(updated\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39memail)\u001b[33m.\u001b[39mtoBe(\u001b[32m'pedroluis@example.com'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (test/pacientes.test.js:91:36)\n\nPASS Pruebas-Unitarias-Backend/test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üë• sync secrets across teammates & machines: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS Pruebas-Unitarias-Frontend/src/medicine.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/patient.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/doctor.spec.ts\n\nTest Suites: 2 failed, 11 passed, 13 total\nTests:       3 failed, 153 passed, 156 total\nSnapshots:   0 total\nTime:        20.434 s\nRan all test suites.\nJest did not exit one second after the test run has completed.\n\n'This usually means that there are asynchronous operations that weren't stopped in your tests. Consider running Jest with `--detectOpenHandles` to troubleshoot this issue.\n"
  },
  {
    "timestamp": "2026-02-12T02:09:52.754Z",
    "date": "11/2/2026, 21:09:52",
    "passed": 10,
    "failed": 3,
    "total": 13,
    "failedTests": [],
    "output": "\n> hospital-api-backend@1.0.0 test\n> jest --runInBand\n\nFAIL test/app.test.js (11.977 s)\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîê encrypt with Dotenvx: https://dotenvx.com\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\n  ‚óè App API - Main Endpoints ‚Ä∫ POST /api/run-tests - should execute tests\n\n    thrown: \"Exceeded timeout of 10000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\n    \u001b[0m \u001b[90m 167 |\u001b[39m\n     \u001b[90m 168 |\u001b[39m     \u001b[90m// Test run-tests endpoint\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 169 |\u001b[39m     test(\u001b[32m'POST /api/run-tests - should execute tests'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m     |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 170 |\u001b[39m         \u001b[36mconst\u001b[39m res \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\n     \u001b[90m 171 |\u001b[39m             \u001b[33m.\u001b[39mpost(\u001b[32m'/api/run-tests'\u001b[39m)\n     \u001b[90m 172 |\u001b[39m             \u001b[33m.\u001b[39msend({ failTests\u001b[33m:\u001b[39m \u001b[36mfalse\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at test/app.test.js:169:5\n      at Object.<anonymous> (test/app.test.js:9:1)\n\nPASS Pruebas-Unitarias-Backend/test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üóÇÔ∏è backup and recover secrets: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS Pruebas-Unitarias-Frontend/src/specialty.spec.ts\nPASS Pruebas-Unitarias-Backend/test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  enable debug logging with { debug: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîê encrypt with Dotenvx: https://dotenvx.com\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nFAIL Pruebas-Unitarias-Backend/test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîê prevent committing .env to code: https://dotenvx.com/precommit\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\n  ‚óè Pacientes API - Pruebas Unitarias con Patr√≥n AAA ‚Ä∫ PUT /api/pacientes/:id ‚Ä∫ Debe actualizar m√∫ltiples campos simult√°neamente\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 404\n\n    \u001b[0m \u001b[90m 127 |\u001b[39m\n     \u001b[90m 128 |\u001b[39m             \u001b[90m// ASSERT: Verificar todas las actualizaciones\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 129 |\u001b[39m             expect(updated\u001b[33m.\u001b[39mstatusCode)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 130 |\u001b[39m             expect(updated\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mname)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Pedro Luis'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 131 |\u001b[39m             expect(updated\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mlastName)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Garcia Perez'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m             expect(updated\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39memail)\u001b[33m.\u001b[39mtoBe(\u001b[32m'pedroluis@example.com'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (Pruebas-Unitarias-Backend/test/pacientes.test.js:129:40)\n\nPASS test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîê encrypt with Dotenvx: https://dotenvx.com\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üóÇÔ∏è backup and recover secrets: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nFAIL test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîê encrypt with Dotenvx: https://dotenvx.com\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\n  ‚óè Doctors API ‚Ä∫ should return 409 if license number already exists in another doctor\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 409\n    Received: 200\n\n    \u001b[0m \u001b[90m 113 |\u001b[39m             \u001b[33m.\u001b[39msend({ licenseNumber\u001b[33m:\u001b[39m \u001b[32m'LIC-001'\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 114 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 115 |\u001b[39m         expect(res\u001b[33m.\u001b[39mstatusCode)\u001b[33m.\u001b[39mtoBe(\u001b[35m409\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 116 |\u001b[39m         expect(res\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'message'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'A doctor with this license number already exists'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 117 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 118 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (test/doctores.test.js:115:32)\n\nPASS Pruebas-Unitarias-Backend/test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîÑ add secrets lifecycle management: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS Pruebas-Unitarias-Frontend/src/medicine.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/doctor.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/patient.spec.ts\n\nTest Suites: 3 failed, 10 passed, 13 total\nTests:       3 failed, 153 passed, 156 total\nSnapshots:   0 total\nTime:        20.617 s\nRan all test suites.\nJest did not exit one second after the test run has completed.\n\n'This usually means that there are asynchronous operations that weren't stopped in your tests. Consider running Jest with `--detectOpenHandles` to troubleshoot this issue.\n"
  },
  {
    "timestamp": "2026-02-12T02:09:52.665Z",
    "date": "11/2/2026, 21:09:52",
    "passed": 10,
    "failed": 3,
    "total": 13,
    "failedTests": [],
    "output": "\n> hospital-api-backend@1.0.0 test\n> jest --runInBand\n\nFAIL test/app.test.js (12.026 s)\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üõ†Ô∏è  run anywhere with `dotenvx run -- yourcommand`\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\n  ‚óè App API - Main Endpoints ‚Ä∫ POST /api/run-tests - should execute tests\n\n    thrown: \"Exceeded timeout of 10000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\n    \u001b[0m \u001b[90m 167 |\u001b[39m\n     \u001b[90m 168 |\u001b[39m     \u001b[90m// Test run-tests endpoint\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 169 |\u001b[39m     test(\u001b[32m'POST /api/run-tests - should execute tests'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m     |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 170 |\u001b[39m         \u001b[36mconst\u001b[39m res \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\n     \u001b[90m 171 |\u001b[39m             \u001b[33m.\u001b[39mpost(\u001b[32m'/api/run-tests'\u001b[39m)\n     \u001b[90m 172 |\u001b[39m             \u001b[33m.\u001b[39msend({ failTests\u001b[33m:\u001b[39m \u001b[36mfalse\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at test/app.test.js:169:5\n      at Object.<anonymous> (test/app.test.js:9:1)\n\nFAIL Pruebas-Unitarias-Backend/test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîê prevent committing .env to code: https://dotenvx.com/precommit\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\n  ‚óè Pacientes API - Pruebas Unitarias con Patr√≥n AAA ‚Ä∫ GET /api/pacientes ‚Ä∫ Debe retornar una lista vac√≠a inicialmente\n\n    expect(received).toEqual(expected) // deep equality\n\n    - Expected  -  1\n    + Received  + 12\n\n    - Array []\n    + Array [\n    +   Object {\n    +     \"__v\": 0,\n    +     \"_id\": \"698d36378f56fe1052e64ed4\",\n    +     \"createdAt\": \"2026-02-12T02:08:55.023Z\",\n    +     \"email\": \"analopez@example.com\",\n    +     \"gender\": \"Femenino\",\n    +     \"illness\": \"Fiebre\",\n    +     \"lastName\": \"Lopez\",\n    +     \"name\": \"Ana\",\n    +   },\n    + ]\n\n    \u001b[0m \u001b[90m 24 |\u001b[39m             \u001b[90m// ASSERT: Verificar respuesta\u001b[39m\n     \u001b[90m 25 |\u001b[39m             expect(res\u001b[33m.\u001b[39mstatusCode)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 26 |\u001b[39m             expect(res\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoEqual([])\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 27 |\u001b[39m         })\u001b[33m;\u001b[39m\n     \u001b[90m 28 |\u001b[39m\n     \u001b[90m 29 |\u001b[39m         test(\u001b[32m'Debe retornar todos los pacientes existentes'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.<anonymous> (Pruebas-Unitarias-Backend/test/pacientes.test.js:26:30)\n\nPASS Pruebas-Unitarias-Backend/test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üõ†Ô∏è  run anywhere with `dotenvx run -- yourcommand`\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS Pruebas-Unitarias-Frontend/src/specialty.spec.ts\nPASS Pruebas-Unitarias-Backend/test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üë• sync secrets across teammates & machines: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nFAIL test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üõ†Ô∏è  run anywhere with `dotenvx run -- yourcommand`\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\n  ‚óè Doctors API ‚Ä∫ PUT /api/doctores/:id - should update an existing doctor\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 404\n\n    \u001b[0m \u001b[90m 178 |\u001b[39m             \u001b[33m.\u001b[39msend(updatedData)\u001b[33m;\u001b[39m\n     \u001b[90m 179 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 180 |\u001b[39m         expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 181 |\u001b[39m         expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mspecialty)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Neurocirug√≠a'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 182 |\u001b[39m         expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mphone)\u001b[33m.\u001b[39mtoBe(\u001b[32m'0912345678'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 183 |\u001b[39m         expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mname)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Carlos'\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// Should not change\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (test/doctores.test.js:180:33)\n\n  ‚óè Doctors API ‚Ä∫ PUT /api/doctores/:id - should return 404 if doctor does not exist\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 404\n\n    \u001b[0m \u001b[90m 198 |\u001b[39m         \u001b[36mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\u001b[33m.\u001b[39m\u001b[36mdelete\u001b[39m(\u001b[32m`/api/doctores/${doctor.body._id}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 199 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 200 |\u001b[39m         expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 201 |\u001b[39m         expect(response\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'_id'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 202 |\u001b[39m         expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39m_id)\u001b[33m.\u001b[39mtoBe(doctor\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39m_id)\u001b[33m;\u001b[39m\n     \u001b[90m 203 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (test/doctores.test.js:200:33)\n\nPASS test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîê prevent building .env in docker: https://dotenvx.com/prebuild\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  suppress all logs with { quiet: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üóÇÔ∏è backup and recover secrets: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚úÖ audit secrets and track compliance: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Frontend/src/medicine.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/doctor.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/patient.spec.ts\n\nTest Suites: 3 failed, 10 passed, 13 total\nTests:       4 failed, 152 passed, 156 total\nSnapshots:   0 total\nTime:        21.156 s\nRan all test suites.\nJest did not exit one second after the test run has completed.\n\n'This usually means that there are asynchronous operations that weren't stopped in your tests. Consider running Jest with `--detectOpenHandles` to troubleshoot this issue.\n"
  },
  {
    "timestamp": "2026-02-12T02:09:52.577Z",
    "date": "11/2/2026, 21:09:52",
    "passed": 12,
    "failed": 1,
    "total": 13,
    "failedTests": [],
    "output": "\n> hospital-api-backend@1.0.0 test\n> jest --runInBand\n\nFAIL test/app.test.js (11.803 s)\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üóÇÔ∏è backup and recover secrets: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\n  ‚óè App API - Main Endpoints ‚Ä∫ POST /api/run-tests - should execute tests\n\n    thrown: \"Exceeded timeout of 10000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\n    \u001b[0m \u001b[90m 167 |\u001b[39m\n     \u001b[90m 168 |\u001b[39m     \u001b[90m// Test run-tests endpoint\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 169 |\u001b[39m     test(\u001b[32m'POST /api/run-tests - should execute tests'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m     |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 170 |\u001b[39m         \u001b[36mconst\u001b[39m res \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\n     \u001b[90m 171 |\u001b[39m             \u001b[33m.\u001b[39mpost(\u001b[32m'/api/run-tests'\u001b[39m)\n     \u001b[90m 172 |\u001b[39m             \u001b[33m.\u001b[39msend({ failTests\u001b[33m:\u001b[39m \u001b[36mfalse\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at test/app.test.js:169:5\n      at Object.<anonymous> (test/app.test.js:9:1)\n\nPASS Pruebas-Unitarias-Backend/test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üë• sync secrets across teammates & machines: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  suppress all logs with { quiet: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS Pruebas-Unitarias-Frontend/src/specialty.spec.ts\nPASS Pruebas-Unitarias-Backend/test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  load multiple .env files with { path: ['.env.local', '.env'] }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîê prevent committing .env to code: https://dotenvx.com/precommit\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîÑ add secrets lifecycle management: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üõ†Ô∏è  run anywhere with `dotenvx run -- yourcommand`\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  suppress all logs with { quiet: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  enable debug logging with { debug: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Frontend/src/medicine.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/doctor.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/patient.spec.ts\n\nTest Suites: 1 failed, 12 passed, 13 total\nTests:       1 failed, 155 passed, 156 total\nSnapshots:   0 total\nTime:        21.044 s\nRan all test suites.\nJest did not exit one second after the test run has completed.\n\n'This usually means that there are asynchronous operations that weren't stopped in your tests. Consider running Jest with `--detectOpenHandles` to troubleshoot this issue.\n"
  },
  {
    "timestamp": "2026-02-12T02:09:52.473Z",
    "date": "11/2/2026, 21:09:52",
    "passed": 11,
    "failed": 2,
    "total": 13,
    "failedTests": [],
    "output": "\n> hospital-api-backend@1.0.0 test\n> jest --runInBand\n\nFAIL test/app.test.js (12.642 s)\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üë• sync secrets across teammates & machines: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\n  ‚óè App API - Main Endpoints ‚Ä∫ POST /api/run-tests - should execute tests\n\n    thrown: \"Exceeded timeout of 10000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\n    \u001b[0m \u001b[90m 167 |\u001b[39m\n     \u001b[90m 168 |\u001b[39m     \u001b[90m// Test run-tests endpoint\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 169 |\u001b[39m     test(\u001b[32m'POST /api/run-tests - should execute tests'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m     |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 170 |\u001b[39m         \u001b[36mconst\u001b[39m res \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\n     \u001b[90m 171 |\u001b[39m             \u001b[33m.\u001b[39mpost(\u001b[32m'/api/run-tests'\u001b[39m)\n     \u001b[90m 172 |\u001b[39m             \u001b[33m.\u001b[39msend({ failTests\u001b[33m:\u001b[39m \u001b[36mfalse\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at test/app.test.js:169:5\n      at Object.<anonymous> (test/app.test.js:9:1)\n\nPASS test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîë add access controls to secrets: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîê prevent building .env in docker: https://dotenvx.com/prebuild\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS Pruebas-Unitarias-Frontend/src/specialty.spec.ts\nFAIL test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîÑ add secrets lifecycle management: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\n  ‚óè Doctors API ‚Ä∫ should return 409 if license number already exists in another doctor\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 409\n    Received: 404\n\n    \u001b[0m \u001b[90m 113 |\u001b[39m             \u001b[33m.\u001b[39msend({ licenseNumber\u001b[33m:\u001b[39m \u001b[32m'LIC-001'\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 114 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 115 |\u001b[39m         expect(res\u001b[33m.\u001b[39mstatusCode)\u001b[33m.\u001b[39mtoBe(\u001b[35m409\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 116 |\u001b[39m         expect(res\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'message'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'A doctor with this license number already exists'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 117 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 118 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (test/doctores.test.js:115:32)\n\n  ‚óè Doctors API ‚Ä∫ PUT /api/doctores/:id - should return 404 if doctor does not exist\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 404\n\n    \u001b[0m \u001b[90m 198 |\u001b[39m         \u001b[36mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\u001b[33m.\u001b[39m\u001b[36mdelete\u001b[39m(\u001b[32m`/api/doctores/${doctor.body._id}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 199 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 200 |\u001b[39m         expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 201 |\u001b[39m         expect(response\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'_id'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 202 |\u001b[39m         expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39m_id)\u001b[33m.\u001b[39mtoBe(doctor\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39m_id)\u001b[33m;\u001b[39m\n     \u001b[90m 203 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (test/doctores.test.js:200:33)\n\nPASS Pruebas-Unitarias-Backend/test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  override existing env vars with { override: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üì° add observability to secrets: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîê encrypt with Dotenvx: https://dotenvx.com\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚úÖ audit secrets and track compliance: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  load multiple .env files with { path: ['.env.local', '.env'] }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Frontend/src/medicine.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/patient.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/doctor.spec.ts\n\nTest Suites: 2 failed, 11 passed, 13 total\nTests:       3 failed, 153 passed, 156 total\nSnapshots:   0 total\nTime:        21.362 s\nRan all test suites.\nJest did not exit one second after the test run has completed.\n\n'This usually means that there are asynchronous operations that weren't stopped in your tests. Consider running Jest with `--detectOpenHandles` to troubleshoot this issue.\n"
  },
  {
    "timestamp": "2026-02-12T02:09:52.389Z",
    "date": "11/2/2026, 21:09:52",
    "passed": 12,
    "failed": 1,
    "total": 13,
    "failedTests": [],
    "output": "\n> hospital-api-backend@1.0.0 test\n> jest --runInBand\n\nFAIL test/app.test.js (12.42 s)\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  enable debug logging with { debug: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\n  ‚óè App API - Main Endpoints ‚Ä∫ POST /api/run-tests - should execute tests\n\n    thrown: \"Exceeded timeout of 10000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\n    \u001b[0m \u001b[90m 167 |\u001b[39m\n     \u001b[90m 168 |\u001b[39m     \u001b[90m// Test run-tests endpoint\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 169 |\u001b[39m     test(\u001b[32m'POST /api/run-tests - should execute tests'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m     |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 170 |\u001b[39m         \u001b[36mconst\u001b[39m res \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\n     \u001b[90m 171 |\u001b[39m             \u001b[33m.\u001b[39mpost(\u001b[32m'/api/run-tests'\u001b[39m)\n     \u001b[90m 172 |\u001b[39m             \u001b[33m.\u001b[39msend({ failTests\u001b[33m:\u001b[39m \u001b[36mfalse\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at test/app.test.js:169:5\n      at Object.<anonymous> (test/app.test.js:9:1)\n\nPASS test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  load multiple .env files with { path: ['.env.local', '.env'] }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üóÇÔ∏è backup and recover secrets: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS Pruebas-Unitarias-Frontend/src/specialty.spec.ts\nPASS test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîê encrypt with Dotenvx: https://dotenvx.com\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  write to custom object with { processEnv: myObject }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  load multiple .env files with { path: ['.env.local', '.env'] }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  suppress all logs with { quiet: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîê prevent building .env in docker: https://dotenvx.com/prebuild\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üóÇÔ∏è backup and recover secrets: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Frontend/src/medicine.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/doctor.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/patient.spec.ts\n\nTest Suites: 1 failed, 12 passed, 13 total\nTests:       1 failed, 155 passed, 156 total\nSnapshots:   0 total\nTime:        19.805 s, estimated 20 s\nRan all test suites.\nJest did not exit one second after the test run has completed.\n\n'This usually means that there are asynchronous operations that weren't stopped in your tests. Consider running Jest with `--detectOpenHandles` to troubleshoot this issue.\n"
  },
  {
    "timestamp": "2026-02-12T02:09:52.302Z",
    "date": "11/2/2026, 21:09:52",
    "passed": 12,
    "failed": 1,
    "total": 13,
    "failedTests": [],
    "output": "\n> hospital-api-backend@1.0.0 test\n> jest --runInBand\n\nFAIL test/app.test.js (12.623 s)\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîê prevent building .env in docker: https://dotenvx.com/prebuild\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\n  ‚óè App API - Main Endpoints ‚Ä∫ POST /api/run-tests - should execute tests\n\n    thrown: \"Exceeded timeout of 10000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\n    \u001b[0m \u001b[90m 167 |\u001b[39m\n     \u001b[90m 168 |\u001b[39m     \u001b[90m// Test run-tests endpoint\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 169 |\u001b[39m     test(\u001b[32m'POST /api/run-tests - should execute tests'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m     |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 170 |\u001b[39m         \u001b[36mconst\u001b[39m res \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\n     \u001b[90m 171 |\u001b[39m             \u001b[33m.\u001b[39mpost(\u001b[32m'/api/run-tests'\u001b[39m)\n     \u001b[90m 172 |\u001b[39m             \u001b[33m.\u001b[39msend({ failTests\u001b[33m:\u001b[39m \u001b[36mfalse\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at test/app.test.js:169:5\n      at Object.<anonymous> (test/app.test.js:9:1)\n\nPASS test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîê prevent committing .env to code: https://dotenvx.com/precommit\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîÑ add secrets lifecycle management: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS Pruebas-Unitarias-Frontend/src/specialty.spec.ts\nPASS test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚úÖ audit secrets and track compliance: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  write to custom object with { processEnv: myObject }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîê encrypt with Dotenvx: https://dotenvx.com\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  write to custom object with { processEnv: myObject }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üë• sync secrets across teammates & machines: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üì° add observability to secrets: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Frontend/src/medicine.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/doctor.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/patient.spec.ts\n\nTest Suites: 1 failed, 12 passed, 13 total\nTests:       1 failed, 155 passed, 156 total\nSnapshots:   0 total\nTime:        19.514 s, estimated 20 s\nRan all test suites.\nJest did not exit one second after the test run has completed.\n\n'This usually means that there are asynchronous operations that weren't stopped in your tests. Consider running Jest with `--detectOpenHandles` to troubleshoot this issue.\n"
  },
  {
    "timestamp": "2026-02-12T02:09:52.217Z",
    "date": "11/2/2026, 21:09:52",
    "passed": 12,
    "failed": 1,
    "total": 13,
    "failedTests": [],
    "output": "\n> hospital-api-backend@1.0.0 test\n> jest --runInBand\n\nFAIL test/app.test.js (12.844 s)\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  specify custom .env file path with { path: '/custom/path/.env' }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\n  ‚óè App API - Main Endpoints ‚Ä∫ POST /api/run-tests - should execute tests\n\n    thrown: \"Exceeded timeout of 10000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\n    \u001b[0m \u001b[90m 167 |\u001b[39m\n     \u001b[90m 168 |\u001b[39m     \u001b[90m// Test run-tests endpoint\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 169 |\u001b[39m     test(\u001b[32m'POST /api/run-tests - should execute tests'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m     |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 170 |\u001b[39m         \u001b[36mconst\u001b[39m res \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\n     \u001b[90m 171 |\u001b[39m             \u001b[33m.\u001b[39mpost(\u001b[32m'/api/run-tests'\u001b[39m)\n     \u001b[90m 172 |\u001b[39m             \u001b[33m.\u001b[39msend({ failTests\u001b[33m:\u001b[39m \u001b[36mfalse\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at test/app.test.js:169:5\n      at Object.<anonymous> (test/app.test.js:9:1)\n\nPASS test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üë• sync secrets across teammates & machines: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  load multiple .env files with { path: ['.env.local', '.env'] }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS Pruebas-Unitarias-Frontend/src/specialty.spec.ts\nPASS Pruebas-Unitarias-Backend/test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  enable debug logging with { debug: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîê encrypt with Dotenvx: https://dotenvx.com\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîÑ add secrets lifecycle management: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚úÖ audit secrets and track compliance: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚úÖ audit secrets and track compliance: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîê encrypt with Dotenvx: https://dotenvx.com\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS Pruebas-Unitarias-Frontend/src/patient.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/medicine.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/doctor.spec.ts\n\nTest Suites: 1 failed, 12 passed, 13 total\nTests:       1 failed, 155 passed, 156 total\nSnapshots:   0 total\nTime:        19.85 s, estimated 21 s\nRan all test suites.\nJest did not exit one second after the test run has completed.\n\n'This usually means that there are asynchronous operations that weren't stopped in your tests. Consider running Jest with `--detectOpenHandles` to troubleshoot this issue.\n"
  },
  {
    "timestamp": "2026-02-12T02:09:52.135Z",
    "date": "11/2/2026, 21:09:52",
    "passed": 12,
    "failed": 1,
    "total": 13,
    "failedTests": [],
    "output": "\n> hospital-api-backend@1.0.0 test\n> jest --runInBand\n\nFAIL test/app.test.js (12.341 s)\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  write to custom object with { processEnv: myObject }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\n  ‚óè App API - Main Endpoints ‚Ä∫ POST /api/run-tests - should execute tests\n\n    thrown: \"Exceeded timeout of 10000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\n    \u001b[0m \u001b[90m 167 |\u001b[39m\n     \u001b[90m 168 |\u001b[39m     \u001b[90m// Test run-tests endpoint\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 169 |\u001b[39m     test(\u001b[32m'POST /api/run-tests - should execute tests'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m     |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 170 |\u001b[39m         \u001b[36mconst\u001b[39m res \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\n     \u001b[90m 171 |\u001b[39m             \u001b[33m.\u001b[39mpost(\u001b[32m'/api/run-tests'\u001b[39m)\n     \u001b[90m 172 |\u001b[39m             \u001b[33m.\u001b[39msend({ failTests\u001b[33m:\u001b[39m \u001b[36mfalse\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at test/app.test.js:169:5\n      at Object.<anonymous> (test/app.test.js:9:1)\n\nPASS Pruebas-Unitarias-Frontend/src/specialty.spec.ts\nPASS Pruebas-Unitarias-Backend/test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîÑ add secrets lifecycle management: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  enable debug logging with { debug: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üì° add observability to secrets: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  write to custom object with { processEnv: myObject }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîê encrypt with Dotenvx: https://dotenvx.com\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  enable debug logging with { debug: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  specify custom .env file path with { path: '/custom/path/.env' }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  specify custom .env file path with { path: '/custom/path/.env' }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Frontend/src/medicine.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/doctor.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/patient.spec.ts\n\nTest Suites: 1 failed, 12 passed, 13 total\nTests:       1 failed, 155 passed, 156 total\nSnapshots:   0 total\nTime:        19.72 s, estimated 21 s\nRan all test suites.\nJest did not exit one second after the test run has completed.\n\n'This usually means that there are asynchronous operations that weren't stopped in your tests. Consider running Jest with `--detectOpenHandles` to troubleshoot this issue.\n"
  },
  {
    "timestamp": "2026-02-12T02:09:52.056Z",
    "date": "11/2/2026, 21:09:52",
    "passed": 11,
    "failed": 2,
    "total": 13,
    "failedTests": [],
    "output": "\n> hospital-api-backend@1.0.0 test\n> jest --runInBand\n\nFAIL test/app.test.js (12.282 s)\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  write to custom object with { processEnv: myObject }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\n  ‚óè App API - Main Endpoints ‚Ä∫ POST /api/run-tests - should execute tests\n\n    thrown: \"Exceeded timeout of 10000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\n    \u001b[0m \u001b[90m 167 |\u001b[39m\n     \u001b[90m 168 |\u001b[39m     \u001b[90m// Test run-tests endpoint\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 169 |\u001b[39m     test(\u001b[32m'POST /api/run-tests - should execute tests'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m     |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 170 |\u001b[39m         \u001b[36mconst\u001b[39m res \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\n     \u001b[90m 171 |\u001b[39m             \u001b[33m.\u001b[39mpost(\u001b[32m'/api/run-tests'\u001b[39m)\n     \u001b[90m 172 |\u001b[39m             \u001b[33m.\u001b[39msend({ failTests\u001b[33m:\u001b[39m \u001b[36mfalse\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at test/app.test.js:169:5\n      at Object.<anonymous> (test/app.test.js:9:1)\n\nPASS test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üõ†Ô∏è  run anywhere with `dotenvx run -- yourcommand`\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Frontend/src/specialty.spec.ts\nPASS test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  specify custom .env file path with { path: '/custom/path/.env' }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîë add access controls to secrets: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  suppress all logs with { quiet: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  suppress all logs with { quiet: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nFAIL Pruebas-Unitarias-Backend/test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  specify custom .env file path with { path: '/custom/path/.env' }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\n  ‚óè Especialidades API - Pruebas Unitarias con Patr√≥n AAA ‚Ä∫ PUT /api/especialidades/:id ‚Ä∫ Debe actualizar el nombre de una especialidad existente\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 500\n\n    \u001b[0m \u001b[90m 100 |\u001b[39m\n     \u001b[90m 101 |\u001b[39m             \u001b[90m// ASSERT: Verificar actualizaci√≥n\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 102 |\u001b[39m             expect(updated\u001b[33m.\u001b[39mstatusCode)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 103 |\u001b[39m             expect(updated\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mname)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Oftalmolog√≠a Pedi√°trica'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 104 |\u001b[39m         })\u001b[33m;\u001b[39m\n     \u001b[90m 105 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (Pruebas-Unitarias-Backend/test/especialidades.test.js:102:40)\n\nPASS Pruebas-Unitarias-Backend/test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üóÇÔ∏è backup and recover secrets: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üóÇÔ∏è backup and recover secrets: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Frontend/src/doctor.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/medicine.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/patient.spec.ts\n\nTest Suites: 2 failed, 11 passed, 13 total\nTests:       2 failed, 154 passed, 156 total\nSnapshots:   0 total\nTime:        20.171 s, estimated 21 s\nRan all test suites.\nJest did not exit one second after the test run has completed.\n\n'This usually means that there are asynchronous operations that weren't stopped in your tests. Consider running Jest with `--detectOpenHandles` to troubleshoot this issue.\n"
  },
  {
    "timestamp": "2026-02-12T02:09:51.970Z",
    "date": "11/2/2026, 21:09:51",
    "passed": 10,
    "failed": 3,
    "total": 13,
    "failedTests": [],
    "output": "\n> hospital-api-backend@1.0.0 test\n> jest --runInBand\n\nFAIL test/app.test.js (12.185 s)\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚úÖ audit secrets and track compliance: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\n  ‚óè App API - Main Endpoints ‚Ä∫ POST /api/run-tests - should execute tests\n\n    thrown: \"Exceeded timeout of 10000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\n    \u001b[0m \u001b[90m 167 |\u001b[39m\n     \u001b[90m 168 |\u001b[39m     \u001b[90m// Test run-tests endpoint\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 169 |\u001b[39m     test(\u001b[32m'POST /api/run-tests - should execute tests'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m     |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 170 |\u001b[39m         \u001b[36mconst\u001b[39m res \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\n     \u001b[90m 171 |\u001b[39m             \u001b[33m.\u001b[39mpost(\u001b[32m'/api/run-tests'\u001b[39m)\n     \u001b[90m 172 |\u001b[39m             \u001b[33m.\u001b[39msend({ failTests\u001b[33m:\u001b[39m \u001b[36mfalse\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at test/app.test.js:169:5\n      at Object.<anonymous> (test/app.test.js:9:1)\n\nPASS Pruebas-Unitarias-Frontend/src/specialty.spec.ts\nFAIL test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîê encrypt with Dotenvx: https://dotenvx.com\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\n  ‚óè Pacientes API ‚Ä∫ PUT /api/pacientes/:id should update multiple fields\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 404\n\n    \u001b[0m \u001b[90m 89 |\u001b[39m             })\u001b[33m;\u001b[39m\n     \u001b[90m 90 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 91 |\u001b[39m         expect(updated\u001b[33m.\u001b[39mstatusCode)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 92 |\u001b[39m         expect(updated\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mname)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Pedro Luis'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 93 |\u001b[39m         expect(updated\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mlastName)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Garcia Perez'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 94 |\u001b[39m         expect(updated\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39memail)\u001b[33m.\u001b[39mtoBe(\u001b[32m'pedroluis@example.com'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (test/pacientes.test.js:91:36)\n\nPASS Pruebas-Unitarias-Backend/test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  write to custom object with { processEnv: myObject }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  load multiple .env files with { path: ['.env.local', '.env'] }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚úÖ audit secrets and track compliance: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîê prevent building .env in docker: https://dotenvx.com/prebuild\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  write to custom object with { processEnv: myObject }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nFAIL test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  load multiple .env files with { path: ['.env.local', '.env'] }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\n  ‚óè Especialidades API ‚Ä∫ DELETE /api/especialidades/:id should delete a specialty\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 404\n\n    \u001b[0m \u001b[90m 80 |\u001b[39m\n     \u001b[90m 81 |\u001b[39m         \u001b[36mconst\u001b[39m deleted \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\u001b[33m.\u001b[39m\u001b[36mdelete\u001b[39m(\u001b[32m`/api/especialidades/${id}`\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 82 |\u001b[39m         expect(deleted\u001b[33m.\u001b[39mstatusCode)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 83 |\u001b[39m         expect(deleted\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mname)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Cardiolog√≠a'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 84 |\u001b[39m\n     \u001b[90m 85 |\u001b[39m         \u001b[36mconst\u001b[39m res \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\u001b[33m.\u001b[39m\u001b[36mget\u001b[39m(\u001b[32m'/api/especialidades'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (test/especialidades.test.js:82:36)\n\nPASS test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üì° add observability to secrets: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Frontend/src/patient.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/medicine.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/doctor.spec.ts\n\nTest Suites: 3 failed, 10 passed, 13 total\nTests:       3 failed, 153 passed, 156 total\nSnapshots:   0 total\nTime:        20.294 s\nRan all test suites.\nJest did not exit one second after the test run has completed.\n\n'This usually means that there are asynchronous operations that weren't stopped in your tests. Consider running Jest with `--detectOpenHandles` to troubleshoot this issue.\n"
  },
  {
    "timestamp": "2026-02-12T02:09:51.883Z",
    "date": "11/2/2026, 21:09:51",
    "passed": 12,
    "failed": 1,
    "total": 13,
    "failedTests": [],
    "output": "\n> hospital-api-backend@1.0.0 test\n> jest --runInBand\n\nFAIL test/app.test.js (12.345 s)\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üë• sync secrets across teammates & machines: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\n  ‚óè App API - Main Endpoints ‚Ä∫ POST /api/run-tests - should execute tests\n\n    thrown: \"Exceeded timeout of 10000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\n    \u001b[0m \u001b[90m 167 |\u001b[39m\n     \u001b[90m 168 |\u001b[39m     \u001b[90m// Test run-tests endpoint\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 169 |\u001b[39m     test(\u001b[32m'POST /api/run-tests - should execute tests'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m     |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 170 |\u001b[39m         \u001b[36mconst\u001b[39m res \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\n     \u001b[90m 171 |\u001b[39m             \u001b[33m.\u001b[39mpost(\u001b[32m'/api/run-tests'\u001b[39m)\n     \u001b[90m 172 |\u001b[39m             \u001b[33m.\u001b[39msend({ failTests\u001b[33m:\u001b[39m \u001b[36mfalse\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at test/app.test.js:169:5\n      at Object.<anonymous> (test/app.test.js:9:1)\n\nPASS Pruebas-Unitarias-Frontend/src/specialty.spec.ts\nPASS test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîë add access controls to secrets: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  write to custom object with { processEnv: myObject }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  suppress all logs with { quiet: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üë• sync secrets across teammates & machines: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  specify custom .env file path with { path: '/custom/path/.env' }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  write to custom object with { processEnv: myObject }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîë add access controls to secrets: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  write to custom object with { processEnv: myObject }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Frontend/src/medicine.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/doctor.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/patient.spec.ts\n\nTest Suites: 1 failed, 12 passed, 13 total\nTests:       1 failed, 155 passed, 156 total\nSnapshots:   0 total\nTime:        20.312 s\nRan all test suites.\nJest did not exit one second after the test run has completed.\n\n'This usually means that there are asynchronous operations that weren't stopped in your tests. Consider running Jest with `--detectOpenHandles` to troubleshoot this issue.\n"
  },
  {
    "timestamp": "2026-02-12T02:09:51.772Z",
    "date": "11/2/2026, 21:09:51",
    "passed": 12,
    "failed": 1,
    "total": 13,
    "failedTests": [],
    "output": "\n> hospital-api-backend@1.0.0 test\n> jest --runInBand\n\nFAIL test/app.test.js (12.276 s)\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  specify custom .env file path with { path: '/custom/path/.env' }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\n  ‚óè App API - Main Endpoints ‚Ä∫ POST /api/run-tests - should execute tests\n\n    thrown: \"Exceeded timeout of 10000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\n    \u001b[0m \u001b[90m 167 |\u001b[39m\n     \u001b[90m 168 |\u001b[39m     \u001b[90m// Test run-tests endpoint\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 169 |\u001b[39m     test(\u001b[32m'POST /api/run-tests - should execute tests'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m     |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 170 |\u001b[39m         \u001b[36mconst\u001b[39m res \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\n     \u001b[90m 171 |\u001b[39m             \u001b[33m.\u001b[39mpost(\u001b[32m'/api/run-tests'\u001b[39m)\n     \u001b[90m 172 |\u001b[39m             \u001b[33m.\u001b[39msend({ failTests\u001b[33m:\u001b[39m \u001b[36mfalse\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at test/app.test.js:169:5\n      at Object.<anonymous> (test/app.test.js:9:1)\n\nPASS Pruebas-Unitarias-Frontend/src/specialty.spec.ts\nPASS Pruebas-Unitarias-Backend/test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîê prevent building .env in docker: https://dotenvx.com/prebuild\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîê encrypt with Dotenvx: https://dotenvx.com\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚úÖ audit secrets and track compliance: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîë add access controls to secrets: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üì° add observability to secrets: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üõ†Ô∏è  run anywhere with `dotenvx run -- yourcommand`\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  enable debug logging with { debug: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  override existing env vars with { override: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Frontend/src/patient.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/medicine.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/doctor.spec.ts\n\nTest Suites: 1 failed, 12 passed, 13 total\nTests:       1 failed, 155 passed, 156 total\nSnapshots:   0 total\nTime:        20.333 s\nRan all test suites.\nJest did not exit one second after the test run has completed.\n\n'This usually means that there are asynchronous operations that weren't stopped in your tests. Consider running Jest with `--detectOpenHandles` to troubleshoot this issue.\n"
  },
  {
    "timestamp": "2026-02-12T02:09:51.690Z",
    "date": "11/2/2026, 21:09:51",
    "passed": 12,
    "failed": 1,
    "total": 13,
    "failedTests": [],
    "output": "\n> hospital-api-backend@1.0.0 test\n> jest --runInBand\n\nFAIL test/app.test.js (12.6 s)\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîê encrypt with Dotenvx: https://dotenvx.com\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\n  ‚óè App API - Main Endpoints ‚Ä∫ POST /api/run-tests - should execute tests\n\n    thrown: \"Exceeded timeout of 10000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\n    \u001b[0m \u001b[90m 167 |\u001b[39m\n     \u001b[90m 168 |\u001b[39m     \u001b[90m// Test run-tests endpoint\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 169 |\u001b[39m     test(\u001b[32m'POST /api/run-tests - should execute tests'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m     |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 170 |\u001b[39m         \u001b[36mconst\u001b[39m res \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\n     \u001b[90m 171 |\u001b[39m             \u001b[33m.\u001b[39mpost(\u001b[32m'/api/run-tests'\u001b[39m)\n     \u001b[90m 172 |\u001b[39m             \u001b[33m.\u001b[39msend({ failTests\u001b[33m:\u001b[39m \u001b[36mfalse\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at test/app.test.js:169:5\n      at Object.<anonymous> (test/app.test.js:9:1)\n\nPASS Pruebas-Unitarias-Frontend/src/specialty.spec.ts\nPASS Pruebas-Unitarias-Backend/test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîê encrypt with Dotenvx: https://dotenvx.com\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  write to custom object with { processEnv: myObject }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîê encrypt with Dotenvx: https://dotenvx.com\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  load multiple .env files with { path: ['.env.local', '.env'] }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîê encrypt with Dotenvx: https://dotenvx.com\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  enable debug logging with { debug: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  specify custom .env file path with { path: '/custom/path/.env' }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚úÖ audit secrets and track compliance: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Frontend/src/doctor.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/medicine.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/patient.spec.ts\n\nTest Suites: 1 failed, 12 passed, 13 total\nTests:       1 failed, 155 passed, 156 total\nSnapshots:   0 total\nTime:        20.685 s\nRan all test suites.\nJest did not exit one second after the test run has completed.\n\n'This usually means that there are asynchronous operations that weren't stopped in your tests. Consider running Jest with `--detectOpenHandles` to troubleshoot this issue.\n"
  },
  {
    "timestamp": "2026-02-12T02:09:51.567Z",
    "date": "11/2/2026, 21:09:51",
    "passed": 12,
    "failed": 1,
    "total": 13,
    "failedTests": [],
    "output": "\n> hospital-api-backend@1.0.0 test\n> jest --runInBand\n\nFAIL test/app.test.js (12.535 s)\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîê prevent committing .env to code: https://dotenvx.com/precommit\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\n  ‚óè App API - Main Endpoints ‚Ä∫ POST /api/run-tests - should execute tests\n\n    thrown: \"Exceeded timeout of 10000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\n    \u001b[0m \u001b[90m 167 |\u001b[39m\n     \u001b[90m 168 |\u001b[39m     \u001b[90m// Test run-tests endpoint\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 169 |\u001b[39m     test(\u001b[32m'POST /api/run-tests - should execute tests'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m     |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 170 |\u001b[39m         \u001b[36mconst\u001b[39m res \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\n     \u001b[90m 171 |\u001b[39m             \u001b[33m.\u001b[39mpost(\u001b[32m'/api/run-tests'\u001b[39m)\n     \u001b[90m 172 |\u001b[39m             \u001b[33m.\u001b[39msend({ failTests\u001b[33m:\u001b[39m \u001b[36mfalse\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at test/app.test.js:169:5\n      at Object.<anonymous> (test/app.test.js:9:1)\n\nPASS Pruebas-Unitarias-Frontend/src/specialty.spec.ts\nPASS Pruebas-Unitarias-Backend/test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  load multiple .env files with { path: ['.env.local', '.env'] }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üë• sync secrets across teammates & machines: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  suppress all logs with { quiet: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üóÇÔ∏è backup and recover secrets: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚úÖ audit secrets and track compliance: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîë add access controls to secrets: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  specify custom .env file path with { path: '/custom/path/.env' }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  override existing env vars with { override: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Frontend/src/doctor.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/medicine.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/patient.spec.ts\n\nTest Suites: 1 failed, 12 passed, 13 total\nTests:       1 failed, 155 passed, 156 total\nSnapshots:   0 total\nTime:        18.902 s, estimated 20 s\nRan all test suites.\n"
  },
  {
    "timestamp": "2026-02-12T02:09:48.270Z",
    "date": "11/2/2026, 21:09:48",
    "passed": 13,
    "failed": 0,
    "total": 13,
    "failedTests": [],
    "output": "\n> hospital-api-backend@1.0.0 test\n> jest --runInBand\n\nPASS test/app.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîê prevent committing .env to code: https://dotenvx.com/precommit\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  suppress all logs with { quiet: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üîê prevent committing .env to code: https://dotenvx.com/precommit\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Frontend/src/specialty.spec.ts\nPASS Pruebas-Unitarias-Backend/test/especialidades.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  suppress all logs with { quiet: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üë• sync secrets across teammates & machines: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: üë• sync secrets across teammates & machines: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/doctores.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  enable debug logging with { debug: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/pacientes.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  override existing env vars with { override: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS Pruebas-Unitarias-Backend/test/medicamentos.test.js\n  ‚óè Console\n\n    console.log\n      [dotenv@17.2.3] injecting env (3) from .env -- tip: ‚öôÔ∏è  override existing env vars with { override: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n    console.log\n      ‚úÖ MongoDB conectado\n\n      at Pruebas-Unitarias-Backend/src/app.js:34:29\n\nPASS Pruebas-Unitarias-Frontend/src/medicine.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/doctor.spec.ts\nPASS Pruebas-Unitarias-Frontend/src/patient.spec.ts\n\nTest Suites: 13 passed, 13 total\nTests:       156 passed, 156 total\nSnapshots:   0 total\nTime:        10.901 s, estimated 20 s\nRan all test suites.\n"
  },
  {
    "timestamp": "2026-02-12T02:09:40.363Z",
    "date": "11/2/2026, 21:09:40",
    "passed": 0,
    "failed": 0,
    "total": 0,
    "failedTests": [],
    "output": "\n> hospital-api-backend@1.0.0 test\n> jest --runInBand\n\n\"jest\" no se reconoce como un comando interno o externo,\r\nprograma o archivo por lotes ejecutable.\r\n"
  }
]